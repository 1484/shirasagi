(function(){var e,t=[].slice;e=function(){function e(e,t){null==t&&(t={}),this.el=$(e),this.options=$.extend({},this.defaults,t),this.el.on("click",function(e){return function(t){return e.search()}}(this))}return e.prototype.defaults={postal_code:"input[name='item[postal_code]']",addr:"input[name='item[addr]']",error:".postal-code-search-error",error_message:"\u90f5\u4fbf\u756a\u53f7\u304c\u898b\u3064\u304b\u308a\u307e\u305b\u3093"},e.prototype.search=function(){var e;return this.clear_error(),e=$(this.options.postal_code).val(),this.el.css("cursor","wait"),$.ajax({type:"POST",url:this.options.path,data:{code:e},success:function(e){return function(t){return e.set_address(t)}}(this),error:function(e){return function(){return e.set_error()}}(this),complete:function(e){return function(){return e.el.css("cursor","")}}(this)})},e.prototype.set_address=function(e){var t;if(e.prefecture)return t=e.prefecture,e.city&&(t+=e.city),e.town&&(t+=e.town),$(this.options.addr).val(t)},e.prototype.set_error=function(){return $(this.options.error).html(this.options.error_message)},e.prototype.clear_error=function(){return $(this.options.error).html("")},e}(),$.fn.extend({postalCodeSearch:function(){var n,i;return i=arguments[0],n=2<=arguments.length?t.call(arguments,1):[],this.each(function(){var t,r;return t=$(this),r=t.data("postalCodeSearch"),r||t.data("postalCodeSearch",r=new e(this,i)),"string"==typeof i?r[i].apply(r,n):void 0})}})}).call(this),function(){}.call(this);