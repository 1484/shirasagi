this.Googlemaps_Map=function(){function e(){}return e.map=null,e.form=null,e.center=[36.204824,138.252924],e.zoom=13,e.markers=null,e.openedInfo=null,e.resized=null,e.attachMessage=function(o){return google.maps.event.addListener(e.markers[o].marker,"click",function(){return e.openedInfo&&e.openedInfo.close(),e.markers[o].window&&e.markers[o].window.open(e.markers[o].marker.getMap(),e.markers[o].marker),e.openedInfo=e.markers[o].window}),google.maps.event.addListener(e.markers[o].window,"closeclick",function(){return e.openedInfo=null})},e.setForm=function(e){return this.form=e},e.load=function(o,n){var r;n&&n.zoom&&(e.zoom=n.zoom),r={center:new google.maps.LatLng(this.center[0],this.center[1]),zoom:this.zoom,mapTypeId:google.maps.MapTypeId.ROADMAP,panControl:!1,zoomControl:!0,zoomControlOptions:{style:google.maps.ZoomControlStyle.LARGE},mapTypeControl:!0,scaleControl:!0,scrollwheel:!0,streetViewControl:!0,overviewMapControl:!0,overviewMapControlOptions:{opened:!0}},this.map=new google.maps.Map($(o).get(0),r)},e.resize=function(){return google.maps.event.trigger(this.map,"resize"),this.resized||(this.map.setCenter(new google.maps.LatLng(this.center[0],this.center[1])),this.form&&this.form.renderMarkers()),this.resized=!0},e.renderMarkers=function(){if(this.form)return this.form.renderMarkers()},e.renderEvents=function(){if(this.form)return this.form.renderEvents()},e.setMarkers=function(o){var n;e.markers=o,n=new google.maps.LatLngBounds,$.each(e.markers,function(o,r){var t,a,s;r.image?e.markers[o].marker=new google.maps.Marker({position:new google.maps.LatLng(r.loc[0],r.loc[1]),icon:r.image,map:e.map}):e.markers[o].marker=new google.maps.Marker({position:new google.maps.LatLng(r.loc[0],r.loc[1]),map:e.map}),n.extend(new google.maps.LatLng(r.loc[0],r.loc[1])),r.html?(t=r.html,e.markers[o].window=new google.maps.InfoWindow({content:t}),e.attachMessage(o)):(r.name||r.text)&&(a=r.name,s=r.text,t='<div class="marker-info">',a&&""!==a&&(t+="<p>"+a+"</p>",s&&""!==s&&$.each(s.split(/[\r\n]+/),function(){return this.match(/^https?:\/\//)?t+='<p><a href="'+this+'">'+this+"</a></p>":t+="<p>"+this+"</p>"})),t+="</div>",e.markers[o].window=new google.maps.InfoWindow({content:t}),e.attachMessage(o))}),0===e.markers.length?e.map.setCenter(new google.maps.LatLng(e.center[0],e.center[1])):(e.map.fitBounds(n),google.maps.event.addListenerOnce(e.map,"idle",function(){e.map.getZoom()>e.zoom&&e.map.setZoom(e.zoom)}))},e}();