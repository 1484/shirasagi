this.Gws_Presence_User=function(){function t(){}return t.render=function(){$(document).on("click",function(){return $(".presence-state-selector").hide(),!0}),$(".presence-state-selector").on("click",function(){return!1}),$(".presence-state-selector [data-value]").on("click",function(){var e=$(this).closest(".presence-state-selector").attr("data-id"),a=$(this).closest(".presence-state-selector").attr("data-url"),r=$(this).attr("data-value");return $.ajax({url:a,type:"POST",data:{_method:"put",authenticity_token:$('meta[name="csrf-token"]').attr("content"),presence_state:r},success:function(a){t.changedState(e,a),$(".presence-state-selector").hide()},error:function(t){alert(t.responseJSON.join("\n"))}}),!1}),$(".editable .select-presence-state,.editable .presence-state").on("click",function(){return $(".presence-state-selector").closest("li.portlet-item").css("z-index",0),$(".presence-state-selector").hide(),$(this).closest("li.portlet-item").css("z-index",1e3),$(this).closest("td").find(".presence-state-selector").show(),!1}),$(".ajax-text-field").on("click",function(){return t.toggleForm(this),!1}),$(".ajax-text-field").next(".editicon").on("click",function(){return $(this).prev(".ajax-text-field").trigger("click"),!1})},t.changedState=function(t,e){var a=e.presence_state||"none",r=e.presence_state_label,n=$("tr[data-id="+t+"] .presence-state"),s=$("tr[data-id="+t+"] .presence-state-selector");n.removeClass(),n.addClass("presence-state"),n.addClass(a),n.text(r),s.find("[data-value="+a+"] .selected-icon").css("visibility","visible"),s.find("[data-value!="+a+"] .selected-icon").css("visibility","hidden")},t.toggleForm=function(e){var a=$(e).attr("data-tag-state"),r=$(e).attr("data-original-tag"),n=$(e).attr("data-form-tag"),s=$(e).text()||$(e).val(),i=$(n).attr("name"),o=($(n).attr("data-id"),$(n).attr("data-url")),c=!1;if("original"==a){(n=$(n)).attr("data-original-tag",$(e).attr("data-original-tag")),n.attr("data-form-tag",$(e).attr("data-form-tag")),n.val(s),n.focusout(function(){if(c)return!0;var e={_method:"put",authenticity_token:$('meta[name="csrf-token"]').attr("content")};return e[i]=$(n).val(),$.ajax({url:o,type:"POST",data:e,success:function(e){$(n).val(e[i]),t.toggleForm(n)},error:function(t){alert(t.responseJSON.join("\n")),c=!0}}),!1}),n.keypress(function(e){if(13==e.which){var a={_method:"put",authenticity_token:$('meta[name="csrf-token"]').attr("content")};return a[i]=$(n).val(),$.ajax({url:o,type:"POST",data:a,success:function(e){$(n).val(e[i]),t.toggleForm(n)},error:function(t){alert(t.responseJSON.join("\n")),c=!0}}),!1}});var l=n.uniqueId();$(e).replaceWith(n),$(l).focus()}else(r=$(r).text(s)).attr("data-original-tag",$(e).attr("data-original-tag")),r.attr("data-form-tag",$(e).attr("data-form-tag")),r.on("click",function(){return t.toggleForm(this),!1}),r.uniqueId(),$(e).replaceWith(r),$(".ajax-text-field[data-id='"+r.attr("data-id")+"'][data-name='"+r.attr("data-name")+"']").text(s)},t}(),this.Gws_Presence_User_Reload=function(){function t(){}return t.render=function(t={}){var e=t.url,a=t.paginate_params,r=t.page;$(".group-users .reload").on("click",function(){param=$.param({s:{keyword:$(".group-users [name='s[keyword]']").val()},paginate_params:a,page:r}),$.ajax({url:e+"?"+param,beforeSend:function(){$(".group-users .data-table-wrap").html(SS.loading)},success:function(t){$(".group-users .data-table-wrap").html(t);var e=$(".group-users .data-table-wrap").find("time");$(".group-users .list-head time").replaceWith(e).show(),e.show()}})}),$(".group-users .list-head .search").on("submit",function(){return param=$.param({s:{keyword:$(".group-users [name='s[keyword]']").val()},paginate_params:a}),$.ajax({url:e+"?"+param,beforeSend:function(){$(".group-users .data-table-wrap").html(SS.loading)},success:function(t){$(".group-users .data-table-wrap").html(t);var e=$(".group-users .data-table-wrap").find("time");$(".group-users .list-head time").replaceWith(e),e.show()},error:function(){$(".group-users .data-table-wrap").html("")}}),!1})},t}();