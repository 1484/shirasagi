//! moment.js
//! version : 2.20.1
//! authors : Tim Wood, Iskren Chernev, Moment.js contributors
//! license : MIT
//! momentjs.com
//  Copyright (c) 2002 M.Inamori,All rights reserved.
function sprintf(){var t=sprintf.arguments,e=t.length;if(0==e)return"";var i,n,r,s="",o=t[0],a=o.length;i=0;for(var l,d=1,h=0,c=0;c<a;c++){var u=o.charAt(c);switch(h){case 0:"%"==u?(u,h=1,l=""):s+=u;break;case 1:if("%"==u){s+=u,h=0;break}switch(d>=e&&(t[e++]=""),n=0,r=-1,u){case"-":i|=1,h=1;break;case"+":i|=2,h=1;break;case"0":i|=4,h=2;break;case" ":i|=8,h=1;break;case"#":i|=16,h=1;break;case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":n=parseInt(u),h=2;break;case"-":i=1,h=2;break;case".":n="",r=0,h=3;break;case"d":s+=toInteger(t[d],i,n,r),d++,h=0;break;case"f":s+=toFloatingPoint(t[d],i,n,6),d++,h=0;break;case"e":s+=toExponential(t[d],i,n,6,"e"),d++,h=0;break;case"E":s+=toExponential(t[d],i,n,6,"E"),d++,h=0;break;case"s":s+=t[d],d++,h=0;break;default:s+=l+u,h=0}break;case 2:switch(u){case".":r=0,h=3;break;case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":n=10*n+parseInt(u),h=2;break;case"d":s+=toInteger(t[d],i,n,r),d++,h=0;break;case"f":s+=toFloatingPoint(t[d],i,n,6),d++,h=0;break;case"e":s+=toExponential(t[d],i,n,6,"e"),d++,h=0;break;case"E":s+=toExponential(t[d],i,n,6,"E"),d++,h=0;break;case"s":s+=toFormatString(t[d],n,r),d++,h=0;break;default:s+=l+u,h=0}break;case 3:switch(u){case"0":case"1":case"2":case"3":case"4":case"5":case"6":case"7":case"8":case"9":r=10*r+parseInt(u);break;case"d":s+=toInteger(t[d],i,n,r),d++,h=0;break;case"f":s+=toFloatingPoint(t[d],i,n,r),d++,h=0;break;case"e":s+=toExponential(t[d],i,n,r,"e"),d++,h=0;break;case"E":s+=toExponential(t[d],i,n,r,"E"),d++,h=0;break;case"s":s+=toFormatString(t[d],n,r),d++,h=0;break;default:s+=l+u,h=0}break;default:return"error"}h&&(l+=u)}return s}function toInteger(t,e,i,n){"number"!=typeof t&&("string"==typeof t?(t=parseFloat(t),isNaN(t)&&(t=0)):t=0);var r=t.toString();if(-1<t&&t<1)r="0";else{t<0&&(r=r.substring(1));var s=r.indexOf("e");if(-1!=s){var o=parseInt(r.substring(s+2));for(-1==(a=r.indexOf("."))?(r=r.substring(0,s)+"000000000000000000000",o-=21):o-=(r=r.substring(0,a)+r.substring(a+1,s)+"00000").length-a;o;o--)r+="0"}else{var a;-1!=(a=r.indexOf("."))&&(r=r.substring(0,a))}}var l=r.length;if(l<n){for(var d="0",h=n-l;h;h--)r=d+r;l=n}return ProcFlag(r,e,i-l,t>=0)}function toFloatingPoint(t,e,i,n){"number"!=typeof t&&("string"==typeof t?(t=parseFloat(t),isNaN(t)&&(t=0)):t=0);var r=t>=0;return r||(t=-t),str=toFloatingPoint2(t,e,n),ProcFlag(str,e,i-str.length,r)}function toFloatingPoint2(t,e,i){var n=t.toString(),r=n.indexOf("e");if(-1!=r){var s=parseInt(n.substring(r+1));if(s>0){for(-1==(l=n.indexOf("."))?(n=n.substring(0,r)+"000000000000000000000",s-=21):s-=(n=n.charAt(0)+n.substring(2,r)+"00000").length-1;s;s--)n+="0"}else{var o=s+i;if(o<-1)n="0";else if(o>=0){for(-1!=(l=(n=n.substring(0,r)).indexOf("."))&&(n=n.charAt(0)+n.substring(2,r)),n="000000"+n,s+=7;s;s++)n="0"+n;n="0."+n}else{if((h=parseFloat(n.substring(0,r)))>5){n="0.00000";for(var a=s+7;a;a++)n+="0";n+="1"}else n="0"}}}var l,d=n.length;if(-1!=(l=n.indexOf("."))){var h,c=d-l-1;if(c>i)if((h=parseFloat(n.charAt(l+i+1)+"."+n.substring(l+i+2)))>5)if(t<1){for(a=2;"0"==n.charAt(a);)a++;n=(h=(parseInt(n.substring(a,i+2))+1).toString()).length>i+2-a?2==a?"1."+h.substring(1):n.substring(0,a-1)+h:n.substring(0,a)+h}else n=(h=(parseInt(n.substring(0,l)+n.substring(l+1,l+i+1))+1).toString()).length>l+i?h.substring(0,l+1)+"."+h.substring(l+1):h.substring(0,l)+"."+h.substring(l);else n=n.substring(0,i?l+i+1:l);else if(c<i)for(a=i-c;a;a--)n+="0"}else if(i){n+=".0";for(a=i-1;a;a--)n+="0"}return n}function toExponential(t,e,i,n,r){"number"!=typeof t&&("string"==typeof t?(t=parseFloat(t),isNaN(t)&&(t=0)):t=0);var s=t>=0;s||(t=-t);var o,a=t.toString(),l=a.indexOf("."),d=a.indexOf("e"),h=((-1!=d)<<1)+(-1!=l);if(0==h)(o=a.length-1)&&(a=a.charAt(0)+"."+a.substring(l=1));else if(1==h)if(t>10)o=l-1,a=a.substring(0,1)+"."+a.substring(1,l)+a.substring(l+1),l=1;else if(t>1)o=0;else{for(var c=2;;c++)if("0"!=a.charAt(c)){o=1-c,a=a.charAt(c)+"."+a.substring(c+1);break}l=1}else o=parseInt(a.substring(d+1)),a=a.substring(0,d);return a=toFloatingPoint2(parseFloat(a),e,n),a=ProcFlag(a+=o>=0?r+(o<10?"+0":"+")+o:r+(o>-10?"-0"+-o:o),e,i-a.length,s)}function toFormatString(t,e,i){"string"!=typeof t&&(t=t.toString());var n=t.length;if(i>=0&&i<n&&(t=t.substring(0,i),n=i),n<e)for(var r=" ",s=e-n;s;s--)t=r+t;return t}function ProcFlag(t,e,i,n){var r=1&e,s=2&e,o=8&e;if(o&&i--,i-=!n+s>0,(4&e)>0&&!r){if(i>0)for(var a="0",l=i;l;l--)t=a+t;n?s&&(t="+"+t):t="-"+t}else{n?s&&(t="+"+t):t="-"+t;a=" ";if(i>0){a=" ";if(r)for(l=i;l;l--)t+=a;else for(l=i;l;l--)t=a+t}}return o&&(t=" "+t),t}function Gws_Category_Navi(t){this.el=$(t)}function Gws_Tab(){}function Gws_Bookmark(){this.bookmarkId=null,this.defaultName=null,this.url=null,this.model=null,this.el=$(".gws-bookmark"),this.bookmarkIcon="&#xE838;",this.unbookmarkIcon="&#xE83A;",this.loading=!1}function Gws_ReadableSetting(t){this.el=$(t)}function Gws_Contrast(t){this.opts=t,this.$el=$("#user-contrast-menu"),this.template="body * { color: :color !important; border-color: :color !important; background: :background !important; }",this.render()}function Gws_Schedule_CalendarTransition(t){t&&(this.date="calendar[date]="+t.date,this.path="calendar[path]="+t.path,this.view="calendar[view]="+t.view,this.format="calendar[viewFormat]="+t.viewFormat,this.todo="calendar[viewTodo]="+t.viewTodo,this.atendance="calendar[viewAttendance]="+t.viewAttendance,this.state=[this.date,this.view,this.path,this.format,this.todo,this.attendance].join("&"))}function Gws_Memo_Folder(){}function Gws_Memo_Filter(){}function Gws_Portal(t,e){options={autogenerate_stylesheet:!0,resize:{enabled:!0,max_size:[4,10]},widget_base_dimensions:["auto",120],widget_margins:[10,10],min_cols:1,max_cols:4},e&&e.readonly&&(this.readonly=!0,options.resize={enabled:!1},options.draggable={enabled:!1,handle:"disable"}),this.el=$(t),this.gs=this.el.find("ul.portlets").gridster(options).data("gridster")}!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):t.moment=e()}(this,function(){"use strict";function t(){return Tn.apply(null,arguments)}function e(t){Tn=t}function i(t){return t instanceof Array||"[object Array]"===Object.prototype.toString.call(t)}function n(t){return null!=t&&"[object Object]"===Object.prototype.toString.call(t)}function r(t){if(Object.getOwnPropertyNames)return 0===Object.getOwnPropertyNames(t).length;var e;for(e in t)if(t.hasOwnProperty(e))return!1;return!0}function s(t){return void 0===t}function o(t){return"number"==typeof t||"[object Number]"===Object.prototype.toString.call(t)}function a(t){return t instanceof Date||"[object Date]"===Object.prototype.toString.call(t)}function l(t,e){var i,n=[];for(i=0;i<t.length;++i)n.push(e(t[i],i));return n}function d(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function h(t,e){for(var i in e)d(e,i)&&(t[i]=e[i]);return d(e,"toString")&&(t.toString=e.toString),d(e,"valueOf")&&(t.valueOf=e.valueOf),t}function c(t,e,i,n){return xe(t,e,i,n,!0).utc()}function u(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1,parsedDateParts:[],meridiem:null,rfc2822:!1,weekdayMismatch:!1}}function p(t){return null==t._pf&&(t._pf=u()),t._pf}function f(t){if(null==t._isValid){var e=p(t),i=kn.call(e.parsedDateParts,function(t){return null!=t}),n=!isNaN(t._d.getTime())&&e.overflow<0&&!e.empty&&!e.invalidMonth&&!e.invalidWeekday&&!e.weekdayMismatch&&!e.nullInput&&!e.invalidFormat&&!e.userInvalidated&&(!e.meridiem||e.meridiem&&i);if(t._strict&&(n=n&&0===e.charsLeftOver&&0===e.unusedTokens.length&&e.bigHour===undefined),null!=Object.isFrozen&&Object.isFrozen(t))return n;t._isValid=n}return t._isValid}function g(t){var e=c(NaN);return null!=t?h(p(e),t):p(e).userInvalidated=!0,e}function m(t,e){var i,n,r;if(s(e._isAMomentObject)||(t._isAMomentObject=e._isAMomentObject),s(e._i)||(t._i=e._i),s(e._f)||(t._f=e._f),s(e._l)||(t._l=e._l),s(e._strict)||(t._strict=e._strict),s(e._tzm)||(t._tzm=e._tzm),s(e._isUTC)||(t._isUTC=e._isUTC),s(e._offset)||(t._offset=e._offset),s(e._pf)||(t._pf=p(e)),s(e._locale)||(t._locale=e._locale),$n.length>0)for(i=0;i<$n.length;i++)s(r=e[n=$n[i]])||(t[n]=r);return t}function _(e){m(this,e),this._d=new Date(null!=e._d?e._d.getTime():NaN),this.isValid()||(this._d=new Date(NaN)),!1===Hn&&(Hn=!0,t.updateOffset(this),Hn=!1)}function v(t){return t instanceof _||null!=t&&null!=t._isAMomentObject}function y(t){return t<0?Math.ceil(t)||0:Math.floor(t)}function w(t){var e=+t,i=0;return 0!==e&&isFinite(e)&&(i=y(e)),i}function b(t,e,i){var n,r=Math.min(t.length,e.length),s=Math.abs(t.length-e.length),o=0;for(n=0;n<r;n++)(i&&t[n]!==e[n]||!i&&w(t[n])!==w(e[n]))&&o++;return o+s}function S(e){!1===t.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function C(e,i){var n=!0;return h(function(){if(null!=t.deprecationHandler&&t.deprecationHandler(null,e),n){for(var r,s=[],o=0;o<arguments.length;o++){if(r="","object"==typeof arguments[o]){for(var a in r+="\n["+o+"] ",arguments[0])r+=a+": "+arguments[0][a]+", ";r=r.slice(0,-2)}else r=arguments[o];s.push(r)}S(e+"\nArguments: "+Array.prototype.slice.call(s).join("")+"\n"+(new Error).stack),n=!1}return i.apply(this,arguments)},i)}function x(e,i){null!=t.deprecationHandler&&t.deprecationHandler(e,i),Mn[e]||(S(i),Mn[e]=!0)}function D(t){return t instanceof Function||"[object Function]"===Object.prototype.toString.call(t)}function E(t){var e,i;for(i in t)D(e=t[i])?this[i]=e:this["_"+i]=e;this._config=t,this._dayOfMonthOrdinalParseLenient=new RegExp((this._dayOfMonthOrdinalParse.source||this._ordinalParse.source)+"|"+/\d{1,2}/.source)}function T(t,e){var i,r=h({},t);for(i in e)d(e,i)&&(n(t[i])&&n(e[i])?(r[i]={},h(r[i],t[i]),h(r[i],e[i])):null!=e[i]?r[i]=e[i]:delete r[i]);for(i in t)d(t,i)&&!d(e,i)&&n(t[i])&&(r[i]=h({},r[i]));return r}function k(t){null!=t&&this.set(t)}function R(t,e,i){var n=this._calendar[t]||this._calendar.sameElse;return D(n)?n.call(e,i):n}function $(t){var e=this._longDateFormat[t],i=this._longDateFormat[t.toUpperCase()];return e||!i?e:(this._longDateFormat[t]=i.replace(/MMMM|MM|DD|dddd/g,function(t){return t.slice(1)}),this._longDateFormat[t])}function H(){return this._invalidDate}function M(t){return this._ordinal.replace("%d",t)}function z(t,e,i,n){var r=this._relativeTime[i];return D(r)?r(t,e,i,n):r.replace(/%d/i,t)}function I(t,e){var i=this._relativeTime[t>0?"future":"past"];return D(i)?i(e):i.replace(/%s/i,e)}function F(t,e){var i=t.toLowerCase();Pn[i]=Pn[i+"s"]=Pn[e]=t}function G(t){return"string"==typeof t?Pn[t]||Pn[t.toLowerCase()]:undefined}function Y(t){var e,i,n={};for(i in t)d(t,i)&&(e=G(i))&&(n[e]=t[i]);return n}function L(t,e){On[t]=e}function P(t){var e=[];for(var i in t)e.push({unit:i,priority:On[i]});return e.sort(function(t,e){return t.priority-e.priority}),e}function O(t,e,i){var n=""+Math.abs(t),r=e-n.length;return(t>=0?i?"+":"":"-")+Math.pow(10,Math.max(0,r)).toString().substr(1)+n}function A(t,e,i,n){var r=n;"string"==typeof n&&(r=function(){return this[n]()}),t&&(Vn[t]=r),e&&(Vn[e[0]]=function(){return O(r.apply(this,arguments),e[1],e[2])}),i&&(Vn[i]=function(){return this.localeData().ordinal(r.apply(this,arguments),t)})}function W(t){return t.match(/\[[\s\S]/)?t.replace(/^\[|\]$/g,""):t.replace(/\\/g,"")}function N(t){var e,i,n=t.match(An);for(e=0,i=n.length;e<i;e++)Vn[n[e]]?n[e]=Vn[n[e]]:n[e]=W(n[e]);return function(e){var r,s="";for(r=0;r<i;r++)s+=D(n[r])?n[r].call(e,t):n[r];return s}}function V(t,e){return t.isValid()?(e=B(e,t.localeData()),Nn[e]=Nn[e]||N(e),Nn[e](t)):t.localeData().invalidDate()}function B(t,e){function i(t){return e.longDateFormat(t)||t}var n=5;for(Wn.lastIndex=0;n>=0&&Wn.test(t);)t=t.replace(Wn,i),Wn.lastIndex=0,n-=1;return t}function j(t,e,i){lr[t]=D(e)?e:function(t){return t&&i?i:e}}function U(t,e){return d(lr,t)?lr[t](e._strict,e._locale):new RegExp(q(t))}function q(t){return Z(t.replace("\\","").replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(t,e,i,n,r){return e||i||n||r}))}function Z(t){return t.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function X(t,e){var i,n=e;for("string"==typeof t&&(t=[t]),o(e)&&(n=function(t,i){i[e]=w(t)}),i=0;i<t.length;i++)dr[t[i]]=n}function Q(t,e){X(t,function(t,i,n,r){n._w=n._w||{},e(t,n._w,n,r)})}function J(t,e,i){null!=e&&d(dr,t)&&dr[t](e,i._a,i,t)}function K(t){return tt(t)?366:365}function tt(t){return t%4==0&&t%100!=0||t%400==0}function et(){return tt(this.year())}function it(e,i){return function(n){return null!=n?(rt(this,e,n),t.updateOffset(this,i),this):nt(this,e)}}function nt(t,e){return t.isValid()?t._d["get"+(t._isUTC?"UTC":"")+e]():NaN}function rt(t,e,i){t.isValid()&&!isNaN(i)&&("FullYear"===e&&tt(t.year())&&1===t.month()&&29===t.date()?t._d["set"+(t._isUTC?"UTC":"")+e](i,t.month(),lt(i,t.month())):t._d["set"+(t._isUTC?"UTC":"")+e](i))}function st(t){return D(this[t=G(t)])?this[t]():this}function ot(t,e){if("object"==typeof t)for(var i=P(t=Y(t)),n=0;n<i.length;n++)this[i[n].unit](t[i[n].unit]);else if(D(this[t=G(t)]))return this[t](e);return this}function at(t,e){return(t%e+e)%e}function lt(t,e){if(isNaN(t)||isNaN(e))return NaN;var i=at(e,12);return t+=(e-i)/12,1===i?tt(t)?29:28:31-i%7%2}function dt(t,e){return t?i(this._months)?this._months[t.month()]:this._months[(this._months.isFormat||br).test(e)?"format":"standalone"][t.month()]:i(this._months)?this._months:this._months.standalone}function ht(t,e){return t?i(this._monthsShort)?this._monthsShort[t.month()]:this._monthsShort[br.test(e)?"format":"standalone"][t.month()]:i(this._monthsShort)?this._monthsShort:this._monthsShort.standalone}function ct(t,e,i){var n,r,s,o=t.toLocaleLowerCase();if(!this._monthsParse)for(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[],n=0;n<12;++n)s=c([2e3,n]),this._shortMonthsParse[n]=this.monthsShort(s,"").toLocaleLowerCase(),this._longMonthsParse[n]=this.months(s,"").toLocaleLowerCase();return i?"MMM"===e?-1!==(r=yr.call(this._shortMonthsParse,o))?r:null:-1!==(r=yr.call(this._longMonthsParse,o))?r:null:"MMM"===e?-1!==(r=yr.call(this._shortMonthsParse,o))?r:-1!==(r=yr.call(this._longMonthsParse,o))?r:null:-1!==(r=yr.call(this._longMonthsParse,o))?r:-1!==(r=yr.call(this._shortMonthsParse,o))?r:null}function ut(t,e,i){var n,r,s;if(this._monthsParseExact)return ct.call(this,t,e,i);for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),n=0;n<12;n++){if(r=c([2e3,n]),i&&!this._longMonthsParse[n]&&(this._longMonthsParse[n]=new RegExp("^"+this.months(r,"").replace(".","")+"$","i"),this._shortMonthsParse[n]=new RegExp("^"+this.monthsShort(r,"").replace(".","")+"$","i")),i||this._monthsParse[n]||(s="^"+this.months(r,"")+"|^"+this.monthsShort(r,""),this._monthsParse[n]=new RegExp(s.replace(".",""),"i")),i&&"MMMM"===e&&this._longMonthsParse[n].test(t))return n;if(i&&"MMM"===e&&this._shortMonthsParse[n].test(t))return n;if(!i&&this._monthsParse[n].test(t))return n}}function pt(t,e){var i;if(!t.isValid())return t;if("string"==typeof e)if(/^\d+$/.test(e))e=w(e);else if(!o(e=t.localeData().monthsParse(e)))return t;return i=Math.min(t.date(),lt(t.year(),e)),t._d["set"+(t._isUTC?"UTC":"")+"Month"](e,i),t}function ft(e){return null!=e?(pt(this,e),t.updateOffset(this,!0),this):nt(this,"Month")}function gt(){return lt(this.year(),this.month())}function mt(t){return this._monthsParseExact?(d(this,"_monthsRegex")||vt.call(this),t?this._monthsShortStrictRegex:this._monthsShortRegex):(d(this,"_monthsShortRegex")||(this._monthsShortRegex=xr),this._monthsShortStrictRegex&&t?this._monthsShortStrictRegex:this._monthsShortRegex)}function _t(t){return this._monthsParseExact?(d(this,"_monthsRegex")||vt.call(this),t?this._monthsStrictRegex:this._monthsRegex):(d(this,"_monthsRegex")||(this._monthsRegex=Dr),this._monthsStrictRegex&&t?this._monthsStrictRegex:this._monthsRegex)}function vt(){function t(t,e){return e.length-t.length}var e,i,n=[],r=[],s=[];for(e=0;e<12;e++)i=c([2e3,e]),n.push(this.monthsShort(i,"")),r.push(this.months(i,"")),s.push(this.months(i,"")),s.push(this.monthsShort(i,""));for(n.sort(t),r.sort(t),s.sort(t),e=0;e<12;e++)n[e]=Z(n[e]),r[e]=Z(r[e]);for(e=0;e<24;e++)s[e]=Z(s[e]);this._monthsRegex=new RegExp("^("+s.join("|")+")","i"),this._monthsShortRegex=this._monthsRegex,this._monthsStrictRegex=new RegExp("^("+r.join("|")+")","i"),this._monthsShortStrictRegex=new RegExp("^("+n.join("|")+")","i")}function yt(t,e,i,n,r,s,o){var a=new Date(t,e,i,n,r,s,o);return t<100&&t>=0&&isFinite(a.getFullYear())&&a.setFullYear(t),a}function wt(t){var e=new Date(Date.UTC.apply(null,arguments));return t<100&&t>=0&&isFinite(e.getUTCFullYear())&&e.setUTCFullYear(t),e}function bt(t,e,i){var n=7+e-i;return-((7+wt(t,0,n).getUTCDay()-e)%7)+n-1}function St(t,e,i,n,r){var s,o,a=1+7*(e-1)+(7+i-n)%7+bt(t,n,r);return a<=0?o=K(s=t-1)+a:a>K(t)?(s=t+1,o=a-K(t)):(s=t,o=a),{year:s,dayOfYear:o}}function Ct(t,e,i){var n,r,s=bt(t.year(),e,i),o=Math.floor((t.dayOfYear()-s-1)/7)+1;return o<1?n=o+xt(r=t.year()-1,e,i):o>xt(t.year(),e,i)?(n=o-xt(t.year(),e,i),r=t.year()+1):(r=t.year(),n=o),{week:n,year:r}}function xt(t,e,i){var n=bt(t,e,i),r=bt(t+1,e,i);return(K(t)-n+r)/7}function Dt(t){return Ct(t,this._week.dow,this._week.doy).week}function Et(){return this._week.dow}function Tt(){return this._week.doy}function kt(t){var e=this.localeData().week(this);return null==t?e:this.add(7*(t-e),"d")}function Rt(t){var e=Ct(this,1,4).week;return null==t?e:this.add(7*(t-e),"d")}function $t(t,e){return"string"!=typeof t?t:isNaN(t)?"number"==typeof(t=e.weekdaysParse(t))?t:null:parseInt(t,10)}function Ht(t,e){return"string"==typeof t?e.weekdaysParse(t)%7||7:isNaN(t)?null:t}function Mt(t,e){return t?i(this._weekdays)?this._weekdays[t.day()]:this._weekdays[this._weekdays.isFormat.test(e)?"format":"standalone"][t.day()]:i(this._weekdays)?this._weekdays:this._weekdays.standalone}function zt(t){return t?this._weekdaysShort[t.day()]:this._weekdaysShort}function It(t){return t?this._weekdaysMin[t.day()]:this._weekdaysMin}function Ft(t,e,i){var n,r,s,o=t.toLocaleLowerCase();if(!this._weekdaysParse)for(this._weekdaysParse=[],this._shortWeekdaysParse=[],this._minWeekdaysParse=[],n=0;n<7;++n)s=c([2e3,1]).day(n),this._minWeekdaysParse[n]=this.weekdaysMin(s,"").toLocaleLowerCase(),this._shortWeekdaysParse[n]=this.weekdaysShort(s,"").toLocaleLowerCase(),this._weekdaysParse[n]=this.weekdays(s,"").toLocaleLowerCase();return i?"dddd"===e?-1!==(r=yr.call(this._weekdaysParse,o))?r:null:"ddd"===e?-1!==(r=yr.call(this._shortWeekdaysParse,o))?r:null:-1!==(r=yr.call(this._minWeekdaysParse,o))?r:null:"dddd"===e?-1!==(r=yr.call(this._weekdaysParse,o))?r:-1!==(r=yr.call(this._shortWeekdaysParse,o))?r:-1!==(r=yr.call(this._minWeekdaysParse,o))?r:null:"ddd"===e?-1!==(r=yr.call(this._shortWeekdaysParse,o))?r:-1!==(r=yr.call(this._weekdaysParse,o))?r:-1!==(r=yr.call(this._minWeekdaysParse,o))?r:null:-1!==(r=yr.call(this._minWeekdaysParse,o))?r:-1!==(r=yr.call(this._weekdaysParse,o))?r:-1!==(r=yr.call(this._shortWeekdaysParse,o))?r:null}function Gt(t,e,i){var n,r,s;if(this._weekdaysParseExact)return Ft.call(this,t,e,i);for(this._weekdaysParse||(this._weekdaysParse=[],this._minWeekdaysParse=[],this._shortWeekdaysParse=[],this._fullWeekdaysParse=[]),n=0;n<7;n++){if(r=c([2e3,1]).day(n),i&&!this._fullWeekdaysParse[n]&&(this._fullWeekdaysParse[n]=new RegExp("^"+this.weekdays(r,"").replace(".",".?")+"$","i"),this._shortWeekdaysParse[n]=new RegExp("^"+this.weekdaysShort(r,"").replace(".",".?")+"$","i"),this._minWeekdaysParse[n]=new RegExp("^"+this.weekdaysMin(r,"").replace(".",".?")+"$","i")),this._weekdaysParse[n]||(s="^"+this.weekdays(r,"")+"|^"+this.weekdaysShort(r,"")+"|^"+this.weekdaysMin(r,""),this._weekdaysParse[n]=new RegExp(s.replace(".",""),"i")),i&&"dddd"===e&&this._fullWeekdaysParse[n].test(t))return n;if(i&&"ddd"===e&&this._shortWeekdaysParse[n].test(t))return n;if(i&&"dd"===e&&this._minWeekdaysParse[n].test(t))return n;if(!i&&this._weekdaysParse[n].test(t))return n}}function Yt(t){if(!this.isValid())return null!=t?this:NaN;var e=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=t?(t=$t(t,this.localeData()),this.add(t-e,"d")):e}function Lt(t){if(!this.isValid())return null!=t?this:NaN;var e=(this.day()+7-this.localeData()._week.dow)%7;return null==t?e:this.add(t-e,"d")}function Pt(t){if(!this.isValid())return null!=t?this:NaN;if(null!=t){var e=Ht(t,this.localeData());return this.day(this.day()%7?e:e-7)}return this.day()||7}function Ot(t){return this._weekdaysParseExact?(d(this,"_weekdaysRegex")||Nt.call(this),t?this._weekdaysStrictRegex:this._weekdaysRegex):(d(this,"_weekdaysRegex")||(this._weekdaysRegex=$r),this._weekdaysStrictRegex&&t?this._weekdaysStrictRegex:this._weekdaysRegex)}function At(t){return this._weekdaysParseExact?(d(this,"_weekdaysRegex")||Nt.call(this),t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex):(d(this,"_weekdaysShortRegex")||(this._weekdaysShortRegex=Hr),this._weekdaysShortStrictRegex&&t?this._weekdaysShortStrictRegex:this._weekdaysShortRegex)}function Wt(t){return this._weekdaysParseExact?(d(this,"_weekdaysRegex")||Nt.call(this),t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex):(d(this,"_weekdaysMinRegex")||(this._weekdaysMinRegex=Mr),this._weekdaysMinStrictRegex&&t?this._weekdaysMinStrictRegex:this._weekdaysMinRegex)}function Nt(){function t(t,e){return e.length-t.length}var e,i,n,r,s,o=[],a=[],l=[],d=[];for(e=0;e<7;e++)i=c([2e3,1]).day(e),n=this.weekdaysMin(i,""),r=this.weekdaysShort(i,""),s=this.weekdays(i,""),o.push(n),a.push(r),l.push(s),d.push(n),d.push(r),d.push(s);for(o.sort(t),a.sort(t),l.sort(t),d.sort(t),e=0;e<7;e++)a[e]=Z(a[e]),l[e]=Z(l[e]),d[e]=Z(d[e]);this._weekdaysRegex=new RegExp("^("+d.join("|")+")","i"),this._weekdaysShortRegex=this._weekdaysRegex,this._weekdaysMinRegex=this._weekdaysRegex,this._weekdaysStrictRegex=new RegExp("^("+l.join("|")+")","i"),this._weekdaysShortStrictRegex=new RegExp("^("+a.join("|")+")","i"),this._weekdaysMinStrictRegex=new RegExp("^("+o.join("|")+")","i")}function Vt(){return this.hours()%12||12}function Bt(){return this.hours()||24}function jt(t,e){A(t,0,0,function(){return this.localeData().meridiem(this.hours(),this.minutes(),e)})}function Ut(t,e){return e._meridiemParse}function qt(t){return"p"===(t+"").toLowerCase().charAt(0)}function Zt(t,e,i){return t>11?i?"pm":"PM":i?"am":"AM"}function Xt(t){return t?t.toLowerCase().replace("_","-"):t}function Qt(t){for(var e,i,n,r,s=0;s<t.length;){for(e=(r=Xt(t[s]).split("-")).length,i=(i=Xt(t[s+1]))?i.split("-"):null;e>0;){if(n=Jt(r.slice(0,e).join("-")))return n;if(i&&i.length>=e&&b(r,i,!0)>=e-1)break;e--}s++}return null}function Jt(t){var e=null;if(!Yr[t]&&"undefined"!=typeof module&&module&&module.exports)try{e=zr._abbr,require("./locale/"+t),Kt(e)}catch(i){}return Yr[t]}function Kt(t,e){var i;return t&&(i=s(e)?ie(t):te(t,e))&&(zr=i),zr._abbr}function te(t,e){if(null!==e){var i=Gr;if(e.abbr=t,null!=Yr[t])x("defineLocaleOverride","use moment.updateLocale(localeName, config) to change an existing locale. moment.defineLocale(localeName, config) should only be used for creating a new locale See http://momentjs.com/guides/#/warnings/define-locale/ for more info."),i=Yr[t]._config;else if(null!=e.parentLocale){if(null==Yr[e.parentLocale])return Lr[e.parentLocale]||(Lr[e.parentLocale]=[]),Lr[e.parentLocale].push({name:t,config:e}),null;i=Yr[e.parentLocale]._config}return Yr[t]=new k(T(i,e)),Lr[t]&&Lr[t].forEach(function(t){te(t.name,t.config)}),Kt(t),Yr[t]}return delete Yr[t],null}function ee(t,e){if(null!=e){var i,n,r=Gr;null!=(n=Jt(t))&&(r=n._config),(i=new k(e=T(r,e))).parentLocale=Yr[t],Yr[t]=i,Kt(t)}else null!=Yr[t]&&(null!=Yr[t].parentLocale?Yr[t]=Yr[t].parentLocale:null!=Yr[t]&&delete Yr[t]);return Yr[t]}function ie(t){var e;if(t&&t._locale&&t._locale._abbr&&(t=t._locale._abbr),!t)return zr;if(!i(t)){if(e=Jt(t))return e;t=[t]}return Qt(t)}function ne(){return Rn(Yr)}function re(t){var e,i=t._a;return i&&-2===p(t).overflow&&(e=i[cr]<0||i[cr]>11?cr:i[ur]<1||i[ur]>lt(i[hr],i[cr])?ur:i[pr]<0||i[pr]>24||24===i[pr]&&(0!==i[fr]||0!==i[gr]||0!==i[mr])?pr:i[fr]<0||i[fr]>59?fr:i[gr]<0||i[gr]>59?gr:i[mr]<0||i[mr]>999?mr:-1,p(t)._overflowDayOfYear&&(e<hr||e>ur)&&(e=ur),p(t)._overflowWeeks&&-1===e&&(e=_r),p(t)._overflowWeekday&&-1===e&&(e=vr),p(t).overflow=e),t}function se(t,e,i){return null!=t?t:null!=e?e:i}function oe(e){var i=new Date(t.now());return e._useUTC?[i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate()]:[i.getFullYear(),i.getMonth(),i.getDate()]}function ae(t){var e,i,n,r,s,o=[];if(!t._d){for(n=oe(t),t._w&&null==t._a[ur]&&null==t._a[cr]&&le(t),null!=t._dayOfYear&&(s=se(t._a[hr],n[hr]),(t._dayOfYear>K(s)||0===t._dayOfYear)&&(p(t)._overflowDayOfYear=!0),i=wt(s,0,t._dayOfYear),t._a[cr]=i.getUTCMonth(),t._a[ur]=i.getUTCDate()),e=0;e<3&&null==t._a[e];++e)t._a[e]=o[e]=n[e];for(;e<7;e++)t._a[e]=o[e]=null==t._a[e]?2===e?1:0:t._a[e];24===t._a[pr]&&0===t._a[fr]&&0===t._a[gr]&&0===t._a[mr]&&(t._nextDay=!0,t._a[pr]=0),t._d=(t._useUTC?wt:yt).apply(null,o),r=t._useUTC?t._d.getUTCDay():t._d.getDay(),null!=t._tzm&&t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),t._nextDay&&(t._a[pr]=24),t._w&&"undefined"!=typeof t._w.d&&t._w.d!==r&&(p(t).weekdayMismatch=!0)}}function le(t){var e,i,n,r,s,o,a,l;if(null!=(e=t._w).GG||null!=e.W||null!=e.E)s=1,o=4,i=se(e.GG,t._a[hr],Ct(De(),1,4).year),n=se(e.W,1),((r=se(e.E,1))<1||r>7)&&(l=!0);else{s=t._locale._week.dow,o=t._locale._week.doy;var d=Ct(De(),s,o);i=se(e.gg,t._a[hr],d.year),n=se(e.w,d.week),null!=e.d?((r=e.d)<0||r>6)&&(l=!0):null!=e.e?(r=e.e+s,(e.e<0||e.e>6)&&(l=!0)):r=s}n<1||n>xt(i,s,o)?p(t)._overflowWeeks=!0:null!=l?p(t)._overflowWeekday=!0:(a=St(i,n,r,s,o),t._a[hr]=a.year,t._dayOfYear=a.dayOfYear)}function de(t){var e,i,n,r,s,o,a=t._i,l=Pr.exec(a)||Or.exec(a);if(l){for(p(t).iso=!0,e=0,i=Wr.length;e<i;e++)if(Wr[e][1].exec(l[1])){r=Wr[e][0],n=!1!==Wr[e][2];break}if(null==r)return void(t._isValid=!1);if(l[3]){for(e=0,i=Nr.length;e<i;e++)if(Nr[e][1].exec(l[3])){s=(l[2]||" ")+Nr[e][0];break}if(null==s)return void(t._isValid=!1)}if(!n&&null!=s)return void(t._isValid=!1);if(l[4]){if(!Ar.exec(l[4]))return void(t._isValid=!1);o="Z"}t._f=r+(s||"")+(o||""),_e(t)}else t._isValid=!1}function he(t,e,i,n,r,s){var o=[ce(t),Cr.indexOf(e),parseInt(i,10),parseInt(n,10),parseInt(r,10)];return s&&o.push(parseInt(s,10)),o}function ce(t){var e=parseInt(t,10);return e<=49?2e3+e:e<=999?1900+e:e}function ue(t){return t.replace(/\([^)]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}function pe(t,e,i){if(t&&kr.indexOf(t)!==new Date(e[0],e[1],e[2]).getDay())return p(i).weekdayMismatch=!0,i._isValid=!1,!1;return!0}function fe(t,e,i){if(t)return jr[t];if(e)return 0;var n=parseInt(i,10),r=n%100;return 60*((n-r)/100)+r}function ge(t){var e=Br.exec(ue(t._i));if(e){var i=he(e[4],e[3],e[2],e[5],e[6],e[7]);if(!pe(e[1],i,t))return;t._a=i,t._tzm=fe(e[8],e[9],e[10]),t._d=wt.apply(null,t._a),t._d.setUTCMinutes(t._d.getUTCMinutes()-t._tzm),p(t).rfc2822=!0}else t._isValid=!1}function me(e){var i=Vr.exec(e._i);null===i?(de(e),!1===e._isValid&&(delete e._isValid,ge(e),!1===e._isValid&&(delete e._isValid,t.createFromInputFallback(e)))):e._d=new Date(+i[1])}function _e(e){if(e._f!==t.ISO_8601)if(e._f!==t.RFC_2822){e._a=[],p(e).empty=!0;var i,n,r,s,o,a=""+e._i,l=a.length,d=0;for(r=B(e._f,e._locale).match(An)||[],i=0;i<r.length;i++)s=r[i],(n=(a.match(U(s,e))||[])[0])&&((o=a.substr(0,a.indexOf(n))).length>0&&p(e).unusedInput.push(o),a=a.slice(a.indexOf(n)+n.length),d+=n.length),Vn[s]?(n?p(e).empty=!1:p(e).unusedTokens.push(s),J(s,n,e)):e._strict&&!n&&p(e).unusedTokens.push(s);p(e).charsLeftOver=l-d,a.length>0&&p(e).unusedInput.push(a),e._a[pr]<=12&&!0===p(e).bigHour&&e._a[pr]>0&&(p(e).bigHour=undefined),p(e).parsedDateParts=e._a.slice(0),p(e).meridiem=e._meridiem,e._a[pr]=ve(e._locale,e._a[pr],e._meridiem),ae(e),re(e)}else ge(e);else de(e)}function ve(t,e,i){var n;return null==i?e:null!=t.meridiemHour?t.meridiemHour(e,i):null!=t.isPM?((n=t.isPM(i))&&e<12&&(e+=12),n||12!==e||(e=0),e):e}function ye(t){var e,i,n,r,s;if(0===t._f.length)return p(t).invalidFormat=!0,void(t._d=new Date(NaN));for(r=0;r<t._f.length;r++)s=0,e=m({},t),null!=t._useUTC&&(e._useUTC=t._useUTC),e._f=t._f[r],_e(e),f(e)&&(s+=p(e).charsLeftOver,s+=10*p(e).unusedTokens.length,p(e).score=s,(null==n||s<n)&&(n=s,i=e));h(t,i||e)}function we(t){if(!t._d){var e=Y(t._i);t._a=l([e.year,e.month,e.day||e.date,e.hour,e.minute,e.second,e.millisecond],function(t){return t&&parseInt(t,10)}),ae(t)}}function be(t){var e=new _(re(Se(t)));return e._nextDay&&(e.add(1,"d"),e._nextDay=undefined),e}function Se(t){var e=t._i,n=t._f;return t._locale=t._locale||ie(t._l),null===e||n===undefined&&""===e?g({nullInput:!0}):("string"==typeof e&&(t._i=e=t._locale.preparse(e)),v(e)?new _(re(e)):(a(e)?t._d=e:i(n)?ye(t):n?_e(t):Ce(t),f(t)||(t._d=null),t))}function Ce(e){var r=e._i;s(r)?e._d=new Date(t.now()):a(r)?e._d=new Date(r.valueOf()):"string"==typeof r?me(e):i(r)?(e._a=l(r.slice(0),function(t){return parseInt(t,10)}),ae(e)):n(r)?we(e):o(r)?e._d=new Date(r):t.createFromInputFallback(e)}function xe(t,e,s,o,a){var l={};return!0!==s&&!1!==s||(o=s,s=undefined),(n(t)&&r(t)||i(t)&&0===t.length)&&(t=undefined),l._isAMomentObject=!0,l._useUTC=l._isUTC=a,l._l=s,l._i=t,l._f=e,l._strict=o,be(l)}function De(t,e,i,n){return xe(t,e,i,n,!1)}function Ee(t,e){var n,r;if(1===e.length&&i(e[0])&&(e=e[0]),!e.length)return De();for(n=e[0],r=1;r<e.length;++r)e[r].isValid()&&!e[r][t](n)||(n=e[r]);return n}function Te(){return Ee("isBefore",[].slice.call(arguments,0))}function ke(){return Ee("isAfter",[].slice.call(arguments,0))}function Re(t){for(var e in t)if(-1===yr.call(Xr,e)||null!=t[e]&&isNaN(t[e]))return!1;for(var i=!1,n=0;n<Xr.length;++n)if(t[Xr[n]]){if(i)return!1;parseFloat(t[Xr[n]])!==w(t[Xr[n]])&&(i=!0)}return!0}function $e(){return this._isValid}function He(){return Xe(NaN)}function Me(t){var e=Y(t),i=e.year||0,n=e.quarter||0,r=e.month||0,s=e.week||0,o=e.day||0,a=e.hour||0,l=e.minute||0,d=e.second||0,h=e.millisecond||0;this._isValid=Re(e),this._milliseconds=+h+1e3*d+6e4*l+1e3*a*60*60,this._days=+o+7*s,this._months=+r+3*n+12*i,this._data={},this._locale=ie(),this._bubble()}function ze(t){return t instanceof Me}function Ie(t){return t<0?-1*Math.round(-1*t):Math.round(t)}function Fe(t,e){A(t,0,0,function(){var t=this.utcOffset(),i="+";return t<0&&(t=-t,i="-"),i+O(~~(t/60),2)+e+O(~~t%60,2)})}function Ge(t,e){var i=(e||"").match(t);if(null===i)return null;var n=((i[i.length-1]||[])+"").match(Qr)||["-",0,0],r=60*n[1]+w(n[2]);return 0===r?0:"+"===n[0]?r:-r}function Ye(e,i){var n,r;return i._isUTC?(n=i.clone(),r=(v(e)||a(e)?e.valueOf():De(e).valueOf())-n.valueOf(),n._d.setTime(n._d.valueOf()+r),t.updateOffset(n,!1),n):De(e).local()}function Le(t){return 15*-Math.round(t._d.getTimezoneOffset()/15)}function Pe(e,i,n){var r,s=this._offset||0;if(!this.isValid())return null!=e?this:NaN;if(null!=e){if("string"==typeof e){if(null===(e=Ge(sr,e)))return this}else Math.abs(e)<16&&!n&&(e*=60);return!this._isUTC&&i&&(r=Le(this)),this._offset=e,this._isUTC=!0,null!=r&&this.add(r,"m"),s!==e&&(!i||this._changeInProgress?ei(this,Xe(e-s,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,t.updateOffset(this,!0),this._changeInProgress=null)),this}return this._isUTC?s:Le(this)}function Oe(t,e){return null!=t?("string"!=typeof t&&(t=-t),this.utcOffset(t,e),this):-this.utcOffset()}function Ae(t){return this.utcOffset(0,t)}function We(t){return this._isUTC&&(this.utcOffset(0,t),this._isUTC=!1,t&&this.subtract(Le(this),"m")),this}function Ne(){if(null!=this._tzm)this.utcOffset(this._tzm,!1,!0);else if("string"==typeof this._i){var t=Ge(rr,this._i);null!=t?this.utcOffset(t):this.utcOffset(0,!0)}return this}function Ve(t){return!!this.isValid()&&(t=t?De(t).utcOffset():0,(this.utcOffset()-t)%60==0)}function Be(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()}function je(){if(!s(this._isDSTShifted))return this._isDSTShifted;var t={};if(m(t,this),(t=Se(t))._a){var e=t._isUTC?c(t._a):De(t._a);this._isDSTShifted=this.isValid()&&b(t._a,e.toArray())>0}else this._isDSTShifted=!1;return this._isDSTShifted}function Ue(){return!!this.isValid()&&!this._isUTC}function qe(){return!!this.isValid()&&this._isUTC}function Ze(){return!!this.isValid()&&(this._isUTC&&0===this._offset)}function Xe(t,e){var i,n,r,s=t,a=null;return ze(t)?s={ms:t._milliseconds,d:t._days,M:t._months}:o(t)?(s={},e?s[e]=t:s.milliseconds=t):(a=Jr.exec(t))?(i="-"===a[1]?-1:1,s={y:0,d:w(a[ur])*i,h:w(a[pr])*i,m:w(a[fr])*i,s:w(a[gr])*i,ms:w(Ie(1e3*a[mr]))*i}):(a=Kr.exec(t))?(i="-"===a[1]?-1:(a[1],1),s={y:Qe(a[2],i),M:Qe(a[3],i),w:Qe(a[4],i),d:Qe(a[5],i),h:Qe(a[6],i),m:Qe(a[7],i),
s:Qe(a[8],i)}):null==s?s={}:"object"==typeof s&&("from"in s||"to"in s)&&(r=Ke(De(s.from),De(s.to)),(s={}).ms=r.milliseconds,s.M=r.months),n=new Me(s),ze(t)&&d(t,"_locale")&&(n._locale=t._locale),n}function Qe(t,e){var i=t&&parseFloat(t.replace(",","."));return(isNaN(i)?0:i)*e}function Je(t,e){var i={milliseconds:0,months:0};return i.months=e.month()-t.month()+12*(e.year()-t.year()),t.clone().add(i.months,"M").isAfter(e)&&--i.months,i.milliseconds=+e-+t.clone().add(i.months,"M"),i}function Ke(t,e){var i;return t.isValid()&&e.isValid()?(e=Ye(e,t),t.isBefore(e)?i=Je(t,e):((i=Je(e,t)).milliseconds=-i.milliseconds,i.months=-i.months),i):{milliseconds:0,months:0}}function ti(t,e){return function(i,n){var r;return null===n||isNaN(+n)||(x(e,"moment()."+e+"(period, number) is deprecated. Please use moment()."+e+"(number, period). See http://momentjs.com/guides/#/warnings/add-inverted-param/ for more info."),r=i,i=n,n=r),ei(this,Xe(i="string"==typeof i?+i:i,n),t),this}}function ei(e,i,n,r){var s=i._milliseconds,o=Ie(i._days),a=Ie(i._months);e.isValid()&&(r=null==r||r,a&&pt(e,nt(e,"Month")+a*n),o&&rt(e,"Date",nt(e,"Date")+o*n),s&&e._d.setTime(e._d.valueOf()+s*n),r&&t.updateOffset(e,o||a))}function ii(t,e){var i=t.diff(e,"days",!0);return i<-6?"sameElse":i<-1?"lastWeek":i<0?"lastDay":i<1?"sameDay":i<2?"nextDay":i<7?"nextWeek":"sameElse"}function ni(e,i){var n=e||De(),r=Ye(n,this).startOf("day"),s=t.calendarFormat(this,r)||"sameElse",o=i&&(D(i[s])?i[s].call(this,n):i[s]);return this.format(o||this.localeData().calendar(s,this,De(n)))}function ri(){return new _(this)}function si(t,e){var i=v(t)?t:De(t);return!(!this.isValid()||!i.isValid())&&("millisecond"===(e=G(s(e)?"millisecond":e))?this.valueOf()>i.valueOf():i.valueOf()<this.clone().startOf(e).valueOf())}function oi(t,e){var i=v(t)?t:De(t);return!(!this.isValid()||!i.isValid())&&("millisecond"===(e=G(s(e)?"millisecond":e))?this.valueOf()<i.valueOf():this.clone().endOf(e).valueOf()<i.valueOf())}function ai(t,e,i,n){return("("===(n=n||"()")[0]?this.isAfter(t,i):!this.isBefore(t,i))&&(")"===n[1]?this.isBefore(e,i):!this.isAfter(e,i))}function li(t,e){var i,n=v(t)?t:De(t);return!(!this.isValid()||!n.isValid())&&("millisecond"===(e=G(e||"millisecond"))?this.valueOf()===n.valueOf():(i=n.valueOf(),this.clone().startOf(e).valueOf()<=i&&i<=this.clone().endOf(e).valueOf()))}function di(t,e){return this.isSame(t,e)||this.isAfter(t,e)}function hi(t,e){return this.isSame(t,e)||this.isBefore(t,e)}function ci(t,e,i){var n,r,s;if(!this.isValid())return NaN;if(!(n=Ye(t,this)).isValid())return NaN;switch(r=6e4*(n.utcOffset()-this.utcOffset()),e=G(e)){case"year":s=ui(this,n)/12;break;case"month":s=ui(this,n);break;case"quarter":s=ui(this,n)/3;break;case"second":s=(this-n)/1e3;break;case"minute":s=(this-n)/6e4;break;case"hour":s=(this-n)/36e5;break;case"day":s=(this-n-r)/864e5;break;case"week":s=(this-n-r)/6048e5;break;default:s=this-n}return i?s:y(s)}function ui(t,e){var i=12*(e.year()-t.year())+(e.month()-t.month()),n=t.clone().add(i,"months");return-(i+(e-n<0?(e-n)/(n-t.clone().add(i-1,"months")):(e-n)/(t.clone().add(i+1,"months")-n)))||0}function pi(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")}function fi(t){if(!this.isValid())return null;var e=!0!==t,i=e?this.clone().utc():this;return i.year()<0||i.year()>9999?V(i,e?"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYYYY-MM-DD[T]HH:mm:ss.SSSZ"):D(Date.prototype.toISOString)?e?this.toDate().toISOString():new Date(this._d.valueOf()).toISOString().replace("Z",V(i,"Z")):V(i,e?"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]":"YYYY-MM-DD[T]HH:mm:ss.SSSZ")}function gi(){if(!this.isValid())return"moment.invalid(/* "+this._i+" */)";var t="moment",e="";this.isLocal()||(t=0===this.utcOffset()?"moment.utc":"moment.parseZone",e="Z");var i="["+t+'("]',n=0<=this.year()&&this.year()<=9999?"YYYY":"YYYYYY",r="-MM-DD[T]HH:mm:ss.SSS",s=e+'[")]';return this.format(i+n+r+s)}function mi(e){e||(e=this.isUtc()?t.defaultFormatUtc:t.defaultFormat);var i=V(this,e);return this.localeData().postformat(i)}function _i(t,e){return this.isValid()&&(v(t)&&t.isValid()||De(t).isValid())?Xe({to:this,from:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function vi(t){return this.from(De(),t)}function yi(t,e){return this.isValid()&&(v(t)&&t.isValid()||De(t).isValid())?Xe({from:this,to:t}).locale(this.locale()).humanize(!e):this.localeData().invalidDate()}function wi(t){return this.to(De(),t)}function bi(t){var e;return t===undefined?this._locale._abbr:(null!=(e=ie(t))&&(this._locale=e),this)}function Si(){return this._locale}function Ci(t){switch(t=G(t)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":case"date":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===t&&this.weekday(0),"isoWeek"===t&&this.isoWeekday(1),"quarter"===t&&this.month(3*Math.floor(this.month()/3)),this}function xi(t){return(t=G(t))===undefined||"millisecond"===t?this:("date"===t&&(t="day"),this.startOf(t).add(1,"isoWeek"===t?"week":t).subtract(1,"ms"))}function Di(){return this._d.valueOf()-6e4*(this._offset||0)}function Ei(){return Math.floor(this.valueOf()/1e3)}function Ti(){return new Date(this.valueOf())}function ki(){var t=this;return[t.year(),t.month(),t.date(),t.hour(),t.minute(),t.second(),t.millisecond()]}function Ri(){var t=this;return{years:t.year(),months:t.month(),date:t.date(),hours:t.hours(),minutes:t.minutes(),seconds:t.seconds(),milliseconds:t.milliseconds()}}function $i(){return this.isValid()?this.toISOString():null}function Hi(){return f(this)}function Mi(){return h({},p(this))}function zi(){return p(this).overflow}function Ii(){return{input:this._i,format:this._f,locale:this._locale,isUTC:this._isUTC,strict:this._strict}}function Fi(t,e){A(0,[t,t.length],0,e)}function Gi(t){return Oi.call(this,t,this.week(),this.weekday(),this.localeData()._week.dow,this.localeData()._week.doy)}function Yi(t){return Oi.call(this,t,this.isoWeek(),this.isoWeekday(),1,4)}function Li(){return xt(this.year(),1,4)}function Pi(){var t=this.localeData()._week;return xt(this.year(),t.dow,t.doy)}function Oi(t,e,i,n,r){var s;return null==t?Ct(this,n,r).year:(e>(s=xt(t,n,r))&&(e=s),Ai.call(this,t,e,i,n,r))}function Ai(t,e,i,n,r){var s=St(t,e,i,n,r),o=wt(s.year,0,s.dayOfYear);return this.year(o.getUTCFullYear()),this.month(o.getUTCMonth()),this.date(o.getUTCDate()),this}function Wi(t){return null==t?Math.ceil((this.month()+1)/3):this.month(3*(t-1)+this.month()%3)}function Ni(t){var e=Math.round((this.clone().startOf("day")-this.clone().startOf("year"))/864e5)+1;return null==t?e:this.add(t-e,"d")}function Vi(t,e){e[mr]=w(1e3*("0."+t))}function Bi(){return this._isUTC?"UTC":""}function ji(){return this._isUTC?"Coordinated Universal Time":""}function Ui(t){return De(1e3*t)}function qi(){return De.apply(null,arguments).parseZone()}function Zi(t){return t}function Xi(t,e,i,n){var r=ie(),s=c().set(n,e);return r[i](s,t)}function Qi(t,e,i){if(o(t)&&(e=t,t=undefined),t=t||"",null!=e)return Xi(t,e,i,"month");var n,r=[];for(n=0;n<12;n++)r[n]=Xi(t,n,i,"month");return r}function Ji(t,e,i,n){"boolean"==typeof t?(o(e)&&(i=e,e=undefined),e=e||""):(i=e=t,t=!1,o(e)&&(i=e,e=undefined),e=e||"");var r,s=ie(),a=t?s._week.dow:0;if(null!=i)return Xi(e,(i+a)%7,n,"day");var l=[];for(r=0;r<7;r++)l[r]=Xi(e,(r+a)%7,n,"day");return l}function Ki(t,e){return Qi(t,e,"months")}function tn(t,e){return Qi(t,e,"monthsShort")}function en(t,e,i){return Ji(t,e,i,"weekdays")}function nn(t,e,i){return Ji(t,e,i,"weekdaysShort")}function rn(t,e,i){return Ji(t,e,i,"weekdaysMin")}function sn(){var t=this._data;return this._milliseconds=hs(this._milliseconds),this._days=hs(this._days),this._months=hs(this._months),t.milliseconds=hs(t.milliseconds),t.seconds=hs(t.seconds),t.minutes=hs(t.minutes),t.hours=hs(t.hours),t.months=hs(t.months),t.years=hs(t.years),this}function on(t,e,i,n){var r=Xe(e,i);return t._milliseconds+=n*r._milliseconds,t._days+=n*r._days,t._months+=n*r._months,t._bubble()}function an(t,e){return on(this,t,e,1)}function ln(t,e){return on(this,t,e,-1)}function dn(t){return t<0?Math.floor(t):Math.ceil(t)}function hn(){var t,e,i,n,r,s=this._milliseconds,o=this._days,a=this._months,l=this._data;return s>=0&&o>=0&&a>=0||s<=0&&o<=0&&a<=0||(s+=864e5*dn(un(a)+o),o=0,a=0),l.milliseconds=s%1e3,t=y(s/1e3),l.seconds=t%60,e=y(t/60),l.minutes=e%60,i=y(e/60),l.hours=i%24,a+=r=y(cn(o+=y(i/24))),o-=dn(un(r)),n=y(a/12),a%=12,l.days=o,l.months=a,l.years=n,this}function cn(t){return 4800*t/146097}function un(t){return 146097*t/4800}function pn(t){if(!this.isValid())return NaN;var e,i,n=this._milliseconds;if("month"===(t=G(t))||"year"===t)return e=this._days+n/864e5,i=this._months+cn(e),"month"===t?i:i/12;switch(e=this._days+Math.round(un(this._months)),t){case"week":return e/7+n/6048e5;case"day":return e+n/864e5;case"hour":return 24*e+n/36e5;case"minute":return 1440*e+n/6e4;case"second":return 86400*e+n/1e3;case"millisecond":return Math.floor(864e5*e)+n;default:throw new Error("Unknown unit "+t)}}function fn(){return this.isValid()?this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*w(this._months/12):NaN}function gn(t){return function(){return this.as(t)}}function mn(){return Xe(this)}function _n(t){return t=G(t),this.isValid()?this[t+"s"]():NaN}function vn(t){return function(){return this.isValid()?this._data[t]:NaN}}function yn(){return y(this.days()/7)}function wn(t,e,i,n,r){return r.relativeTime(e||1,!!i,t,n)}function bn(t,e,i){var n=Xe(t).abs(),r=Es(n.as("s")),s=Es(n.as("m")),o=Es(n.as("h")),a=Es(n.as("d")),l=Es(n.as("M")),d=Es(n.as("y")),h=r<=Ts.ss&&["s",r]||r<Ts.s&&["ss",r]||s<=1&&["m"]||s<Ts.m&&["mm",s]||o<=1&&["h"]||o<Ts.h&&["hh",o]||a<=1&&["d"]||a<Ts.d&&["dd",a]||l<=1&&["M"]||l<Ts.M&&["MM",l]||d<=1&&["y"]||["yy",d];return h[2]=e,h[3]=+t>0,h[4]=i,wn.apply(null,h)}function Sn(t){return t===undefined?Es:"function"==typeof t&&(Es=t,!0)}function Cn(t,e){return Ts[t]!==undefined&&(e===undefined?Ts[t]:(Ts[t]=e,"s"===t&&(Ts.ss=e-1),!0))}function xn(t){if(!this.isValid())return this.localeData().invalidDate();var e=this.localeData(),i=bn(this,!t,e);return t&&(i=e.pastFuture(+this,i)),e.postformat(i)}function Dn(t){return(t>0)-(t<0)||+t}function En(){if(!this.isValid())return this.localeData().invalidDate();var t,e,i=ks(this._milliseconds)/1e3,n=ks(this._days),r=ks(this._months);e=y((t=y(i/60))/60),i%=60,t%=60;var s=y(r/12),o=r%=12,a=n,l=e,d=t,h=i?i.toFixed(3).replace(/\.?0+$/,""):"",c=this.asSeconds();if(!c)return"P0D";var u=c<0?"-":"",p=Dn(this._months)!==Dn(c)?"-":"",f=Dn(this._days)!==Dn(c)?"-":"",g=Dn(this._milliseconds)!==Dn(c)?"-":"";return u+"P"+(s?p+s+"Y":"")+(o?p+o+"M":"")+(a?f+a+"D":"")+(l||d||h?"T":"")+(l?g+l+"H":"")+(d?g+d+"M":"")+(h?g+h+"S":"")}var Tn,kn;kn=Array.prototype.some?Array.prototype.some:function(t){for(var e=Object(this),i=e.length>>>0,n=0;n<i;n++)if(n in e&&t.call(this,e[n],n,e))return!0;return!1};var Rn,$n=t.momentProperties=[],Hn=!1,Mn={};t.suppressDeprecationWarnings=!1,t.deprecationHandler=null,Rn=Object.keys?Object.keys:function(t){var e,i=[];for(e in t)d(t,e)&&i.push(e);return i};var zn={sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},In={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},Fn="Invalid date",Gn="%d",Yn=/\d{1,2}/,Ln={future:"in %s",past:"%s ago",s:"a few seconds",ss:"%d seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},Pn={},On={},An=/(\[[^\[]*\])|(\\)?([Hh]mm(ss)?|Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Qo?|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|kk?|mm?|ss?|S{1,9}|x|X|zz?|ZZ?|.)/g,Wn=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,Nn={},Vn={},Bn=/\d/,jn=/\d\d/,Un=/\d{3}/,qn=/\d{4}/,Zn=/[+-]?\d{6}/,Xn=/\d\d?/,Qn=/\d\d\d\d?/,Jn=/\d\d\d\d\d\d?/,Kn=/\d{1,3}/,tr=/\d{1,4}/,er=/[+-]?\d{1,6}/,ir=/\d+/,nr=/[+-]?\d+/,rr=/Z|[+-]\d\d:?\d\d/gi,sr=/Z|[+-]\d\d(?::?\d\d)?/gi,or=/[+-]?\d+(\.\d{1,3})?/,ar=/[0-9]{0,256}['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFF07\uFF10-\uFFEF]{1,256}|[\u0600-\u06FF\/]{1,256}(\s*?[\u0600-\u06FF]{1,256}){1,2}/i,lr={},dr={},hr=0,cr=1,ur=2,pr=3,fr=4,gr=5,mr=6,_r=7,vr=8;A("Y",0,0,function(){var t=this.year();return t<=9999?""+t:"+"+t}),A(0,["YY",2],0,function(){return this.year()%100}),A(0,["YYYY",4],0,"year"),A(0,["YYYYY",5],0,"year"),A(0,["YYYYYY",6,!0],0,"year"),F("year","y"),L("year",1),j("Y",nr),j("YY",Xn,jn),j("YYYY",tr,qn),j("YYYYY",er,Zn),j("YYYYYY",er,Zn),X(["YYYYY","YYYYYY"],hr),X("YYYY",function(e,i){i[hr]=2===e.length?t.parseTwoDigitYear(e):w(e)}),X("YY",function(e,i){i[hr]=t.parseTwoDigitYear(e)}),X("Y",function(t,e){e[hr]=parseInt(t,10)}),t.parseTwoDigitYear=function(t){return w(t)+(w(t)>68?1900:2e3)};var yr,wr=it("FullYear",!0);yr=Array.prototype.indexOf?Array.prototype.indexOf:function(t){var e;for(e=0;e<this.length;++e)if(this[e]===t)return e;return-1},A("M",["MM",2],"Mo",function(){return this.month()+1}),A("MMM",0,0,function(t){return this.localeData().monthsShort(this,t)}),A("MMMM",0,0,function(t){return this.localeData().months(this,t)}),F("month","M"),L("month",8),j("M",Xn),j("MM",Xn,jn),j("MMM",function(t,e){return e.monthsShortRegex(t)}),j("MMMM",function(t,e){return e.monthsRegex(t)}),X(["M","MM"],function(t,e){e[cr]=w(t)-1}),X(["MMM","MMMM"],function(t,e,i,n){var r=i._locale.monthsParse(t,n,i._strict);null!=r?e[cr]=r:p(i).invalidMonth=t});var br=/D[oD]?(\[[^\[\]]*\]|\s)+MMMM?/,Sr="January_February_March_April_May_June_July_August_September_October_November_December".split("_"),Cr="Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),xr=ar,Dr=ar;A("w",["ww",2],"wo","week"),A("W",["WW",2],"Wo","isoWeek"),F("week","w"),F("isoWeek","W"),L("week",5),L("isoWeek",5),j("w",Xn),j("ww",Xn,jn),j("W",Xn),j("WW",Xn,jn),Q(["w","ww","W","WW"],function(t,e,i,n){e[n.substr(0,1)]=w(t)});var Er={dow:0,doy:6};A("d",0,"do","day"),A("dd",0,0,function(t){return this.localeData().weekdaysMin(this,t)}),A("ddd",0,0,function(t){return this.localeData().weekdaysShort(this,t)}),A("dddd",0,0,function(t){return this.localeData().weekdays(this,t)}),A("e",0,0,"weekday"),A("E",0,0,"isoWeekday"),F("day","d"),F("weekday","e"),F("isoWeekday","E"),L("day",11),L("weekday",11),L("isoWeekday",11),j("d",Xn),j("e",Xn),j("E",Xn),j("dd",function(t,e){return e.weekdaysMinRegex(t)}),j("ddd",function(t,e){return e.weekdaysShortRegex(t)}),j("dddd",function(t,e){return e.weekdaysRegex(t)}),Q(["dd","ddd","dddd"],function(t,e,i,n){var r=i._locale.weekdaysParse(t,n,i._strict);null!=r?e.d=r:p(i).invalidWeekday=t}),Q(["d","e","E"],function(t,e,i,n){e[n]=w(t)});var Tr="Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),kr="Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),Rr="Su_Mo_Tu_We_Th_Fr_Sa".split("_"),$r=ar,Hr=ar,Mr=ar;A("H",["HH",2],0,"hour"),A("h",["hh",2],0,Vt),A("k",["kk",2],0,Bt),A("hmm",0,0,function(){return""+Vt.apply(this)+O(this.minutes(),2)}),A("hmmss",0,0,function(){return""+Vt.apply(this)+O(this.minutes(),2)+O(this.seconds(),2)}),A("Hmm",0,0,function(){return""+this.hours()+O(this.minutes(),2)}),A("Hmmss",0,0,function(){return""+this.hours()+O(this.minutes(),2)+O(this.seconds(),2)}),jt("a",!0),jt("A",!1),F("hour","h"),L("hour",13),j("a",Ut),j("A",Ut),j("H",Xn),j("h",Xn),j("k",Xn),j("HH",Xn,jn),j("hh",Xn,jn),j("kk",Xn,jn),j("hmm",Qn),j("hmmss",Jn),j("Hmm",Qn),j("Hmmss",Jn),X(["H","HH"],pr),X(["k","kk"],function(t,e){var i=w(t);e[pr]=24===i?0:i}),X(["a","A"],function(t,e,i){i._isPm=i._locale.isPM(t),i._meridiem=t}),X(["h","hh"],function(t,e,i){e[pr]=w(t),p(i).bigHour=!0}),X("hmm",function(t,e,i){var n=t.length-2;e[pr]=w(t.substr(0,n)),e[fr]=w(t.substr(n)),p(i).bigHour=!0}),X("hmmss",function(t,e,i){var n=t.length-4,r=t.length-2;e[pr]=w(t.substr(0,n)),e[fr]=w(t.substr(n,2)),e[gr]=w(t.substr(r)),p(i).bigHour=!0}),X("Hmm",function(t,e){var i=t.length-2;e[pr]=w(t.substr(0,i)),e[fr]=w(t.substr(i))}),X("Hmmss",function(t,e){var i=t.length-4,n=t.length-2;e[pr]=w(t.substr(0,i)),e[fr]=w(t.substr(i,2)),e[gr]=w(t.substr(n))});var zr,Ir=/[ap]\.?m?\.?/i,Fr=it("Hours",!0),Gr={calendar:zn,longDateFormat:In,invalidDate:Fn,ordinal:Gn,dayOfMonthOrdinalParse:Yn,relativeTime:Ln,months:Sr,monthsShort:Cr,week:Er,weekdays:Tr,weekdaysMin:Rr,weekdaysShort:kr,meridiemParse:Ir},Yr={},Lr={},Pr=/^\s*((?:[+-]\d{6}|\d{4})-(?:\d\d-\d\d|W\d\d-\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?::\d\d(?::\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Or=/^\s*((?:[+-]\d{6}|\d{4})(?:\d\d\d\d|W\d\d\d|W\d\d|\d\d\d|\d\d))(?:(T| )(\d\d(?:\d\d(?:\d\d(?:[.,]\d+)?)?)?)([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,Ar=/Z|[+-]\d\d(?::?\d\d)?/,Wr=[["YYYYYY-MM-DD",/[+-]\d{6}-\d\d-\d\d/],["YYYY-MM-DD",/\d{4}-\d\d-\d\d/],["GGGG-[W]WW-E",/\d{4}-W\d\d-\d/],["GGGG-[W]WW",/\d{4}-W\d\d/,!1],["YYYY-DDD",/\d{4}-\d{3}/],["YYYY-MM",/\d{4}-\d\d/,!1],["YYYYYYMMDD",/[+-]\d{10}/],["YYYYMMDD",/\d{8}/],["GGGG[W]WWE",/\d{4}W\d{3}/],["GGGG[W]WW",/\d{4}W\d{2}/,!1],["YYYYDDD",/\d{7}/]],Nr=[["HH:mm:ss.SSSS",/\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss,SSSS",/\d\d:\d\d:\d\d,\d+/],["HH:mm:ss",/\d\d:\d\d:\d\d/],["HH:mm",/\d\d:\d\d/],["HHmmss.SSSS",/\d\d\d\d\d\d\.\d+/],["HHmmss,SSSS",/\d\d\d\d\d\d,\d+/],["HHmmss",/\d\d\d\d\d\d/],["HHmm",/\d\d\d\d/],["HH",/\d\d/]],Vr=/^\/?Date\((\-?\d+)/i,Br=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),?\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|([+-]\d{4}))$/,jr={UT:0,GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};t.createFromInputFallback=C("value provided is not in a recognized RFC2822 or ISO format. moment construction falls back to js Date(), which is not reliable across all browsers and versions. Non RFC2822/ISO date formats are discouraged and will be removed in an upcoming major release. Please refer to http://momentjs.com/guides/#/warnings/js-date/ for more info.",function(t){t._d=new Date(t._i+(t._useUTC?" UTC":""))}),t.ISO_8601=function(){},t.RFC_2822=function(){};var Ur=C("moment().min is deprecated, use moment.max instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=De.apply(null,arguments);return this.isValid()&&t.isValid()?t<this?this:t:g()}),qr=C("moment().max is deprecated, use moment.min instead. http://momentjs.com/guides/#/warnings/min-max/",function(){var t=De.apply(null,arguments);return this.isValid()&&t.isValid()?t>this?this:t:g()}),Zr=function(){return Date.now?Date.now():+new Date},Xr=["year","quarter","month","week","day","hour","minute","second","millisecond"];Fe("Z",":"),Fe("ZZ",""),j("Z",sr),j("ZZ",sr),X(["Z","ZZ"],function(t,e,i){i._useUTC=!0,i._tzm=Ge(sr,t)});var Qr=/([\+\-]|\d\d)/gi;t.updateOffset=function(){};var Jr=/^(\-|\+)?(?:(\d*)[. ])?(\d+)\:(\d+)(?:\:(\d+)(\.\d*)?)?$/,Kr=/^(-|\+)?P(?:([-+]?[0-9,.]*)Y)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)W)?(?:([-+]?[0-9,.]*)D)?(?:T(?:([-+]?[0-9,.]*)H)?(?:([-+]?[0-9,.]*)M)?(?:([-+]?[0-9,.]*)S)?)?$/;Xe.fn=Me.prototype,Xe.invalid=He;var ts=ti(1,"add"),es=ti(-1,"subtract");t.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",t.defaultFormatUtc="YYYY-MM-DDTHH:mm:ss[Z]";var is=C("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(t){return t===undefined?this.localeData():this.locale(t)});A(0,["gg",2],0,function(){return this.weekYear()%100}),A(0,["GG",2],0,function(){return this.isoWeekYear()%100}),Fi("gggg","weekYear"),Fi("ggggg","weekYear"),Fi("GGGG","isoWeekYear"),Fi("GGGGG","isoWeekYear"),F("weekYear","gg"),F("isoWeekYear","GG"),L("weekYear",1),L("isoWeekYear",1),j("G",nr),j("g",nr),j("GG",Xn,jn),j("gg",Xn,jn),j("GGGG",tr,qn),j("gggg",tr,qn),j("GGGGG",er,Zn),j("ggggg",er,Zn),Q(["gggg","ggggg","GGGG","GGGGG"],function(t,e,i,n){e[n.substr(0,2)]=w(t)}),Q(["gg","GG"],function(e,i,n,r){i[r]=t.parseTwoDigitYear(e)}),A("Q",0,"Qo","quarter"),F("quarter","Q"),L("quarter",7),j("Q",Bn),X("Q",function(t,e){e[cr]=3*(w(t)-1)}),A("D",["DD",2],"Do","date"),F("date","D"),L("date",9),j("D",Xn),j("DD",Xn,jn),j("Do",function(t,e){return t?e._dayOfMonthOrdinalParse||e._ordinalParse:e._dayOfMonthOrdinalParseLenient}),X(["D","DD"],ur),X("Do",function(t,e){e[ur]=w(t.match(Xn)[0])});var ns=it("Date",!0);A("DDD",["DDDD",3],"DDDo","dayOfYear"),F("dayOfYear","DDD"),L("dayOfYear",4),j("DDD",Kn),j("DDDD",Un),X(["DDD","DDDD"],function(t,e,i){i._dayOfYear=w(t)}),A("m",["mm",2],0,"minute"),F("minute","m"),L("minute",14),j("m",Xn),j("mm",Xn,jn),X(["m","mm"],fr);var rs=it("Minutes",!1);A("s",["ss",2],0,"second"),F("second","s"),L("second",15),j("s",Xn),j("ss",Xn,jn),X(["s","ss"],gr);var ss,os=it("Seconds",!1);for(A("S",0,0,function(){return~~(this.millisecond()/100)}),A(0,["SS",2],0,function(){return~~(this.millisecond()/10)}),A(0,["SSS",3],0,"millisecond"),A(0,["SSSS",4],0,function(){return 10*this.millisecond()}),A(0,["SSSSS",5],0,function(){return 100*this.millisecond()}),A(0,["SSSSSS",6],0,function(){return 1e3*this.millisecond()}),A(0,["SSSSSSS",7],0,function(){return 1e4*this.millisecond()}),A(0,["SSSSSSSS",8],0,function(){return 1e5*this.millisecond()}),A(0,["SSSSSSSSS",9],0,function(){return 1e6*this.millisecond()}),F("millisecond","ms"),L("millisecond",16),j("S",Kn,Bn),j("SS",Kn,jn),j("SSS",Kn,Un),ss="SSSS";ss.length<=9;ss+="S")j(ss,ir);for(ss="S";ss.length<=9;ss+="S")X(ss,Vi);var as=it("Milliseconds",!1);A("z",0,0,"zoneAbbr"),A("zz",0,0,"zoneName");var ls=_.prototype;ls.add=ts,ls.calendar=ni,ls.clone=ri,ls.diff=ci,ls.endOf=xi,ls.format=mi,ls.from=_i,ls.fromNow=vi,ls.to=yi,ls.toNow=wi,ls.get=st,ls.invalidAt=zi,ls.isAfter=si,ls.isBefore=oi,ls.isBetween=ai,ls.isSame=li,ls.isSameOrAfter=di,ls.isSameOrBefore=hi,ls.isValid=Hi,ls.lang=is,ls.locale=bi,ls.localeData=Si,ls.max=qr,ls.min=Ur,ls.parsingFlags=Mi,ls.set=ot,ls.startOf=Ci,ls.subtract=es,ls.toArray=ki,ls.toObject=Ri,ls.toDate=Ti,ls.toISOString=fi,ls.inspect=gi,ls.toJSON=$i,ls.toString=pi,ls.unix=Ei,ls.valueOf=Di,ls.creationData=Ii,ls.year=wr,ls.isLeapYear=et,ls.weekYear=Gi,ls.isoWeekYear=Yi,ls.quarter=ls.quarters=Wi,ls.month=ft,ls.daysInMonth=gt,ls.week=ls.weeks=kt,ls.isoWeek=ls.isoWeeks=Rt,ls.weeksInYear=Pi,ls.isoWeeksInYear=Li,ls.date=ns,ls.day=ls.days=Yt,ls.weekday=Lt,ls.isoWeekday=Pt,ls.dayOfYear=Ni,ls.hour=ls.hours=Fr,ls.minute=ls.minutes=rs,ls.second=ls.seconds=os,ls.millisecond=ls.milliseconds=as,ls.utcOffset=Pe,ls.utc=Ae,ls.local=We,ls.parseZone=Ne,ls.hasAlignedHourOffset=Ve,ls.isDST=Be,ls.isLocal=Ue,ls.isUtcOffset=qe,ls.isUtc=Ze,ls.isUTC=Ze,ls.zoneAbbr=Bi,ls.zoneName=ji,ls.dates=C("dates accessor is deprecated. Use date instead.",ns),ls.months=C("months accessor is deprecated. Use month instead",ft),ls.years=C("years accessor is deprecated. Use year instead",wr),ls.zone=C("moment().zone is deprecated, use moment().utcOffset instead. http://momentjs.com/guides/#/warnings/zone/",Oe),ls.isDSTShifted=C("isDSTShifted is deprecated. See http://momentjs.com/guides/#/warnings/dst-shifted/ for more information",je);var ds=k.prototype;ds.calendar=R,ds.longDateFormat=$,ds.invalidDate=H,ds.ordinal=M,ds.preparse=Zi,ds.postformat=Zi,ds.relativeTime=z,ds.pastFuture=I,ds.set=E,ds.months=dt,ds.monthsShort=ht,ds.monthsParse=ut,ds.monthsRegex=_t,ds.monthsShortRegex=mt,ds.week=Dt,ds.firstDayOfYear=Tt,ds.firstDayOfWeek=Et,ds.weekdays=Mt,ds.weekdaysMin=It,ds.weekdaysShort=zt,ds.weekdaysParse=Gt,ds.weekdaysRegex=Ot,ds.weekdaysShortRegex=At,ds.weekdaysMinRegex=Wt,ds.isPM=qt,ds.meridiem=Zt,Kt("en",{dayOfMonthOrdinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(t){var e=t%10;return t+(1===w(t%100/10)?"th":1===e?"st":2===e?"nd":3===e?"rd":"th")}}),t.lang=C("moment.lang is deprecated. Use moment.locale instead.",Kt),t.langData=C("moment.langData is deprecated. Use moment.localeData instead.",ie);var hs=Math.abs,cs=gn("ms"),us=gn("s"),ps=gn("m"),fs=gn("h"),gs=gn("d"),ms=gn("w"),_s=gn("M"),vs=gn("y"),ys=vn("milliseconds"),ws=vn("seconds"),bs=vn("minutes"),Ss=vn("hours"),Cs=vn("days"),xs=vn("months"),Ds=vn("years"),Es=Math.round,Ts={ss:44,s:45,m:45,h:22,d:26,M:11},ks=Math.abs,Rs=Me.prototype;return Rs.isValid=$e,Rs.abs=sn,Rs.add=an,Rs.subtract=ln,Rs.as=pn,Rs.asMilliseconds=cs,Rs.asSeconds=us,Rs.asMinutes=ps,Rs.asHours=fs,Rs.asDays=gs,Rs.asWeeks=ms,Rs.asMonths=_s,Rs.asYears=vs,Rs.valueOf=fn,Rs._bubble=hn,Rs.clone=mn,Rs.get=_n,Rs.milliseconds=ys,Rs.seconds=ws,Rs.minutes=bs,Rs.hours=Ss,Rs.days=Cs,Rs.weeks=yn,Rs.months=xs,Rs.years=Ds,Rs.humanize=xn,Rs.toISOString=En,Rs.toString=En,Rs.toJSON=En,Rs.locale=bi,Rs.localeData=Si,Rs.toIsoString=C("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",En),Rs.lang=is,A("X",0,0,"unix"),A("x",0,0,"valueOf"),j("x",nr),j("X",or),X("X",function(t,e,i){i._d=new Date(1e3*parseFloat(t,10))}),X("x",function(t,e,i){i._d=new Date(w(t))}),t.version="2.20.1",e(De),t.fn=ls,t.min=Te,t.max=ke,t.now=Zr,t.utc=c,t.unix=Ui,t.months=Ki,t.isDate=a,t.locale=Kt,t.invalid=g,t.duration=Xe,t.isMoment=v,t.weekdays=en,t.parseZone=qi,t.localeData=ie,t.isDuration=ze,t.monthsShort=tn,t.weekdaysMin=rn,t.defineLocale=te,t.updateLocale=ee,t.locales=ne,t.weekdaysShort=nn,t.normalizeUnits=G,t.relativeTimeRounding=Sn,t.relativeTimeThreshold=Cn,t.calendarFormat=ii,t.prototype=ls,t.HTML5_FMT={DATETIME_LOCAL:"YYYY-MM-DDTHH:mm",DATETIME_LOCAL_SECONDS:"YYYY-MM-DDTHH:mm:ss",DATETIME_LOCAL_MS:"YYYY-MM-DDTHH:mm:ss.SSS",DATE:"YYYY-MM-DD",TIME:"HH:mm",TIME_SECONDS:"HH:mm:ss",TIME_MS:"HH:mm:ss.SSS",WEEK:"YYYY-[W]WW",MONTH:"YYYY-MM"},t}),
/*!
 * FullCalendar v2.6.1
 * Docs & License: http://fullcalendar.io/
 * (c) 2015 Adam Shaw
 */
function(t){"function"==typeof define&&define.amd?define(["jquery","moment"],t):"object"==typeof exports?module.exports=t(require("jquery"),require("moment")):t(jQuery,moment)}(function(t,e){function i(t){return W(t,Nt)}function n(e){var i,n={views:e.views||{}};return t.each(e,function(e,r){"views"!=e&&(t.isPlainObject(r)&&!/(time|duration|interval)$/i.test(e)&&-1==t.inArray(e,Nt)?(i=null,t.each(r,function(t,r){/^(month|week|day|default|basic(Week|Day)?|agenda(Week|Day)?)$/.test(t)?(n.views[t]||(n.views[t]={}),n.views[t][e]=r):(i||(i={}),i[t]=r)}),i&&(n[e]=i)):n[e]=r)}),n}function r(t,e){e.left&&t.css({"border-left-width":1,"margin-left":e.left-1}),e.right&&t.css({"border-right-width":1,"margin-right":e.right-1})}function s(t){t.css({"margin-left":"","margin-right":"","border-left-width":"","border-right-width":""})}function o(){t("body").addClass("fc-not-allowed")}function a(){t("body").removeClass("fc-not-allowed")}function l(e,i,n){var r=Math.floor(i/e.length),s=Math.floor(i-r*(e.length-1)),o=[],a=[],l=[],h=0;d(e),e.each(function(i,n){var d=i===e.length-1?s:r,c=t(n).outerHeight(!0);c<d?(o.push(n),a.push(c),l.push(t(n).height())):h+=c}),n&&(i-=h,r=Math.floor(i/o.length),s=Math.floor(i-r*(o.length-1))),t(o).each(function(e,i){var n=e===o.length-1?s:r,d=a[e],h=n-(d-l[e]);d<n&&t(i).height(h)})}function d(t){t.height("")}function h(e){var i=0;return e.find("> span").each(function(e,n){var r=t(n).outerWidth();r>i&&(i=r)}),i++,e.width(i),i}function c(t,e){return t.height(e).addClass("fc-scroller"),t[0].scrollHeight-1>t[0].clientHeight||(u(t),!1)}function u(t){t.height("").removeClass("fc-scroller")}function p(e){var i=e.css("position"),n=e.parents().filter(function(){var e=t(this);return/(auto|scroll)/.test(e.css("overflow")+e.css("overflow-y")+e.css("overflow-x"))}).eq(0);return"fixed"!==i&&n.length?n:t(e[0].ownerDocument||document)}function f(t){var e=t.offset();return{left:e.left,right:e.left+t.outerWidth(),top:e.top,bottom:e.top+t.outerHeight()}}function g(t){var e=t.offset(),i=_(t),n=e.left+w(t,"border-left-width")+i.left,r=e.top+w(t,"border-top-width")+i.top;return{left:n,right:n+t[0].clientWidth,top:r,bottom:r+t[0].clientHeight}}function m(t){var e=t.offset(),i=e.left+w(t,"border-left-width")+w(t,"padding-left"),n=e.top+w(t,"border-top-width")+w(t,"padding-top");return{left:i,right:i+t.width(),top:n,bottom:n+t.height()}}function _(t){var e=t.innerWidth()-t[0].clientWidth,i={left:0,right:0,top:0,bottom:t.innerHeight()-t[0].clientHeight};return v()&&"rtl"==t.css("direction")?i.left=e:i.right=e,i}function v(){return null===Vt&&(Vt=y()),Vt}function y(){var e=t("<div><div/></div>").css({position:"absolute",top:-1e3,left:0,border:0,padding:0,overflow:"scroll",direction:"rtl"}).appendTo("body"),i=e.children().offset().left>e.offset().left;return e.remove(),i}function w(t,e){return parseFloat(t.css(e))||0}function b(t){return 1==t.which&&!t.ctrlKey}function S(t,e){var i={left:Math.max(t.left,e.left),right:Math.min(t.right,e.right),top:Math.max(t.top,e.top),bottom:Math.min(t.bottom,e.bottom)};return i.left<i.right&&i.top<i.bottom&&i}function C(t,e){return{left:Math.min(Math.max(t.left,e.left),e.right),top:Math.min(Math.max(t.top,e.top),e.bottom)}}function x(t){return{left:(t.left+t.right)/2,top:(t.top+t.bottom)/2}}function D(t,e){return{left:t.left-e.left,top:t.top-e.top}}function E(e){var i,n,r=[],s=[];for("string"==typeof e?s=e.split(/\s*,\s*/):"function"==typeof e?s=[e]:t.isArray(e)&&(s=e),i=0;i<s.length;i++)"string"==typeof(n=s[i])?r.push("-"==n.charAt(0)?{field:n.substring(1),order:-1}:{field:n,order:1}):"function"==typeof n&&r.push({func:n});return r}function T(t,e,i){var n,r;for(n=0;n<i.length;n++)if(r=k(t,e,i[n]))return r;return 0}function k(t,e,i){return i.func?i.func(t,e):R(t[i.field],e[i.field])*(i.order||1)}function R(e,i){return e||i?null==i?-1:null==e?1:"string"===t.type(e)||"string"===t.type(i)?String(e).localeCompare(String(i)):e-i:0}function $(t,e){var i,n,r,s,o=t.start,a=t.end,l=e.start,d=e.end;if(a>l&&o<d)return o>=l?(i=o.clone(),r=!0):(i=l.clone(),r=!1),a<=d?(n=a.clone(),s=!0):(n=d.clone(),s=!1),{start:i,end:n,isStart:r,isEnd:s}}function H(t,i){return e.duration({days:t.clone().stripTime().diff(i.clone().stripTime(),"days"),ms:t.time()-i.time()})}function M(t,i){return e.duration({days:t.clone().stripTime().diff(i.clone().stripTime(),"days")})}function z(t,i,n){return e.duration(Math.round(t.diff(i,n,!0)),n)}function I(t,e){var i,n,r;for(i=0;i<jt.length&&!((r=F(n=jt[i],t,e))>=1&&et(r));i++);return n}function F(t,i,n){return null!=n?n.diff(i,t,!0):e.isDuration(i)?i.as(t):i.end.diff(i.start,t,!0)}function G(t,e,i){var n;return P(i)?(e-t)/i:(n=i.asMonths(),Math.abs(n)>=1&&et(n)?e.diff(t,"months",!0)/n:e.diff(t,"days",!0)/i.asDays())}function Y(t,e){var i,n;return P(t)||P(e)?t/e:(i=t.asMonths(),n=e.asMonths(),Math.abs(i)>=1&&et(i)&&Math.abs(n)>=1&&et(n)?i/n:t.asDays()/e.asDays())}function L(t,i){var n;return P(t)?e.duration(t*i):(n=t.asMonths(),Math.abs(n)>=1&&et(n)?e.duration({months:n*i}):e.duration({days:t.asDays()*i}))}function P(t){return Boolean(t.hours()||t.minutes()||t.seconds()||t.milliseconds())}function O(t){return"[object Date]"===Object.prototype.toString.call(t)||t instanceof Date}function A(t){return/^\d+\:\d+(?:\:\d+\.?(?:\d{3})?)?$/.test(t)}function W(t,e){var i,n,r,s,o,a,l={};if(e)for(i=0;i<e.length;i++){for(n=e[i],r=[],s=t.length-1;s>=0;s--)if("object"==typeof(o=t[s][n]))r.unshift(o);else if(o!==undefined){l[n]=o;break}r.length&&(l[n]=W(r))}for(i=t.length-1;i>=0;i--)for(n in a=t[i])n in l||(l[n]=a[n]);return l}function N(t){var e=function(){};return e.prototype=t,new e}function V(t,e){for(var i in t)j(t,i)&&(e[i]=t[i])}function B(t,e){var i,n,r=["constructor","toString","valueOf"];for(i=0;i<r.length;i++)t[n=r[i]]!==Object.prototype[n]&&(e[n]=t[n])}function j(t,e){return Xt.call(t,e)}function U(e){return/undefined|null|boolean|number|string/.test(t.type(e))}function q(e,i,n){if(t.isFunction(e)&&(e=[e]),e){var r,s;for(r=0;r<e.length;r++)s=e[r].apply(i,n)||s;return s}}function Z(){for(var t=0;t<arguments.length;t++)if(arguments[t]!==undefined)return arguments[t]}function X(t){return(t+"").replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/'/g,"&#039;").replace(/"/g,"&quot;").replace(/\n/g,"<br />")}function Q(t){return t.replace(/&.*?;/g,"")}function J(e){var i=[];return t.each(e,function(t,e){null!=e&&i.push(t+":"+e)}),i.join(";")}function K(t){return t.charAt(0).toUpperCase()+t.slice(1)}function tt(t,e){return t-e}function et(t){return t%1==0}function it(t,e){var i=t[e];return function(){return i.apply(t,arguments)}}function nt(t,e){var i,n,r,s,o=function(){var a=+new Date-s;a<e&&a>0?i=setTimeout(o,e-a):(i=null,t.apply(r,n),i||(r=n=null))};return function(){r=this,n=arguments,s=+new Date,i||(i=setTimeout(o,e))}}function rt(i,n,r){var s,o,a,l,d=i[0],h=1==i.length&&"string"==typeof d;return e.isMoment(d)?ot(d,l=e.apply(null,i)):O(d)||d===undefined?l=e.apply(null,i):(s=!1,o=!1,h?Qt.test(d)?(i=[d+="-01"],s=!0,o=!0):(a=Jt.exec(d))&&(s=!a[5],o=!0):t.isArray(d)&&(o=!0),l=n||s?e.utc.apply(e,i):e.apply(null,i),s?(l._ambigTime=!0,l._ambigZone=!0):r&&(o?l._ambigZone=!0:h&&(l.utcOffset?l.utcOffset(d):l.zone(d)))),l._fullCalendar=!0,l}function st(t,i){var n,r,s=!1,o=!1,a=t.length,l=[];for(n=0;n<a;n++)r=t[n],e.isMoment(r)||(r=At.moment.parseZone(r)),s=s||r._ambigTime,o=o||r._ambigZone,l.push(r);for(n=0;n<a;n++)r=l[n],i||!s||r._ambigTime?o&&!r._ambigZone&&(l[n]=r.clone().stripZone()):l[n]=r.clone().stripTime();return l}function ot(t,e){t._ambigTime?e._ambigTime=!0:e._ambigTime&&(e._ambigTime=!1),t._ambigZone?e._ambigZone=!0:e._ambigZone&&(e._ambigZone=!1)}function at(t,e){t.year(e[0]||0).month(e[1]||0).date(e[2]||0).hours(e[3]||0).minutes(e[4]||0).seconds(e[5]||0).milliseconds(e[6]||0)}function lt(t,e){return te.format.call(t,e)}function dt(t,e){return ht(t,gt(e))}function ht(t,e){var i,n="";for(i=0;i<e.length;i++)n+=ct(t,e[i]);return n}function ct(t,e){var i,n;return"string"==typeof e?e:(i=e.token)?ee[i]?ee[i](t):lt(t,i):e.maybe&&(n=ht(t,e.maybe)).match(/[1-9]/)?n:""}function ut(t,e,i,n,r){return n=n||" - ",pt(t=At.moment.parseZone(t),e=At.moment.parseZone(e),gt(i=(t.localeData||t.lang).call(t).longDateFormat(i)||i),n,r)}function pt(t,e,i,n,r){var s,o,a,l,d=t.clone().stripZone(),h=e.clone().stripZone(),c="",u="",p="",f="",g="";for(o=0;o<i.length&&!1!==(s=ft(t,e,d,h,i[o]));o++)c+=s;for(a=i.length-1;a>o&&!1!==(s=ft(t,e,d,h,i[a]));a--)u=s+u;for(l=o;l<=a;l++)p+=ct(t,i[l]),f+=ct(e,i[l]);return(p||f)&&(g=r?f+n+p:p+n+f),c+g+u}function ft(t,e,i,n,r){var s,o;return"string"==typeof r?r:!!((s=r.token)&&(o=ie[s.charAt(0)])&&i.isSame(n,o))&&lt(t,s)}function gt(t){return t in ne?ne[t]:ne[t]=mt(t)}function mt(t){for(var e,i=[],n=/\[([^\]]*)\]|\(([^\)]*)\)|(LTS|LT|(\w)\4*o?)|([^\w\[\(]+)/g;e=n.exec(t);)e[1]?i.push(e[1]):e[2]?i.push({maybe:mt(e[2])}):e[3]?i.push({token:e[3]}):e[5]&&i.push(e[5]);return i}function _t(){}function vt(t,e){var i;return j(e,"constructor")&&(i=e.constructor),"function"!=typeof i&&(i=e.constructor=function(){t.apply(this,arguments)}),i.prototype=N(t.prototype),V(e,i.prototype),B(e,i.prototype),V(t,i),i}function yt(t,e){V(e.prototype||e,t.prototype)}function wt(t,e){return!t&&!e||!(!t||!e)&&(t.component===e.component&&bt(t,e)&&bt(e,t))}function bt(t,e){for(var i in t)if(!/^(component|left|right|top|bottom)$/.test(i)&&t[i]!==e[i])return!1;return!0}function St(t){var e=xt(t);return"background"===e||"inverse-background"===e}function Ct(t){return"inverse-background"===xt(t)}function xt(t){return Z((t.source||{}).rendering,t.rendering)}function Dt(t){var e,i,n={};for(e=0;e<t.length;e++)(n[(i=t[e])._id]||(n[i._id]=[])).push(i);return n}function Et(t,e){return t.start-e.start}function Tt(i){var n,r,s,o,a=At.dataAttrPrefix;return a&&(a+="-"),(n=i.data(a+"event")||null)&&(null==(r=(n="object"==typeof n?t.extend({},n):{}).start)&&(r=n.time),s=n.duration,o=n.stick,delete n.start,delete n.time,delete n.duration,delete n.stick),null==r&&(r=i.data(a+"start")),null==r&&(r=i.data(a+"time")),null==s&&(s=i.data(a+"duration")),null==o&&(o=i.data(a+"stick")),{eventProps:n,startTime:r=null!=r?e.duration(r):null,duration:s=null!=s?e.duration(s):null,stick:o=Boolean(o)}}function kt(t,e){var i,n;for(i=0;i<e.length;i++)if((n=e[i]).leftCol<=t.rightCol&&n.rightCol>=t.leftCol)return!0;return!1}function Rt(t,e){return t.leftCol-e.leftCol}function $t(t){var e,i,n,r=[];for(e=0;e<t.length;e++){for(i=t[e],n=0;n<r.length&&zt(i,r[n]).length;n++);i.level=n,(r[n]||(r[n]=[])).push(i)}return r}function Ht(t){var e,i,n,r,s;for(e=0;e<t.length;e++)for(i=t[e],n=0;n<i.length;n++)for((r=i[n]).forwardSegs=[],s=e+1;s<t.length;s++)zt(r,t[s],r.forwardSegs)}function Mt(t){var e,i,n=t.forwardSegs,r=0;if(t.forwardPressure===undefined){for(e=0;e<n.length;e++)Mt(i=n[e]),r=Math.max(r,1+i.forwardPressure);t.forwardPressure=r}}function zt(t,e,i){i=i||[];for(var n=0;n<e.length;n++)It(t,e[n])&&i.push(e[n]);return i}function It(t,e){return t.bottom>e.top&&t.top<e.bottom}function Ft(i,n){function r(){U?a()&&(h(),l()):s()}function s(){O.theme?"ui":"fc",i.addClass("fc"),O.isRTL?i.addClass("fc-rtl"):i.addClass("fc-ltr"),O.theme?i.addClass("ui-widget"):i.addClass("fc-unthemed"),U=t("<div class='fc-view-container'/>").prependTo(i),B=P.header=new Lt(P,O),(j=B.render())&&i.prepend(j),l(O.defaultView),O.handleWindowResize&&(X=nt(u,O.windowResizeDelay),t(window).resize(X))}function o(){q&&q.removeElement(),B.removeElement(),U.remove(),i.removeClass("fc fc-ltr fc-rtl fc-unthemed ui-widget"),X&&t(window).unbind("resize",X)}function a(){return i.is(":visible")}function l(e){it++,q&&e&&q.type!==e&&(B.deactivateButton(q.type),z(),q.removeElement(),q=P.view=null),!q&&e&&((q=P.view=et[e]||(et[e]=P.instantiateView(e))).setElement(t("<div class='fc-view fc-"+e+"-view' />").appendTo(U)),B.activateButton(e)),q&&(Q=q.massageCurrentDate(Q),q.displaying&&Q.isWithin(q.intervalStart,q.intervalEnd)||a()&&(q.display(Q),I(),w(),b(),m())),I(),it--}function d(t){if(a())return t&&c(),it++,q.updateSize(!0),it--,!0}function h(){a()&&c()}function c(){Z="number"==typeof O.contentHeight?O.contentHeight:"number"==typeof O.height?O.height-(j?j.outerHeight(!0):0):Math.round(U.width()/Math.max(O.aspectRatio,.5))}function u(t){!it&&t.target===window&&q.start&&d(!0)&&q.trigger("windowResize",tt)}function p(){g(),_()}function f(){a()&&(z(),q.displayEvents(rt),I())}function g(){z(),q.clearEvents(),I()}function m(){!O.lazyFetching||J(q.start,q.end)?_():f()}function _(){K(q.start,q.end)}function v(t){rt=t,f()}function y(){f()}function w(){B.updateTitle(q.title)}function b(){P.getNow().isWithin(q.intervalStart,q.intervalEnd)?B.disableButton("today"):B.enableButton("today")}function S(){q.select(P.buildSelectSpan.apply(P,arguments))}function C(){q&&q.unselect()}function x(){Q=q.computePrevDate(Q),l()}function D(){Q=q.computeNextDate(Q),l()}function E(){Q.add(-1,"years"),l()}function T(){Q.add(1,"years"),l()}function k(){Q=P.getNow(),l()}function R(t){Q=P.moment(t).stripZone(),l()}function $(t){Q.add(e.duration(t)),l()}function H(t,e){var i;e=e||"day",i=P.getViewSpec(e)||P.getUnitViewSpec(e),Q=t.clone(),l(i?i.type:null)}function M(){return P.applyTimezone(Q)}function z(){U.css({width:"100%",height:U.height(),overflow:"hidden"})}function I(){U.css({width:"",height:"",overflow:""})}function F(){return P}function G(){return q}function Y(t,e){if(e===undefined)return O[t];"height"!=t&&"contentHeight"!=t&&"aspectRatio"!=t||(O[t]=e,d(!0))}function L(t,e){var i=Array.prototype.slice.call(arguments,2);if(e=e||tt,this.triggerWith(t,e,i),O[t])return O[t].apply(e,i)}var P=this;P.initOptions(n||{});var O=this.options;P.render=r,P.destroy=o,P.refetchEvents=p,P.reportEvents=v,P.reportEventChange=y,P.rerenderEvents=f,P.changeView=l,P.select=S,P.unselect=C,P.prev=x,P.next=D,P.prevYear=E,P.nextYear=T,P.today=k,P.gotoDate=R,P.incrementDate=$,P.zoomTo=H,P.getDate=M,P.getCalendar=F,P.getView=G,P.option=Y,P.trigger=L;var A,W=N(Yt(O.lang));if(O.monthNames&&(W._months=O.monthNames),O.monthNamesShort&&(W._monthsShort=O.monthNamesShort),O.dayNames&&(W._weekdays=O.dayNames),O.dayNamesShort&&(W._weekdaysShort=O.dayNamesShort),null!=O.firstDay){var V=N(W._week);V.dow=O.firstDay,W._week=V}W._fullCalendar_weekCalc="function"==typeof(A=O.weekNumberCalculation)?A:"local"===A?A:"iso"===A||"ISO"===A?"ISO":void 0,P.defaultAllDayEventDuration=e.duration(O.defaultAllDayEventDuration),P.defaultTimedEventDuration=e.duration(O.defaultTimedEventDuration),P.moment=function(){var t;return"local"===O.timezone?(t=At.moment.apply(null,arguments)).hasTime()&&t.local():t="UTC"===O.timezone?At.moment.utc.apply(null,arguments):At.moment.parseZone.apply(null,arguments),"_locale"in t?t._locale=W:t._lang=W,t},P.getIsAmbigTimezone=function(){return"local"!==O.timezone&&"UTC"!==O.timezone},P.applyTimezone=function(t){if(!t.hasTime())return t.clone();var e,i=P.moment(t.toArray()),n=t.time()-i.time();return n&&(e=i.clone().add(n),t.time()-e.time()==0&&(i=e)),i},P.getNow=function(){var t=O.now;return"function"==typeof t&&(t=t()),P.moment(t).stripZone()},P.getEventEnd=function(t){return t.end?t.end.clone():P.getDefaultEventEnd(t.allDay,t.start)},P.getDefaultEventEnd=function(t,e){var i=e.clone();return t?i.stripTime().add(P.defaultAllDayEventDuration):i.add(P.defaultTimedEventDuration),P.getIsAmbigTimezone()&&i.stripZone(),i},P.humanizeDuration=function(t){return(t.locale||t.lang).call(t,O.lang).humanize()},Pt.call(P,O);var B,j,U,q,Z,X,Q,J=P.isFetchNeeded,K=P.fetchEvents,tt=i[0],et={},it=0,rt=[];Q=null!=O.defaultDate?P.moment(O.defaultDate).stripZone():P.getNow(),P.getSuggestedViewHeight=function(){return Z===undefined&&h(),Z},P.isHeightAuto=function(){return"auto"===O.contentHeight||"auto"===O.height},P.freezeContentHeight=z,P.unfreezeContentHeight=I,P.initialize()}function Gt(e){t.each(ye,function(t,i){null==e[t]&&(e[t]=i(e))})}function Yt(t){var i=e.localeData||e.langData;return i.call(e,t)||i.call(e,"en")}function Lt(e,i){function n(){var e=i.header;if(p=i.theme?"ui":"fc",e)return f=t("<div class='fc-toolbar'/>").append(s("left")).append(s("right")).append(s("center")).append('<div class="fc-clear"/>')}function r(){f.remove(),f=t()}function s(n){var r=t('<div class="fc-'+n+'"/>'),s=i.header[n];return s&&t.each(s.split(" "),function(){var n,s=t(),o=!0;t.each(this.split(","),function(n,r){var a,l,d,h,c,u,f,m,_;"title"==r?(s=s.add(t("<h2>&nbsp;</h2>")),o=!1):((a=(e.options.customButtons||{})[r])?(d=function(t){a.click&&a.click.call(_[0],t)},h="",c=a.text):(l=e.getViewSpec(r))?(d=function(){e.changeView(r)},g.push(r),h=l.buttonTextOverride,c=l.buttonTextDefault):e[r]&&(d=function(){e[r]()},h=(e.overrides.buttonText||{})[r],c=i.buttonText[r]),d&&(u=a?a.themeIcon:i.themeButtonIcons[r],f=a?a.icon:i.buttonIcons[r],m=h?X(h):u&&i.theme?"<span class='ui-icon ui-icon-"+u+"'></span>":f&&!i.theme?"<span class='fc-icon fc-icon-"+f+"'></span>":X(c),_=t('<button type="button" class="'+["fc-"+r+"-button",p+"-button",p+"-state-default"].join(" ")+'">'+m+"</button>").click(function(t){_.hasClass(p+"-state-disabled")||(d(t),(_.hasClass(p+"-state-active")||_.hasClass(p+"-state-disabled"))&&_.removeClass(p+"-state-hover"))}).mousedown(function(){_.not("."+p+"-state-active").not("."+p+"-state-disabled").addClass(p+"-state-down")}).mouseup(function(){_.removeClass(p+"-state-down")}).hover(function(){_.not("."+p+"-state-active").not("."+p+"-state-disabled").addClass(p+"-state-hover")},function(){_.removeClass(p+"-state-hover").removeClass(p+"-state-down")}),s=s.add(_)))}),o&&s.first().addClass(p+"-corner-left").end().last().addClass(p+"-corner-right").end(),s.length>1?(n=t("<div/>"),o&&n.addClass("fc-button-group"),n.append(s),r.append(n)):r.append(s)}),r}function o(t){f.find("h2").text(t)}function a(t){f.find(".fc-"+t+"-button").addClass(p+"-state-active")}function l(t){f.find(".fc-"+t+"-button").removeClass(p+"-state-active")}function d(t){f.find(".fc-"+t+"-button").attr("disabled","disabled").addClass(p+"-state-disabled")}function h(t){f.find(".fc-"+t+"-button").removeAttr("disabled").removeClass(p+"-state-disabled")}function c(){return g}var u=this;u.render=n,u.removeElement=r,u.updateTitle=o,u.activateButton=a,u.deactivateButton=l,u.disableButton=d,u.enableButton=h,u.getViewsWithButtons=c;var p,f=t(),g=[]}function Pt(i){function n(t,e){return!Y||t<Y||e>L}function r(t,e){Y=t,L=e,B=[];var i=++N,n=W.length;V=n;for(var r=0;r<n;r++)s(W[r],i)}function s(e,i){o(e,function(n){var r,s,o,a=t.isArray(e.events);if(i==N){if(n)for(r=0;r<n.length;r++)s=n[r],(o=a?s:v(s,e))&&B.push.apply(B,S(o));--V||P(B)}})}function o(e,n){var r,s,a=At.sourceFetchers;for(r=0;r<a.length;r++){if(!0===(s=a[r].call(G,e,Y.clone(),L.clone(),i.timezone,n)))return;if("object"==typeof s)return void o(s,n)}var l=e.events;if(l)t.isFunction(l)?(G.pushLoading(),l.call(G,Y.clone(),L.clone(),i.timezone,function(t){n(t),G.popLoading()})):t.isArray(l)?n(l):n();else if(e.url){var d,h=e.success,c=e.error,u=e.complete;d=t.isFunction(e.data)?e.data():e.data;var p=t.extend({},d||{}),f=Z(e.startParam,i.startParam),g=Z(e.endParam,i.endParam),m=Z(e.timezoneParam,i.timezoneParam);f&&(p[f]=Y.format()),g&&(p[g]=L.format()),i.timezone&&"local"!=i.timezone&&(p[m]=i.timezone),G.pushLoading(),t.ajax(t.extend({},we,e,{data:p,success:function(e){e=e||[];var i=q(h,this,arguments);t.isArray(i)&&(e=i),n(e)},error:function(){q(c,this,arguments),n()},complete:function(){q(u,this,arguments),G.popLoading()}}))}else n()}function a(t){var e=l(t);e&&(W.push(e),V++,s(e,N))}function l(e){var i,n,r=At.sourceNormalizers;if(t.isFunction(e)||t.isArray(e)?i={events:e}:"string"==typeof e?i={url:e}:"object"==typeof e&&(i=t.extend({},e)),i){for(i.className?"string"==typeof i.className&&(i.className=i.className.split(/\s+/)):i.className=[],t.isArray(i.events)&&(i.origArray=i.events,i.events=t.map(i.events,function(t){return v(t,i)})),n=0;n<r.length;n++)r[n].call(G,i);return i}}function d(e){W=t.grep(W,function(t){return!h(t,e)}),B=t.grep(B,function(t){return!h(t.source,e)}),P(B)}function h(t,e){return t&&e&&c(t)==c(e)}function c(t){return("object"==typeof t?t.origArray||t.googleCalendarId||t.url||t.events:null)||t}function u(t){t.start=G.moment(t.start),t.end?t.end=G.moment(t.end):t.end=null,C(t,p(t)),P(B)}function p(e){var i={};return t.each(e,function(t,e){f(t)&&e!==undefined&&U(e)&&(i[t]=e)}),i}function f(t){return!/^_|^(id|allDay|start|end)$/.test(t)}function g(t,e){var i,n,r,s=v(t);if(s){for(i=S(s),n=0;n<i.length;n++)(r=i[n]).source||(e&&(O.events.push(r),r.source=O),B.push(r));return P(B),i}return[]}function m(e){var i,n;for(null==e?e=function(){return!0}:t.isFunction(e)||(i=e+"",e=function(t){return t._id==i}),B=t.grep(B,e,!0),n=0;n<W.length;n++)t.isArray(W[n].events)&&(W[n].events=t.grep(W[n].events,e,!0));P(B)}function _(e){return t.isFunction(e)?t.grep(B,e):null!=e?(e+="",t.grep(B,function(t){return t._id==e})):B}function v(n,r){var s,o,a,l={};if(i.eventDataTransform&&(n=i.eventDataTransform(n)),r&&r.eventDataTransform&&(n=r.eventDataTransform(n)),t.extend(l,n),r&&(l.source=r),l._id=n._id||(n.id===undefined?"_fc"+be++:n.id+""),n.className?"string"==typeof n.className?l.className=n.className.split(/\s+/):l.className=n.className:l.className=[],s=n.start||n.date,o=n.end,A(s)&&(s=e.duration(s)),A(o)&&(o=e.duration(o)),n.dow||e.isDuration(s)||e.isDuration(o))l.start=s?e.duration(s):null,l.end=o?e.duration(o):null,l._recurring=!0;else{if(s&&!(s=G.moment(s)).isValid())return!1;o&&((o=G.moment(o)).isValid()||(o=null)),(a=n.allDay)===undefined&&(a=Z(r?r.allDayDefault:undefined,i.allDayDefault)),y(s,o,a,l)}return l}function y(t,e,i,n){n.start=t,n.end=e,n.allDay=i,w(n),Ot(n)}function w(t){b(t),t.end&&!t.end.isAfter(t.start)&&(t.end=null),t.end||(i.forceEventDuration?t.end=G.getDefaultEventEnd(t.allDay,t.start):t.end=null)}function b(t){null==t.allDay&&(t.allDay=!(t.start.hasTime()||t.end&&t.end.hasTime())),t.allDay?(t.start.stripTime(),t.end&&t.end.stripTime()):(t.start.hasTime()||(t.start=G.applyTimezone(t.start.time(0))),t.end&&!t.end.hasTime()&&(t.end=G.applyTimezone(t.end.time(0))))}function S(e,i,n){var r,s,o,a,l,d,h,c,u,p=[];if(i=i||Y,n=n||L,e)if(e._recurring){if(s=e.dow)for(r={},o=0;o<s.length;o++)r[s[o]]=!0;for(a=i.clone().stripTime();a.isBefore(n);)r&&!r[a.day()]||(l=e.start,d=e.end,h=a.clone(),c=null,l&&(h=h.time(l)),d&&(c=a.clone().time(d)),y(h,c,!l&&!d,u=t.extend({},e)),p.push(u)),a.add(1,"days")}else p.push(e);return p}function C(e,i,n){function r(t,e){return n?z(t,e,n):i.allDay?M(t,e):H(t,e)}var s,o,a,l,d={};return(i=i||{}).start||(i.start=e.start.clone()),i.end===undefined&&(i.end=e.end?e.end.clone():null),null==i.allDay&&(i.allDay=e.allDay),w(i),w(s={start:e._start.clone(),end:e._end?e._end.clone():G.getDefaultEventEnd(e._allDay,e._start),allDay:i.allDay}),o=null!==e._end&&null===i.end,a=r(i.start,s.start),l=i.end?r(i.end,s.end).subtract(a):null,t.each(i,function(t,e){f(t)&&e!==undefined&&(d[t]=e)}),{dateDelta:a,durationDelta:l,undo:x(_(e._id),o,i.allDay,a,l,d)}}function x(e,i,n,r,s,o){var a=G.getIsAmbigTimezone(),l=[];return r&&!r.valueOf()&&(r=null),s&&!s.valueOf()&&(s=null),t.each(e,function(e,d){var h,c;h={start:d.start.clone(),end:d.end?d.end.clone():null,allDay:d.allDay},t.each(o,function(t){h[t]=d[t]}),w(c={start:d._start,end:d._end,allDay:n}),i?c.end=null:s&&!c.end&&(c.end=G.getDefaultEventEnd(c.allDay,c.start)),r&&(c.start.add(r),c.end&&c.end.add(r)),s&&c.end.add(s),a&&!c.allDay&&(r||s)&&(c.start.stripZone(),c.end&&c.end.stripZone()),t.extend(d,o,c),Ot(d),l.push(function(){t.extend(d,h),Ot(d)})}),function(){for(var t=0;t<l.length;t++)l[t]()}}function D(e){var n,r=i.businessHours,s={className:"fc-nonbusiness",start:"09:00",end:"17:00",dow:[1,2,3,4,5],rendering:"inverse-background"},o=G.getView();return r&&(n=t.extend({},s,"object"==typeof r?r:{})),n?(e&&(n.start=null,n.end=null),S(v(n),o.start,o.end)):[]}function E(t,e){var n=e.source||{};return R(t,Z(e.constraint,n.constraint,i.eventConstraint),Z(e.overlap,n.overlap,i.eventOverlap),e)}function T(e,i,n){var r;return n&&(r=S(v(t.extend({},n,i)))[0]),r?E(e,r):k(e)}function k(t){return R(t,i.selectConstraint,i.selectOverlap)}function R(t,e,i,n){var r,s,o,a,l,d;if(null!=e){for(r=$(e),s=!1,a=0;a<r.length;a++)if(I(r[a],t)){s=!0;break}if(!s)return!1}for(o=G.getPeerEvents(t,n),a=0;a<o.length;a++)if(F(l=o[a],t)){if(!1===i)return!1;if("function"==typeof i&&!i(l,n))return!1;if(n){if(!1===(d=Z(l.overlap,(l.source||{}).overlap)))return!1;if("function"==typeof d&&!d(n,l))return!1}}return!0}function $(t){return"businessHours"===t?D():"object"==typeof t?S(v(t)):_(t)}function I(t,e){var i=t.start.clone().stripZone(),n=G.getEventEnd(t).stripZone();return e.start>=i&&e.end<=n}function F(t,e){var i=t.start.clone().stripZone(),n=G.getEventEnd(t).stripZone();return e.start<n&&e.end>i}var G=this;G.isFetchNeeded=n,G.fetchEvents=r,G.addEventSource=a,G.removeEventSource=d,G.updateEvent=u,G.renderEvent=g,G.removeEvents=m,G.clientEvents=_,G.mutateEvent=C,G.normalizeEventDates=w,G.normalizeEventTimes=b;var Y,L,P=G.reportEvents,O={events:[]},W=[O],N=0,V=0,B=[];t.each((i.events?[i.events]:[]).concat(i.eventSources||[]),function(t,e){var i=l(e);i&&W.push(i)}),G.getBusinessHoursEvents=D,G.isEventSpanAllowed=E,G.isExternalSpanAllowed=T,G.isSelectionSpanAllowed=k,G.getEventCache=function(){return B}}function Ot(t){t._allDay=t.allDay,t._start=t.start.clone(),t._end=t.end?t.end.clone():null}var At=t.fullCalendar={version:"2.6.1",internalApiVersion:3},Wt=At.views={};t.fn.fullCalendar=function(e){var i=Array.prototype.slice.call(arguments,1),n=this;return this.each(function(r,s){var o,a=t(s),l=a.data("fullCalendar");"string"==typeof e?l&&t.isFunction(l[e])&&(o=l[e].apply(l,i),r||(n=o),"destroy"===e&&a.removeData("fullCalendar")):l||(l=new ge(a,e),a.data("fullCalendar",l),l.render())}),n};var Nt=["header","buttonText","buttonIcons","themeButtonIcons"];At.intersectRanges=$,At.applyAll=q,At.debounce=nt,At.isInt=et,At.htmlEscape=X,At.cssToStr=J,At.proxy=it,At.capitaliseFirstLetter=K,At.getOuterRect=f,At.getClientRect=g,At.getContentRect=m,At.getScrollbarWidths=_;var Vt=null;At.intersectRects=S,At.parseFieldSpecs=E,At.compareByFieldSpecs=T,At.compareByFieldSpec=k,At.flexibleCompare=R,At.computeIntervalUnit=I,At.divideRangeByDuration=G,At.divideDurationByDuration=Y,At.multiplyDuration=L,At.durationHasTime=P;var Bt=["sun","mon","tue","wed","thu","fri","sat"],jt=["year","month","week","day","hour","minute","second","millisecond"];At.log=function(){var t=window.console;if(t&&t.log)return t.log.apply(t,arguments)},At.warn=function(){var t=window.console;return t&&t.warn?t.warn.apply(t,arguments):At.log.apply(At,arguments)};var Ut,qt,Zt,Xt={}.hasOwnProperty,Qt=/^\s*\d{4}-\d\d$/,Jt=/^\s*\d{4}-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?)?$/,Kt=e.fn,te=t.extend({},Kt);At.moment=function(){return rt(arguments)},At.moment.utc=function(){var t=rt(arguments,!0);return t.hasTime()&&t.utc(),t},At.moment.parseZone=function(){return rt(arguments,!0,!0)},Kt.clone=function(){var t=te.clone.apply(this,arguments);return ot(this,t),this._fullCalendar&&(t._fullCalendar=!0),t},Kt.week=Kt.weeks=function(t){var e=(this._locale||this._lang)._fullCalendar_weekCalc;return null==t&&"function"==typeof e?e(this):"ISO"===e?te.isoWeek.apply(this,arguments):te.week.apply(this,arguments)},Kt.time=function(t){if(!this._fullCalendar)return te.time.apply(this,arguments);if(null==t)return e.duration({hours:this.hours(),minutes:this.minutes(),seconds:this.seconds(),milliseconds:this.milliseconds()});this._ambigTime=!1,e.isDuration(t)||e.isMoment(t)||(t=e.duration(t));var i=0;return e.isDuration(t)&&(i=24*Math.floor(t.asDays())),this.hours(i+t.hours()).minutes(t.minutes()).seconds(t.seconds()).milliseconds(t.milliseconds())},Kt.stripTime=function(){var t;return this._ambigTime||(t=this.toArray(),this.utc(),qt(this,t.slice(0,3)),this._ambigTime=!0,this._ambigZone=!0),this},Kt.hasTime=function(){return!this._ambigTime},Kt.stripZone=function(){var t,e;return this._ambigZone||(t=this.toArray(),e=this._ambigTime,this.utc(),qt(this,t),this._ambigTime=e||!1,this._ambigZone=!0),this},Kt.hasZone=function(){return!this._ambigZone},Kt.local=function(){var t=this.toArray(),e=this._ambigZone;return te.local.apply(this,arguments),this._ambigTime=!1,this._ambigZone=!1,e&&Zt(this,t),this},Kt.utc=function(){return te.utc.apply(this,arguments),this._ambigTime=!1,this._ambigZone=!1,this},t.each(["zone","utcOffset"],function(t,e){te[e]&&(Kt[e]=function(t){return null!=t&&(this._ambigTime=!1,this._ambigZone=!1),te[e].apply(this,arguments)})}),Kt.format=function(){return this._fullCalendar&&arguments[0]?dt(this,arguments[0]):this._ambigTime?lt(this,"YYYY-MM-DD"):this._ambigZone?lt(this,"YYYY-MM-DD[T]HH:mm:ss"):te.format.apply(this,arguments)},Kt.toISOString=function(){return this._ambigTime?lt(this,"YYYY-MM-DD"):this._ambigZone?lt(this,"YYYY-MM-DD[T]HH:mm:ss"):te.toISOString.apply(this,arguments)},Kt.isWithin=function(t,e){var i=st([this,t,e]);return i[0]>=i[1]&&i[0]<i[2]},Kt.isSame=function(t,e){var i;return this._fullCalendar?e?(i=st([this,t],!0),te.isSame.call(i[0],i[1],e)):(t=At.moment.parseZone(t),te.isSame.call(this,t)&&Boolean(this._ambigTime)===Boolean(t._ambigTime)&&Boolean(this._ambigZone)===Boolean(t._ambigZone)):te.isSame.apply(this,arguments)},t.each(["isBefore","isAfter"],function(t,e){Kt[e]=function(t,i){var n;return this._fullCalendar?(n=st([this,t]),te[e].call(n[0],n[1],i)):te[e].apply(this,arguments)}}),Ut="_d"in e()&&"updateOffset"in e,qt=Ut?function(t,i){t._d.setTime(Date.UTC.apply(Date,i)),e.updateOffset(t,!1)}:at,Zt=Ut?function(t,i){t._d.setTime(+new Date(i[0]||0,i[1]||0,i[2]||0,i[3]||0,i[4]||0,i[5]||0,i[6]||0)),e.updateOffset(t,!1)}:at;var ee={t:function(t){return lt(t,"a").charAt(0)},T:function(t){return lt(t,"A").charAt(0)}};At.formatRange=ut;var ie={Y:"year",M:"month",D:"day",d:"day",A:"second",a:"second",T:"second",t:"second",H:"second",h:"second",m:"second",s:"second"},ne={};At.Class=_t,_t.extend=function(){var t,e,i=arguments.length;for(t=0;t<i;t++)e=arguments[t],t<i-1&&yt(this,e);return vt(this,e||{})},_t.mixin=function(t){yt(this,t)};var re=At.Emitter=_t.extend({callbackHash:null,on:function(t,e){return this.getCallbacks(t).add(e),this},off:function(t,e){return this.getCallbacks(t).remove(e),this},trigger:function(t){var e=Array.prototype.slice.call(arguments,1);return this.triggerWith(t,this,e),this},triggerWith:function(t,e,i){return this.getCallbacks(t).fireWith(e,i),this},getCallbacks:function(e){var i;return this.callbackHash||(this.callbackHash={}),(i=this.callbackHash[e])||(i=this.callbackHash[e]=t.Callbacks()),i}}),se=_t.extend({isHidden:!0,options:null,el:null,documentMousedownProxy:null,margin:10,constructor:function(t){this.options=t||{}},show:function(){this.isHidden&&(this.el||this.render(),this.el.show(),this.position(),this.isHidden=!1,this.trigger("show"))},hide:function(){this.isHidden||(this.el.hide(),this.isHidden=!0,this.trigger("hide"))},render:function(){var e=this,i=this.options;this.el=t('<div class="fc-popover"/>').addClass(i.className||"").css({top:0,left:0}).append(i.content).appendTo(i.parentEl),this.el.on("click",".fc-close",function(){e.hide()}),i.autoHide&&t(document).on("mousedown",this.documentMousedownProxy=it(this,"documentMousedown"))},documentMousedown:function(e){this.el&&!t(e.target).closest(this.el).length&&this.hide()},removeElement:function(){this.hide(),this.el&&(this.el.remove(),this.el=null),t(document).off("mousedown",this.documentMousedownProxy)},position:function(){var e,i,n,r,s,o=this.options,a=this.el.offsetParent().offset(),l=this.el.outerWidth(),d=this.el.outerHeight(),h=t(window),c=p(this.el);r=o.top||0,s=o.left!==undefined?o.left:o.right!==undefined?o.right-l:0,c.is(window)||c.is(document)?(c=h,e=0,i=0):(e=(n=c.offset()).top,i=n.left),e+=h.scrollTop(),i+=h.scrollLeft(),!1!==o.viewportConstrain&&(r=Math.min(r,e+c.outerHeight()-d-this.margin),r=Math.max(r,e+this.margin),s=Math.min(s,i+c.outerWidth()-l-this.margin),s=Math.max(s,i+this.margin)),this.el.css({top:r-a.top,left:s-a.left})},trigger:function(t){this.options[t]&&this.options[t].apply(this,Array.prototype.slice.call(arguments,1))}}),oe=At.CoordCache=_t.extend({els:null,forcedOffsetParentEl:null,origin:null,boundingRect:null,isHorizontal:!1,isVertical:!1,lefts:null,rights:null,tops:null,bottoms:null,constructor:function(e){this.els=t(e.els),this.isHorizontal=e.isHorizontal,this.isVertical=e.isVertical,this.forcedOffsetParentEl=e.offsetParent?t(e.offsetParent):null},build:function(){var t=this.forcedOffsetParentEl||this.els.eq(0).offsetParent();this.origin=t.offset(),this.boundingRect=this.queryBoundingRect(),this.isHorizontal&&this.buildElHorizontals(),this.isVertical&&this.buildElVerticals()},clear:function(){this.origin=null,this.boundingRect=null,this.lefts=null,this.rights=null,this.tops=null,this.bottoms=null},
ensureBuilt:function(){this.origin||this.build()},queryBoundingRect:function(){var t=p(this.els.eq(0));if(!t.is(document))return g(t)},buildElHorizontals:function(){var e=[],i=[];this.els.each(function(n,r){var s=t(r),o=s.offset().left,a=s.outerWidth();e.push(o),i.push(o+a)}),this.lefts=e,this.rights=i},buildElVerticals:function(){var e=[],i=[];this.els.each(function(n,r){var s=t(r),o=s.offset().top,a=s.outerHeight();e.push(o),i.push(o+a)}),this.tops=e,this.bottoms=i},getHorizontalIndex:function(t){this.ensureBuilt();var e,i=this.boundingRect,n=this.lefts,r=this.rights,s=n.length;if(!i||t>=i.left&&t<i.right)for(e=0;e<s;e++)if(t>=n[e]&&t<r[e])return e},getVerticalIndex:function(t){this.ensureBuilt();var e,i=this.boundingRect,n=this.tops,r=this.bottoms,s=n.length;if(!i||t>=i.top&&t<i.bottom)for(e=0;e<s;e++)if(t>=n[e]&&t<r[e])return e},getLeftOffset:function(t){return this.ensureBuilt(),this.lefts[t]},getLeftPosition:function(t){return this.ensureBuilt(),this.lefts[t]-this.origin.left},getRightOffset:function(t){return this.ensureBuilt(),this.rights[t]},getRightPosition:function(t){return this.ensureBuilt(),this.rights[t]-this.origin.left},getWidth:function(t){return this.ensureBuilt(),this.rights[t]-this.lefts[t]},getTopOffset:function(t){return this.ensureBuilt(),this.tops[t]},getTopPosition:function(t){return this.ensureBuilt(),this.tops[t]-this.origin.top},getBottomOffset:function(t){return this.ensureBuilt(),this.bottoms[t]},getBottomPosition:function(t){return this.ensureBuilt(),this.bottoms[t]-this.origin.top},getHeight:function(t){return this.ensureBuilt(),this.bottoms[t]-this.tops[t]}}),ae=At.DragListener=_t.extend({options:null,isListening:!1,isDragging:!1,originX:null,originY:null,mousemoveProxy:null,mouseupProxy:null,subjectEl:null,subjectHref:null,scrollEl:null,scrollBounds:null,scrollTopVel:null,scrollLeftVel:null,scrollIntervalId:null,scrollHandlerProxy:null,scrollSensitivity:30,scrollSpeed:200,scrollIntervalMs:50,constructor:function(t){t=t||{},this.options=t,this.subjectEl=t.subjectEl},mousedown:function(t){b(t)&&(t.preventDefault(),this.startListening(t),this.options.distance||this.startDrag(t))},startListening:function(e){var i;this.isListening||(e&&this.options.scroll&&((i=p(t(e.target))).is(window)||i.is(document)||(this.scrollEl=i,this.scrollHandlerProxy=nt(it(this,"scrollHandler"),100),this.scrollEl.on("scroll",this.scrollHandlerProxy))),t(document).on("mousemove",this.mousemoveProxy=it(this,"mousemove")).on("mouseup",this.mouseupProxy=it(this,"mouseup")).on("selectstart",this.preventDefault),e?(this.originX=e.pageX,this.originY=e.pageY):(this.originX=0,this.originY=0),this.isListening=!0,this.listenStart(e))},listenStart:function(t){this.trigger("listenStart",t)},mousemove:function(t){var e,i=t.pageX-this.originX,n=t.pageY-this.originY;this.isDragging||i*i+n*n>=(e=this.options.distance||1)*e&&this.startDrag(t),this.isDragging&&this.drag(i,n,t)},startDrag:function(t){this.isListening||this.startListening(),this.isDragging||(this.isDragging=!0,this.dragStart(t))},dragStart:function(t){var e=this.subjectEl;this.trigger("dragStart",t),(this.subjectHref=e?e.attr("href"):null)&&e.removeAttr("href")},drag:function(t,e,i){this.trigger("drag",t,e,i),this.updateScroll(i)},mouseup:function(t){this.stopListening(t)},stopDrag:function(t){this.isDragging&&(this.stopScrolling(),this.dragStop(t),this.isDragging=!1)},dragStop:function(t){var e=this;this.trigger("dragStop",t),setTimeout(function(){e.subjectHref&&e.subjectEl.attr("href",e.subjectHref)},0)},stopListening:function(e){this.stopDrag(e),this.isListening&&(this.scrollEl&&(this.scrollEl.off("scroll",this.scrollHandlerProxy),this.scrollHandlerProxy=null),t(document).off("mousemove",this.mousemoveProxy).off("mouseup",this.mouseupProxy).off("selectstart",this.preventDefault),this.mousemoveProxy=null,this.mouseupProxy=null,this.isListening=!1,this.listenStop(e))},listenStop:function(t){this.trigger("listenStop",t)},trigger:function(t){this.options[t]&&this.options[t].apply(this,Array.prototype.slice.call(arguments,1))},preventDefault:function(t){t.preventDefault()},computeScrollBounds:function(){var t=this.scrollEl;this.scrollBounds=t?f(t):null},updateScroll:function(t){var e,i,n,r,s=this.scrollSensitivity,o=this.scrollBounds,a=0,l=0;o&&(e=(s-(t.pageY-o.top))/s,i=(s-(o.bottom-t.pageY))/s,n=(s-(t.pageX-o.left))/s,r=(s-(o.right-t.pageX))/s,e>=0&&e<=1?a=e*this.scrollSpeed*-1:i>=0&&i<=1&&(a=i*this.scrollSpeed),n>=0&&n<=1?l=n*this.scrollSpeed*-1:r>=0&&r<=1&&(l=r*this.scrollSpeed)),this.setScrollVel(a,l)},setScrollVel:function(t,e){this.scrollTopVel=t,this.scrollLeftVel=e,this.constrainScrollVel(),!this.scrollTopVel&&!this.scrollLeftVel||this.scrollIntervalId||(this.scrollIntervalId=setInterval(it(this,"scrollIntervalFunc"),this.scrollIntervalMs))},constrainScrollVel:function(){var t=this.scrollEl;this.scrollTopVel<0?t.scrollTop()<=0&&(this.scrollTopVel=0):this.scrollTopVel>0&&t.scrollTop()+t[0].clientHeight>=t[0].scrollHeight&&(this.scrollTopVel=0),this.scrollLeftVel<0?t.scrollLeft()<=0&&(this.scrollLeftVel=0):this.scrollLeftVel>0&&t.scrollLeft()+t[0].clientWidth>=t[0].scrollWidth&&(this.scrollLeftVel=0)},scrollIntervalFunc:function(){var t=this.scrollEl,e=this.scrollIntervalMs/1e3;this.scrollTopVel&&t.scrollTop(t.scrollTop()+this.scrollTopVel*e),this.scrollLeftVel&&t.scrollLeft(t.scrollLeft()+this.scrollLeftVel*e),this.constrainScrollVel(),this.scrollTopVel||this.scrollLeftVel||this.stopScrolling()},stopScrolling:function(){this.scrollIntervalId&&(clearInterval(this.scrollIntervalId),this.scrollIntervalId=null,this.scrollStop())},scrollHandler:function(){this.scrollIntervalId||this.scrollStop()},scrollStop:function(){}}),le=ae.extend({component:null,origHit:null,hit:null,coordAdjust:null,constructor:function(t,e){ae.call(this,e),this.component=t},listenStart:function(t){var e,i,n,r=this.subjectEl;ae.prototype.listenStart.apply(this,arguments),this.computeCoords(),t?(n=i={left:t.pageX,top:t.pageY},r&&(n=C(n,e=f(r))),this.origHit=this.queryHit(n.left,n.top),r&&this.options.subjectCenter&&(this.origHit&&(e=S(this.origHit,e)||e),n=x(e)),this.coordAdjust=D(n,i)):(this.origHit=null,this.coordAdjust=null)},computeCoords:function(){this.component.prepareHits(),this.computeScrollBounds()},dragStart:function(t){var e;ae.prototype.dragStart.apply(this,arguments),(e=this.queryHit(t.pageX,t.pageY))&&this.hitOver(e)},drag:function(t,e,i){var n;ae.prototype.drag.apply(this,arguments),wt(n=this.queryHit(i.pageX,i.pageY),this.hit)||(this.hit&&this.hitOut(),n&&this.hitOver(n))},dragStop:function(){this.hitDone(),ae.prototype.dragStop.apply(this,arguments)},hitOver:function(t){var e=wt(t,this.origHit);this.hit=t,this.trigger("hitOver",this.hit,e,this.origHit)},hitOut:function(){this.hit&&(this.trigger("hitOut",this.hit),this.hitDone(),this.hit=null)},hitDone:function(){this.hit&&this.trigger("hitDone",this.hit)},listenStop:function(){ae.prototype.listenStop.apply(this,arguments),this.origHit=null,this.hit=null,this.component.releaseHits()},scrollStop:function(){ae.prototype.scrollStop.apply(this,arguments),this.computeCoords()},queryHit:function(t,e){return this.coordAdjust&&(t+=this.coordAdjust.left,e+=this.coordAdjust.top),this.component.queryHit(t,e)}}),de=_t.extend({options:null,sourceEl:null,el:null,parentEl:null,top0:null,left0:null,mouseY0:null,mouseX0:null,topDelta:null,leftDelta:null,mousemoveProxy:null,isFollowing:!1,isHidden:!1,isAnimating:!1,constructor:function(e,i){this.options=i=i||{},this.sourceEl=e,this.parentEl=i.parentEl?t(i.parentEl):e.parent()},start:function(e){this.isFollowing||(this.isFollowing=!0,this.mouseY0=e.pageY,this.mouseX0=e.pageX,this.topDelta=0,this.leftDelta=0,this.isHidden||this.updatePosition(),t(document).on("mousemove",this.mousemoveProxy=it(this,"mousemove")))},stop:function(e,i){function n(){this.isAnimating=!1,r.removeElement(),this.top0=this.left0=null,i&&i()}var r=this,s=this.options.revertDuration;this.isFollowing&&!this.isAnimating&&(this.isFollowing=!1,t(document).off("mousemove",this.mousemoveProxy),e&&s&&!this.isHidden?(this.isAnimating=!0,this.el.animate({top:this.top0,left:this.left0},{duration:s,complete:n})):n())},getEl:function(){var t=this.el;return t||(this.sourceEl.width(),t=this.el=this.sourceEl.clone().css({position:"absolute",visibility:"",display:this.isHidden?"none":"",margin:0,right:"auto",bottom:"auto",width:this.sourceEl.width(),height:this.sourceEl.height(),opacity:this.options.opacity||"",zIndex:this.options.zIndex}).appendTo(this.parentEl)),t},removeElement:function(){this.el&&(this.el.remove(),this.el=null)},updatePosition:function(){var t,e;this.getEl(),null===this.top0&&(this.sourceEl.width(),t=this.sourceEl.offset(),e=this.el.offsetParent().offset(),this.top0=t.top-e.top,this.left0=t.left-e.left),this.el.css({top:this.top0+this.topDelta,left:this.left0+this.leftDelta})},mousemove:function(t){this.topDelta=t.pageY-this.mouseY0,this.leftDelta=t.pageX-this.mouseX0,this.isHidden||this.updatePosition()},hide:function(){this.isHidden||(this.isHidden=!0,this.el&&this.el.hide())},show:function(){this.isHidden&&(this.isHidden=!1,this.updatePosition(),this.getEl().show())}}),he=At.Grid=_t.extend({view:null,isRTL:null,start:null,end:null,el:null,elsByFill:null,externalDragStartProxy:null,eventTimeFormat:null,displayEventTime:null,displayEventEnd:null,minResizeDuration:null,largeUnit:null,constructor:function(t){this.view=t,this.isRTL=t.opt("isRTL"),this.elsByFill={},this.externalDragStartProxy=it(this,"externalDragStart")},computeEventTimeFormat:function(){return this.view.opt("smallTimeFormat")},computeDisplayEventTime:function(){return!0},computeDisplayEventEnd:function(){return!0},setRange:function(t){this.start=t.start.clone(),this.end=t.end.clone(),this.rangeUpdated(),this.processRangeOptions()},rangeUpdated:function(){},processRangeOptions:function(){var t,e,i=this.view;this.eventTimeFormat=i.opt("eventTimeFormat")||i.opt("timeFormat")||this.computeEventTimeFormat(),null==(t=i.opt("displayEventTime"))&&(t=this.computeDisplayEventTime()),null==(e=i.opt("displayEventEnd"))&&(e=this.computeDisplayEventEnd()),this.displayEventTime=t,this.displayEventEnd=e},spanToSegs:function(){},diffDates:function(t,e){return this.largeUnit?z(t,e,this.largeUnit):H(t,e)},prepareHits:function(){},releaseHits:function(){},queryHit:function(){},getHitSpan:function(){},getHitEl:function(){},setElement:function(e){var i=this;this.el=e,e.on("mousedown",function(e){t(e.target).is(".fc-event-container *, .fc-more")||t(e.target).closest(".fc-popover").length||i.dayMousedown(e)}),this.bindSegHandlers(),this.bindGlobalHandlers()},removeElement:function(){this.unbindGlobalHandlers(),this.el.remove()},renderSkeleton:function(){},renderDates:function(){},unrenderDates:function(){},bindGlobalHandlers:function(){t(document).on("dragstart sortstart",this.externalDragStartProxy)},unbindGlobalHandlers:function(){t(document).off("dragstart sortstart",this.externalDragStartProxy)},dayMousedown:function(t){var e,i,n=this,r=this.view,s=r.opt("selectable");new le(this,{scroll:r.opt("dragScroll"),dragStart:function(){r.unselect()},hitOver:function(t,r,a){a&&(e=r?t:null,s&&((i=n.computeSelection(n.getHitSpan(a),n.getHitSpan(t)))?n.renderSelection(i):!1===i&&o()))},hitOut:function(){e=null,i=null,n.unrenderSelection(),a()},listenStop:function(t){e&&r.triggerDayClick(n.getHitSpan(e),n.getHitEl(e),t),i&&r.reportSelection(i,t),a()}}).mousedown(t)},renderEventLocationHelper:function(t,e){var i=this.fabricateHelperEvent(t,e);this.renderHelper(i,e)},fabricateHelperEvent:function(t,e){var i=e?N(e.event):{};return i.start=t.start.clone(),i.end=t.end?t.end.clone():null,i.allDay=null,this.view.calendar.normalizeEventDates(i),i.className=(i.className||[]).concat("fc-helper"),e||(i.editable=!1),i},renderHelper:function(){},unrenderHelper:function(){},renderSelection:function(t){this.renderHighlight(t)},unrenderSelection:function(){this.unrenderHighlight()},computeSelection:function(t,e){var i=this.computeSelectionSpan(t,e);return!(i&&!this.view.calendar.isSelectionSpanAllowed(i))&&i},computeSelectionSpan:function(t,e){var i=[t.start,t.end,e.start,e.end];return i.sort(tt),{start:i[0].clone(),end:i[3].clone()}},renderHighlight:function(t){this.renderFill("highlight",this.spanToSegs(t))},unrenderHighlight:function(){this.unrenderFill("highlight")},highlightSegClasses:function(){return["fc-highlight"]},renderBusinessHours:function(){},unrenderBusinessHours:function(){},getNowIndicatorUnit:function(){},renderNowIndicator:function(){},unrenderNowIndicator:function(){},renderFill:function(){},unrenderFill:function(t){var e=this.elsByFill[t];e&&(e.remove(),delete this.elsByFill[t])},renderFillSegEls:function(e,i){var n,r=this,s=this[e+"SegEl"],o="",a=[];if(i.length){for(n=0;n<i.length;n++)o+=this.fillSegHtml(e,i[n]);t(o).each(function(e,n){var o=i[e],l=t(n);s&&(l=s.call(r,o,l)),l&&(l=t(l)).is(r.fillSegTag)&&(o.el=l,a.push(o))})}return a},fillSegTag:"div",fillSegHtml:function(t,e){var i=this[t+"SegClasses"],n=this[t+"SegCss"],r=i?i.call(this,e):[],s=J(n?n.call(this,e):{});return"<"+this.fillSegTag+(r.length?' class="'+r.join(" ")+'"':"")+(s?' style="'+s+'"':"")+" />"},getDayClasses:function(t){var e=this.view,i=e.calendar.getNow(),n=["fc-"+Bt[t.day()]];return 1==e.intervalDuration.as("months")&&t.month()!=e.intervalStart.month()&&n.push("fc-other-month"),t.isSame(i,"day")?n.push("fc-today",e.highlightStateClass):t<i?n.push("fc-past"):n.push("fc-future"),n}});he.mixin({mousedOverSeg:null,isDraggingSeg:!1,isResizingSeg:!1,isDraggingExternal:!1,segs:null,renderEvents:function(t){var e,i=[],n=[];for(e=0;e<t.length;e++)(St(t[e])?i:n).push(t[e]);this.segs=[].concat(this.renderBgEvents(i),this.renderFgEvents(n))},renderBgEvents:function(t){var e=this.eventsToSegs(t);return this.renderBgSegs(e)||e},renderFgEvents:function(t){var e=this.eventsToSegs(t);return this.renderFgSegs(e)||e},unrenderEvents:function(){this.triggerSegMouseout(),this.unrenderFgSegs(),this.unrenderBgSegs(),this.segs=null},getEventSegs:function(){return this.segs||[]},renderFgSegs:function(){},unrenderFgSegs:function(){},renderFgSegEls:function(e,i){var n,r=this.view,s="",o=[];if(e.length){for(n=0;n<e.length;n++)s+=this.fgSegHtml(e[n],i);t(s).each(function(i,n){var s=e[i],a=r.resolveEventEl(s.event,t(n));a&&(a.data("fc-seg",s),s.el=a,o.push(s))})}return o},fgSegHtml:function(){},renderBgSegs:function(t){return this.renderFill("bgEvent",t)},unrenderBgSegs:function(){this.unrenderFill("bgEvent")},bgEventSegEl:function(t,e){return this.view.resolveEventEl(t.event,e)},bgEventSegClasses:function(t){var e=t.event,i=e.source||{};return["fc-bgevent"].concat(e.className,i.className||[])},bgEventSegCss:function(t){return{"background-color":this.getSegSkinCss(t)["background-color"]}},businessHoursSegClasses:function(){return["fc-nonbusiness","fc-bgevent"]},bindSegHandlers:function(){var e=this,i=this.view;t.each({mouseenter:function(t,i){e.triggerSegMouseover(t,i)},mouseleave:function(t,i){e.triggerSegMouseout(t,i)},click:function(t,e){return i.trigger("eventClick",this,t.event,e)},mousedown:function(n,r){t(r.target).is(".fc-resizer")&&i.isEventResizable(n.event)?e.segResizeMousedown(n,r,t(r.target).is(".fc-start-resizer")):i.isEventDraggable(n.event)&&e.segDragMousedown(n,r)}},function(i,n){e.el.on(i,".fc-event-container > *",function(i){var r=t(this).data("fc-seg");if(r&&!e.isDraggingSeg&&!e.isResizingSeg)return n.call(this,r,i)})})},triggerSegMouseover:function(t,e){this.mousedOverSeg||(this.mousedOverSeg=t,this.view.trigger("eventMouseover",t.el[0],t.event,e))},triggerSegMouseout:function(t,e){e=e||{},this.mousedOverSeg&&(t=t||this.mousedOverSeg,this.mousedOverSeg=null,this.view.trigger("eventMouseout",t.el[0],t.event,e))},segDragMousedown:function(t,e){var i,n=this,r=this.view,s=r.calendar,l=t.el,d=t.event,h=new de(t.el,{parentEl:r.el,opacity:r.opt("dragOpacity"),revertDuration:r.opt("dragRevertDuration"),zIndex:2});new le(r,{distance:5,scroll:r.opt("dragScroll"),subjectEl:l,subjectCenter:!0,listenStart:function(t){h.hide(),h.start(t)},dragStart:function(e){n.triggerSegMouseout(t,e),n.segDragStart(t,e),r.hideEvent(d)},hitOver:function(e,a,l){t.hit&&(l=t.hit),(i=n.computeEventDrop(l.component.getHitSpan(l),e.component.getHitSpan(e),d))&&!s.isEventSpanAllowed(n.eventToSpan(i),d)&&(o(),i=null),i&&r.renderDrag(i,t)?h.hide():h.show(),a&&(i=null)},hitOut:function(){r.unrenderDrag(),h.show(),i=null},hitDone:function(){a()},dragStop:function(e){h.stop(!i,function(){r.unrenderDrag(),r.showEvent(d),n.segDragStop(t,e),i&&r.reportEventDrop(d,i,this.largeUnit,l,e)})},listenStop:function(){h.stop()}}).mousedown(e)},segDragStart:function(t,e){this.isDraggingSeg=!0,this.view.trigger("eventDragStart",t.el[0],t.event,e,{})},segDragStop:function(t,e){this.isDraggingSeg=!1,this.view.trigger("eventDragStop",t.el[0],t.event,e,{})},computeEventDrop:function(t,e,i){var n,r,s=this.view.calendar,o=t.start,a=e.start;return o.hasTime()===a.hasTime()?(n=this.diffDates(a,o),i.allDay&&P(n)?(r={start:i.start.clone(),end:s.getEventEnd(i),allDay:!1},s.normalizeEventTimes(r)):r={start:i.start.clone(),end:i.end?i.end.clone():null,allDay:i.allDay},r.start.add(n),r.end&&r.end.add(n)):r={start:a.clone(),end:null,allDay:!a.hasTime()},r},applyDragOpacity:function(t){var e=this.view.opt("dragOpacity");null!=e&&t.each(function(t,i){i.style.opacity=e})},externalDragStart:function(e,i){var n,r,s=this.view;s.opt("droppable")&&(n=t((i?i.item:null)||e.target),r=s.opt("dropAccept"),(t.isFunction(r)?r.call(n[0],n):n.is(r))&&(this.isDraggingExternal||this.listenToExternalDrag(n,e,i)))},listenToExternalDrag:function(t,e,i){var n,r=this,s=this.view.calendar,l=Tt(t);new le(this,{listenStart:function(){r.isDraggingExternal=!0},hitOver:function(t){(n=r.computeExternalDrop(t.component.getHitSpan(t),l))&&!s.isExternalSpanAllowed(r.eventToSpan(n),n,l.eventProps)&&(o(),n=null),n&&r.renderDrag(n)},hitOut:function(){n=null},hitDone:function(){a(),r.unrenderDrag()},dragStop:function(){n&&r.view.reportExternalDrop(l,n,t,e,i)},listenStop:function(){r.isDraggingExternal=!1}}).startDrag(e)},computeExternalDrop:function(t,e){var i={start:this.view.calendar.applyTimezone(t.start),end:null};return e.startTime&&!i.start.hasTime()&&i.start.time(e.startTime),e.duration&&(i.end=i.start.clone().add(e.duration)),i},renderDrag:function(){},unrenderDrag:function(){},segResizeMousedown:function(t,e,i){var n,r=this,s=this.view,l=s.calendar,d=t.el,h=t.event,c=l.getEventEnd(h);new le(this,{distance:5,scroll:s.opt("dragScroll"),subjectEl:d,dragStart:function(e){r.triggerSegMouseout(t,e),r.segResizeStart(t,e)},hitOver:function(e,a,d){var u=r.getHitSpan(d),p=r.getHitSpan(e);(n=i?r.computeEventStartResize(u,p,h):r.computeEventEndResize(u,p,h))&&(l.isEventSpanAllowed(r.eventToSpan(n),h)?n.start.isSame(h.start)&&n.end.isSame(c)&&(n=null):(o(),n=null)),n&&(s.hideEvent(h),r.renderEventResize(n,t))},hitOut:function(){n=null},hitDone:function(){r.unrenderEventResize(),s.showEvent(h),a()},dragStop:function(e){r.segResizeStop(t,e),n&&s.reportEventResize(h,n,this.largeUnit,d,e)}}).mousedown(e)},segResizeStart:function(t,e){this.isResizingSeg=!0,this.view.trigger("eventResizeStart",t.el[0],t.event,e,{})},segResizeStop:function(t,e){this.isResizingSeg=!1,this.view.trigger("eventResizeStop",t.el[0],t.event,e,{})},computeEventStartResize:function(t,e,i){return this.computeEventResize("start",t,e,i)},computeEventEndResize:function(t,e,i){return this.computeEventResize("end",t,e,i)},computeEventResize:function(t,e,i,n){var r,s,o=this.view.calendar,a=this.diffDates(i[t],e[t]);return(r={start:n.start.clone(),end:o.getEventEnd(n),allDay:n.allDay}).allDay&&P(a)&&(r.allDay=!1,o.normalizeEventTimes(r)),r[t].add(a),r.start.isBefore(r.end)||(s=this.minResizeDuration||(n.allDay?o.defaultAllDayEventDuration:o.defaultTimedEventDuration),"start"==t?r.start=r.end.clone().subtract(s):r.end=r.start.clone().add(s)),r},renderEventResize:function(){},unrenderEventResize:function(){},getEventTimeText:function(t,e,i){return null==e&&(e=this.eventTimeFormat),null==i&&(i=this.displayEventEnd),this.displayEventTime&&t.start.hasTime()?i&&t.end?this.view.formatRange(t,e):t.start.format(e):""},getSegClasses:function(t,e,i){var n=t.event,r=["fc-event",t.isStart?"fc-start":"fc-not-start",t.isEnd?"fc-end":"fc-not-end"].concat(n.className,n.source?n.source.className:[]);return e&&r.push("fc-draggable"),i&&r.push("fc-resizable"),r},getSegSkinCss:function(t){var e=t.event,i=this.view,n=e.source||{},r=e.color,s=n.color,o=i.opt("eventColor");return{"background-color":e.backgroundColor||r||n.backgroundColor||s||i.opt("eventBackgroundColor")||o,"border-color":e.borderColor||r||n.borderColor||s||i.opt("eventBorderColor")||o,color:e.textColor||n.textColor||i.opt("eventTextColor")}},eventToSegs:function(t){return this.eventsToSegs([t])},eventToSpan:function(t){return this.eventToSpans(t)[0]},eventToSpans:function(t){var e=this.eventToRange(t);return this.eventRangeToSpans(e,t)},eventsToSegs:function(e,i){var n=this,r=Dt(e),s=[];return t.each(r,function(t,e){var r,o=[];for(r=0;r<e.length;r++)o.push(n.eventToRange(e[r]));if(Ct(e[0]))for(o=n.invertRanges(o),r=0;r<o.length;r++)s.push.apply(s,n.eventRangeToSegs(o[r],e[0],i));else for(r=0;r<o.length;r++)s.push.apply(s,n.eventRangeToSegs(o[r],e[r],i))}),s},eventToRange:function(t){return{start:t.start.clone().stripZone(),end:(t.end?t.end.clone():this.view.calendar.getDefaultEventEnd(null!=t.allDay?t.allDay:!t.start.hasTime(),t.start)).stripZone()}},eventRangeToSegs:function(t,e,i){var n,r=this.eventRangeToSpans(t,e),s=[];for(n=0;n<r.length;n++)s.push.apply(s,this.eventSpanToSegs(r[n],e,i));return s},eventRangeToSpans:function(e){return[t.extend({},e)]},eventSpanToSegs:function(t,e,i){var n,r,s=i?i(t):this.spanToSegs(t);for(n=0;n<s.length;n++)(r=s[n]).event=e,r.eventStartMS=+t.start,r.eventDurationMS=t.end-t.start;return s},invertRanges:function(t){var e,i,n=this.view,r=n.start.clone(),s=n.end.clone(),o=[],a=r;for(t.sort(Et),e=0;e<t.length;e++)(i=t[e]).start>a&&o.push({start:a,end:i.start}),a=i.end;return a<s&&o.push({start:a,end:s}),o},sortEventSegs:function(t){t.sort(it(this,"compareEventSegs"))},compareEventSegs:function(t,e){return t.eventStartMS-e.eventStartMS||e.eventDurationMS-t.eventDurationMS||e.event.allDay-t.event.allDay||T(t.event,e.event,this.view.eventOrderSpecs)}}),At.isBgEvent=St,At.dataAttrPrefix="";var ce=At.DayTableMixin={breakOnWeeks:!1,dayDates:null,dayIndices:null,daysPerRow:null,rowCnt:null,colCnt:null,colHeadFormat:null,updateDayTable:function(){for(var t,e,i,n=this.view,r=this.start.clone(),s=-1,o=[],a=[];r.isBefore(this.end);)n.isHiddenDay(r)?o.push(s+.5):(s++,o.push(s),a.push(r.clone())),r.add(1,"days");if(this.breakOnWeeks){for(e=a[0].day(),t=1;t<a.length&&a[t].day()!=e;t++);i=Math.ceil(a.length/t)}else i=1,t=a.length;this.dayDates=a,this.dayIndices=o,this.daysPerRow=t,this.rowCnt=i,this.updateDayTableCols()},updateDayTableCols:function(){this.colCnt=this.computeColCnt(),this.colHeadFormat=this.view.opt("columnFormat")||this.computeColHeadFormat()},computeColCnt:function(){return this.daysPerRow},getCellDate:function(t,e){return this.dayDates[this.getCellDayIndex(t,e)].clone()},getCellRange:function(t,e){var i=this.getCellDate(t,e);return{start:i,end:i.clone().add(1,"days")}},getCellDayIndex:function(t,e){return t*this.daysPerRow+this.getColDayIndex(e)},getColDayIndex:function(t){return this.isRTL?this.colCnt-1-t:t},getDateDayIndex:function(t){var e=this.dayIndices,i=t.diff(this.start,"days");return i<0?e[0]-1:i>=e.length?e[e.length-1]+1:e[i]},computeColHeadFormat:function(){return this.rowCnt>1||this.colCnt>10?"ddd":this.colCnt>1?this.view.opt("dayOfMonthFormat"):"dddd"},sliceRangeByRow:function(t){var e,i,n,r,s,o=this.daysPerRow,a=this.view.computeDayRange(t),l=this.getDateDayIndex(a.start),d=this.getDateDayIndex(a.end.clone().subtract(1,"days")),h=[];for(e=0;e<this.rowCnt;e++)n=(i=e*o)+o-1,r=Math.max(l,i),s=Math.min(d,n),(r=Math.ceil(r))<=(s=Math.floor(s))&&h.push({row:e,firstRowDayIndex:r-i,lastRowDayIndex:s-i,isStart:r===l,isEnd:s===d});return h},sliceRangeByDay:function(t){var e,i,n,r,s,o,a=this.daysPerRow,l=this.view.computeDayRange(t),d=this.getDateDayIndex(l.start),h=this.getDateDayIndex(l.end.clone().subtract(1,"days")),c=[];for(e=0;e<this.rowCnt;e++)for(n=(i=e*a)+a-1,r=i;r<=n;r++)s=Math.max(d,r),o=Math.min(h,r),(s=Math.ceil(s))<=(o=Math.floor(o))&&c.push({row:e,firstRowDayIndex:s-i,lastRowDayIndex:o-i,isStart:s===d,isEnd:o===h});return c},renderHeadHtml:function(){return'<div class="fc-row '+this.view.widgetHeaderClass+'"><table><thead>'+this.renderHeadTrHtml()+"</thead></table></div>"},renderHeadIntroHtml:function(){return this.renderIntroHtml()},renderHeadTrHtml:function(){return"<tr>"+(this.isRTL?"":this.renderHeadIntroHtml())+this.renderHeadDateCellsHtml()+(this.isRTL?this.renderHeadIntroHtml():"")+"</tr>"},renderHeadDateCellsHtml:function(){var t,e,i=[];for(t=0;t<this.colCnt;t++)e=this.getCellDate(0,t),i.push(this.renderHeadDateCellHtml(e));return i.join("")},renderHeadDateCellHtml:function(t,e,i){return'<th class="fc-day-header '+this.view.widgetHeaderClass+" fc-"+Bt[t.day()]+'"'+(1==this.rowCnt?' data-date="'+t.format("YYYY-MM-DD")+'"':"")+(e>1?' colspan="'+e+'"':"")+(i?" "+i:"")+">"+X(t.format(this.colHeadFormat))+"</th>"},renderBgTrHtml:function(t){return"<tr>"+(this.isRTL?"":this.renderBgIntroHtml(t))+this.renderBgCellsHtml(t)+(this.isRTL?this.renderBgIntroHtml(t):"")+"</tr>"},renderBgIntroHtml:function(){return this.renderIntroHtml()},renderBgCellsHtml:function(t){var e,i,n=[];for(e=0;e<this.colCnt;e++)i=this.getCellDate(t,e),n.push(this.renderBgCellHtml(i));return n.join("")},renderBgCellHtml:function(t,e){var i=this.view,n=this.getDayClasses(t);return n.unshift("fc-day",i.widgetContentClass),'<td class="'+n.join(" ")+'" data-date="'+t.format("YYYY-MM-DD")+'"'+(e?" "+e:"")+"></td>"},renderIntroHtml:function(){},bookendCells:function(t){var e=this.renderIntroHtml();e&&(this.isRTL?t.append(e):t.prepend(e))}},ue=At.DayGrid=he.extend(ce,{numbersVisible:!1,bottomCoordPadding:0,rowEls:null,cellEls:null,helperEls:null,rowCoordCache:null,colCoordCache:null,renderDates:function(t){var e,i,n=this.view,r=this.rowCnt,s=this.colCnt,o="";for(e=0;e<r;e++)o+=this.renderDayRowHtml(e,t);for(this.el.html(o),this.rowEls=this.el.find(".fc-row"),this.cellEls=this.el.find(".fc-day"),this.rowCoordCache=new oe({els:this.rowEls,isVertical:!0}),this.colCoordCache=new oe({els:this.cellEls.slice(0,this.colCnt),isHorizontal:!0}),e=0;e<r;e++)for(i=0;i<s;i++)n.trigger("dayRender",null,this.getCellDate(e,i),this.getCellEl(e,i))},unrenderDates:function(){this.removeSegPopover()},renderBusinessHours:function(){var t=this.view.calendar.getBusinessHoursEvents(!0),e=this.eventsToSegs(t);this.renderFill("businessHours",e,"bgevent")},renderDayRowHtml:function(t,e){var i=["fc-row","fc-week",this.view.widgetContentClass];return e&&i.push("fc-rigid"),'<div class="'+i.join(" ")+'"><div class="fc-bg"><table>'+this.renderBgTrHtml(t)+'</table></div><div class="fc-content-skeleton"><table>'+(this.numbersVisible?"<thead>"+this.renderNumberTrHtml(t)+"</thead>":"")+"</table></div></div>"},renderNumberTrHtml:function(t){return"<tr>"+(this.isRTL?"":this.renderNumberIntroHtml(t))+this.renderNumberCellsHtml(t)+(this.isRTL?this.renderNumberIntroHtml(t):"")+"</tr>"},renderNumberIntroHtml:function(){return this.renderIntroHtml()},renderNumberCellsHtml:function(t){var e,i,n=[];for(e=0;e<this.colCnt;e++)i=this.getCellDate(t,e),n.push(this.renderNumberCellHtml(i));return n.join("")},renderNumberCellHtml:function(t){var e;return this.view.dayNumbersVisible?((e=this.getDayClasses(t)).unshift("fc-day-number"),'<td class="'+e.join(" ")+'" data-date="'+t.format()+'">'+t.date()+"</td>"):"<td/>"},computeEventTimeFormat:function(){return this.view.opt("extraSmallTimeFormat")},computeDisplayEventEnd:function(){return 1==this.colCnt},rangeUpdated:function(){this.updateDayTable()},spanToSegs:function(t){var e,i,n=this.sliceRangeByRow(t);for(e=0;e<n.length;e++)i=n[e],this.isRTL?(i.leftCol=this.daysPerRow-1-i.lastRowDayIndex,i.rightCol=this.daysPerRow-1-i.firstRowDayIndex):(i.leftCol=i.firstRowDayIndex,i.rightCol=i.lastRowDayIndex);return n},prepareHits:function(){this.colCoordCache.build(),this.rowCoordCache.build(),this.rowCoordCache.bottoms[this.rowCnt-1]+=this.bottomCoordPadding},releaseHits:function(){this.colCoordCache.clear(),this.rowCoordCache.clear()},queryHit:function(t,e){var i=this.colCoordCache.getHorizontalIndex(t),n=this.rowCoordCache.getVerticalIndex(e);if(null!=n&&null!=i)return this.getCellHit(n,i)},getHitSpan:function(t){return this.getCellRange(t.row,t.col)},getHitEl:function(t){return this.getCellEl(t.row,t.col)},getCellHit:function(t,e){return{row:t,col:e,component:this,left:this.colCoordCache.getLeftOffset(e),right:this.colCoordCache.getRightOffset(e),top:this.rowCoordCache.getTopOffset(t),bottom:this.rowCoordCache.getBottomOffset(t)}},getCellEl:function(t,e){return this.cellEls.eq(t*this.colCnt+e)},renderDrag:function(t,e){if(this.renderHighlight(this.eventToSpan(t)),e&&!e.el.closest(this.el).length)return this.renderEventLocationHelper(t,e),this.applyDragOpacity(this.helperEls),!0},unrenderDrag:function(){this.unrenderHighlight(),this.unrenderHelper()},renderEventResize:function(t,e){this.renderHighlight(this.eventToSpan(t)),this.renderEventLocationHelper(t,e)},unrenderEventResize:function(){this.unrenderHighlight(),this.unrenderHelper()},renderHelper:function(e,i){var n,r=[],s=this.eventToSegs(e);s=this.renderFgSegEls(s),n=this.renderSegRows(s),this.rowEls.each(function(e,s){var o,a=t(s),l=t('<div class="fc-helper-skeleton"><table/></div>');o=i&&i.row===e?i.el.position().top:a.find(".fc-content-skeleton tbody").position().top,l.css("top",o).find("table").append(n[e].tbodyEl),a.append(l),r.push(l[0])}),this.helperEls=t(r)},unrenderHelper:function(){this.helperEls&&(this.helperEls.remove(),this.helperEls=null)},fillSegTag:"td",renderFill:function(e,i,n){var r,s,o,a=[];for(i=this.renderFillSegEls(e,i),r=0;r<i.length;r++)s=i[r],o=this.renderFillRow(e,s,n),this.rowEls.eq(s.row).append(o),a.push(o[0]);return this.elsByFill[e]=t(a),i},renderFillRow:function(e,i,n){var r,s,o=this.colCnt,a=i.leftCol,l=i.rightCol+1;return n=n||e.toLowerCase(),s=(r=t('<div class="fc-'+n+'-skeleton"><table><tr/></table></div>')).find("tr"),a>0&&s.append('<td colspan="'+a+'"/>'),s.append(i.el.attr("colspan",l-a)),l<o&&s.append('<td colspan="'+(o-l)+'"/>'),this.bookendCells(s),r}});ue.mixin({rowStructs:null,unrenderEvents:function(){this.removeSegPopover(),he.prototype.unrenderEvents.apply(this,arguments)},getEventSegs:function(){return he.prototype.getEventSegs.call(this).concat(this.popoverSegs||[])},renderBgSegs:function(e){var i=t.grep(e,function(t){return t.event.allDay});return he.prototype.renderBgSegs.call(this,i)},renderFgSegs:function(e){var i;return e=this.renderFgSegEls(e),i=this.rowStructs=this.renderSegRows(e),this.rowEls.each(function(e,n){t(n).find(".fc-content-skeleton > table").append(i[e].tbodyEl)}),e},unrenderFgSegs:function(){for(var t,e=this.rowStructs||[];t=e.pop();)t.tbodyEl.remove();this.rowStructs=null},renderSegRows:function(t){var e,i,n=[];for(e=this.groupSegRows(t),i=0;i<e.length;i++)n.push(this.renderSegRow(i,e[i]));return n},fgSegHtml:function(t,e){var i,n,r=this.view,s=t.event,o=r.isEventDraggable(s),a=!e&&s.allDay&&t.isStart&&r.isEventResizableFromStart(s),l=!e&&s.allDay&&t.isEnd&&r.isEventResizableFromEnd(s),d=this.getSegClasses(t,o,a||l),h=J(this.getSegSkinCss(t)),c="";return d.unshift("fc-day-grid-event","fc-h-event"),t.isStart&&(i=this.getEventTimeText(s))&&(c='<span class="fc-time">'+X(i)+"</span>"),n='<span class="fc-title">'+(X(s.title||"")||"&nbsp;")+"</span>",'<a class="'+d.join(" ")+'"'+(s.url?' href="'+X(s.url)+'"':"")+(h?' style="'+h+'"':"")+'><div class="fc-content">'+(this.isRTL?n+" "+c:c+" "+n)+"</div>"+(a?'<div class="fc-resizer fc-start-resizer" />':"")+(l?'<div class="fc-resizer fc-end-resizer" />':"")+"</a>"},renderSegRow:function(e,i){function n(e){for(;o<e;)(h=(_[r-1]||[])[o])?h.attr("rowspan",parseInt(h.attr("rowspan")||1,10)+1):(h=t("<td/>"),a.append(h)),m[r][o]=h,_[r][o]=h,o++}var r,s,o,a,l,d,h,c=this.colCnt,u=this.buildSegLevels(i),p=Math.max(1,u.length),f=t("<tbody/>"),g=[],m=[],_=[];for(r=0;r<p;r++){if(s=u[r],o=0,a=t("<tr/>"),g.push([]),m.push([]),_.push([]),s)for(l=0;l<s.length;l++){for(n((d=s[l]).leftCol),h=t('<td class="fc-event-container"/>').append(d.el),d.leftCol!=d.rightCol?h.attr("colspan",d.rightCol-d.leftCol+1):_[r][o]=h;o<=d.rightCol;)m[r][o]=h,g[r][o]=d,o++;a.append(h)}n(c),this.bookendCells(a),f.append(a)}return{row:e,tbodyEl:f,cellMatrix:m,segMatrix:g,segLevels:u,segs:i}},buildSegLevels:function(t){var e,i,n,r=[];for(this.sortEventSegs(t),e=0;e<t.length;e++){for(i=t[e],
n=0;n<r.length&&kt(i,r[n]);n++);i.level=n,(r[n]||(r[n]=[])).push(i)}for(n=0;n<r.length;n++)r[n].sort(Rt);return r},groupSegRows:function(t){var e,i=[];for(e=0;e<this.rowCnt;e++)i.push([]);for(e=0;e<t.length;e++)i[t[e].row].push(t[e]);return i}}),ue.mixin({segPopover:null,popoverSegs:null,removeSegPopover:function(){this.segPopover&&this.segPopover.hide()},limitRows:function(t){var e,i,n=this.rowStructs||[];for(e=0;e<n.length;e++)this.unlimitRow(e),!1!==(i=!!t&&("number"==typeof t?t:this.computeRowLevelLimit(e)))&&this.limitRow(e,i)},computeRowLevelLimit:function(e){function i(e,i){s=Math.max(s,t(i).outerHeight())}var n,r,s,o=this.rowEls.eq(e).height(),a=this.rowStructs[e].tbodyEl.children();for(n=0;n<a.length;n++)if(r=a.eq(n).removeClass("fc-limited"),s=0,r.find("> td > :first-child").each(i),r.position().top+s>o)return n;return!1},limitRow:function(e,i){function n(n){for(;S<n;)(d=y.getCellSegs(e,S,i)).length&&(u=s[i-1][S],v=y.renderMoreLink(e,S,d),_=t("<div/>").append(v),u.append(_),b.push(_[0])),S++}var r,s,o,a,l,d,h,c,u,p,f,g,m,_,v,y=this,w=this.rowStructs[e],b=[],S=0;if(i&&i<w.segLevels.length){for(r=w.segLevels[i-1],s=w.cellMatrix,o=w.tbodyEl.children().slice(i).addClass("fc-limited").get(),a=0;a<r.length;a++){for(n((l=r[a]).leftCol),c=[],h=0;S<=l.rightCol;)d=this.getCellSegs(e,S,i),c.push(d),h+=d.length,S++;if(h){for(p=(u=s[i-1][l.leftCol]).attr("rowspan")||1,f=[],g=0;g<c.length;g++)m=t('<td class="fc-more-cell"/>').attr("rowspan",p),d=c[g],v=this.renderMoreLink(e,l.leftCol+g,[l].concat(d)),_=t("<div/>").append(v),m.append(_),f.push(m[0]),b.push(m[0]);u.addClass("fc-limited").after(t(f)),o.push(u[0])}}n(this.colCnt),w.moreEls=t(b),w.limitedEls=t(o)}},unlimitRow:function(t){var e=this.rowStructs[t];e.moreEls&&(e.moreEls.remove(),e.moreEls=null),e.limitedEls&&(e.limitedEls.removeClass("fc-limited"),e.limitedEls=null)},renderMoreLink:function(e,i,n){var r=this,s=this.view;return t('<a class="fc-more"/>').text(this.getMoreLinkText(n.length)).on("click",function(o){var a=s.opt("eventLimitClick"),l=r.getCellDate(e,i),d=t(this),h=r.getCellEl(e,i),c=r.getCellSegs(e,i),u=r.resliceDaySegs(c,l),p=r.resliceDaySegs(n,l);"function"==typeof a&&(a=s.trigger("eventLimitClick",null,{date:l,dayEl:h,moreEl:d,segs:u,hiddenSegs:p},o)),"popover"===a?r.showSegPopover(e,i,d,u):"string"==typeof a&&s.calendar.zoomTo(l,a)})},showSegPopover:function(t,e,i,n){var r,s,o=this,a=this.view,l=i.parent();r=1==this.rowCnt?a.el:this.rowEls.eq(t),s={className:"fc-more-popover",content:this.renderSegPopoverContent(t,e,n),parentEl:this.el,top:r.offset().top,autoHide:!0,viewportConstrain:a.opt("popoverViewportConstrain"),hide:function(){o.segPopover.removeElement(),o.segPopover=null,o.popoverSegs=null}},this.isRTL?s.right=l.offset().left+l.outerWidth()+1:s.left=l.offset().left-1,this.segPopover=new se(s),this.segPopover.show()},renderSegPopoverContent:function(e,i,n){var r,s=this.view,o=s.opt("theme"),a=this.getCellDate(e,i).format(s.opt("dayPopoverFormat")),l=t('<div class="fc-header '+s.widgetHeaderClass+'"><span class="fc-close '+(o?"ui-icon ui-icon-closethick":"fc-icon fc-icon-x")+'"></span><span class="fc-title">'+X(a)+'</span><div class="fc-clear"/></div><div class="fc-body '+s.widgetContentClass+'"><div class="fc-event-container"></div></div>'),d=l.find(".fc-event-container");for(n=this.renderFgSegEls(n,!0),this.popoverSegs=n,r=0;r<n.length;r++)this.prepareHits(),n[r].hit=this.getCellHit(e,i),this.releaseHits(),d.append(n[r].el);return l},resliceDaySegs:function(e,i){var n=t.map(e,function(t){return t.event}),r=i.clone(),s={start:r,end:r.clone().add(1,"days")};return e=this.eventsToSegs(n,function(t){var e=$(t,s);return e?[e]:[]}),this.sortEventSegs(e),e},getMoreLinkText:function(t){var e=this.view.opt("eventLimitText");return"function"==typeof e?e(t):"+"+t+" "+e},getCellSegs:function(t,e,i){for(var n,r=this.rowStructs[t].segMatrix,s=i||0,o=[];s<r.length;)(n=r[s][e])&&o.push(n),s++;return o}});var pe=At.TimeGrid=he.extend(ce,{slotDuration:null,snapDuration:null,snapsPerSlot:null,minTime:null,maxTime:null,labelFormat:null,labelInterval:null,colEls:null,slatEls:null,nowIndicatorEls:null,colCoordCache:null,slatCoordCache:null,constructor:function(){he.apply(this,arguments),this.processOptions()},renderDates:function(){this.el.html(this.renderHtml()),this.colEls=this.el.find(".fc-day"),this.slatEls=this.el.find(".fc-slats tr"),this.colCoordCache=new oe({els:this.colEls,isHorizontal:!0}),this.slatCoordCache=new oe({els:this.slatEls,isVertical:!0}),this.renderContentSkeleton()},renderHtml:function(){return'<div class="fc-bg"><table>'+this.renderBgTrHtml(0)+'</table></div><div class="fc-slats"><table>'+this.renderSlatRowHtml()+"</table></div>"},renderSlatRowHtml:function(){for(var t,i,n,r=this.view,s=this.isRTL,o="",a=e.duration(+this.minTime);a<this.maxTime;)t=this.start.clone().time(a),i=et(Y(a,this.labelInterval)),n='<td class="fc-axis fc-time '+r.widgetContentClass+'" '+r.axisStyleAttr()+">"+(i?"<span>"+X(t.format(this.labelFormat))+"</span>":"")+"</td>",o+='<tr data-time="'+t.format("HH:mm:ss")+'"'+(i?"":' class="fc-minor"')+">"+(s?"":n)+'<td class="'+r.widgetContentClass+'"/>'+(s?n:"")+"</tr>",a.add(this.slotDuration);return o},processOptions:function(){var i,n=this.view,r=n.opt("slotDuration"),s=n.opt("snapDuration");r=e.duration(r),s=s?e.duration(s):r,this.slotDuration=r,this.snapDuration=s,this.snapsPerSlot=r/s,this.minResizeDuration=s,this.minTime=e.duration(n.opt("minTime")),this.maxTime=e.duration(n.opt("maxTime")),i=n.opt("slotLabelFormat"),t.isArray(i)&&(i=i[i.length-1]),this.labelFormat=i||n.opt("axisFormat")||n.opt("smallTimeFormat"),i=n.opt("slotLabelInterval"),this.labelInterval=i?e.duration(i):this.computeLabelInterval(r)},computeLabelInterval:function(t){var i,n,r;for(i=Re.length-1;i>=0;i--)if(et(r=Y(n=e.duration(Re[i]),t))&&r>1)return n;return e.duration(t)},computeEventTimeFormat:function(){return this.view.opt("noMeridiemTimeFormat")},computeDisplayEventEnd:function(){return!0},prepareHits:function(){this.colCoordCache.build(),this.slatCoordCache.build()},releaseHits:function(){this.colCoordCache.clear()},queryHit:function(t,e){var i=this.snapsPerSlot,n=this.colCoordCache,r=this.slatCoordCache,s=n.getHorizontalIndex(t),o=r.getVerticalIndex(e);if(null!=s&&null!=o){var a=r.getTopOffset(o),l=r.getHeight(o),d=(e-a)/l,h=Math.floor(d*i),c=a+h/i*l,u=a+(h+1)/i*l;return{col:s,snap:o*i+h,component:this,left:n.getLeftOffset(s),right:n.getRightOffset(s),top:c,bottom:u}}},getHitSpan:function(t){var e=this.getCellDate(0,t.col),i=this.computeSnapTime(t.snap);return e.time(i),{start:e,end:e.clone().add(this.snapDuration)}},getHitEl:function(t){return this.colEls.eq(t.col)},rangeUpdated:function(){this.updateDayTable()},computeSnapTime:function(t){return e.duration(this.minTime+this.snapDuration*t)},spanToSegs:function(t){var e,i=this.sliceRangeByTimes(t);for(e=0;e<i.length;e++)this.isRTL?i[e].col=this.daysPerRow-1-i[e].dayIndex:i[e].col=i[e].dayIndex;return i},sliceRangeByTimes:function(t){var e,i,n,r=[];for(i=0;i<this.daysPerRow;i++)(e=$(t,{start:(n=this.dayDates[i].clone()).clone().time(this.minTime),end:n.clone().time(this.maxTime)}))&&(e.dayIndex=i,r.push(e));return r},updateSize:function(t){this.slatCoordCache.build(),t&&this.updateSegVerticals([].concat(this.fgSegs||[],this.bgSegs||[],this.businessSegs||[]))},computeDateTop:function(t,i){return this.computeTimeTop(e.duration(t-i.clone().stripTime()))},computeTimeTop:function(t){var e,i,n=this.slatEls.length,r=(t-this.minTime)/this.slotDuration;return r=Math.max(0,r),r=Math.min(n,r),e=Math.floor(r),i=r-(e=Math.min(e,n-1)),this.slatCoordCache.getTopPosition(e)+this.slatCoordCache.getHeight(e)*i},renderDrag:function(t,e){if(e){this.renderEventLocationHelper(t,e);for(var i=0;i<this.helperSegs.length;i++)this.applyDragOpacity(this.helperSegs[i].el);return!0}this.renderHighlight(this.eventToSpan(t))},unrenderDrag:function(){this.unrenderHelper(),this.unrenderHighlight()},renderEventResize:function(t,e){this.renderEventLocationHelper(t,e)},unrenderEventResize:function(){this.unrenderHelper()},renderHelper:function(t,e){this.renderHelperSegs(this.eventToSegs(t),e)},unrenderHelper:function(){this.unrenderHelperSegs()},renderBusinessHours:function(){var t=this.view.calendar.getBusinessHoursEvents(),e=this.eventsToSegs(t);this.renderBusinessSegs(e)},unrenderBusinessHours:function(){this.unrenderBusinessSegs()},getNowIndicatorUnit:function(){return"minute"},renderNowIndicator:function(e){var i,n=this.spanToSegs({start:e,end:e}),r=this.computeDateTop(e,e),s=[];for(i=0;i<n.length;i++)s.push(t('<div class="fc-now-indicator fc-now-indicator-line"></div>').css("top",r).appendTo(this.colContainerEls.eq(n[i].col))[0]);n.length>0&&s.push(t('<div class="fc-now-indicator fc-now-indicator-arrow"></div>').css("top",r).appendTo(this.el.find(".fc-content-skeleton"))[0]),this.nowIndicatorEls=t(s)},unrenderNowIndicator:function(){this.nowIndicatorEls&&(this.nowIndicatorEls.remove(),this.nowIndicatorEls=null)},renderSelection:function(t){this.view.opt("selectHelper")?this.renderEventLocationHelper(t):this.renderHighlight(t)},unrenderSelection:function(){this.unrenderHelper(),this.unrenderHighlight()},renderHighlight:function(t){this.renderHighlightSegs(this.spanToSegs(t))},unrenderHighlight:function(){this.unrenderHighlightSegs()}});pe.mixin({colContainerEls:null,fgContainerEls:null,bgContainerEls:null,helperContainerEls:null,highlightContainerEls:null,businessContainerEls:null,fgSegs:null,bgSegs:null,helperSegs:null,highlightSegs:null,businessSegs:null,renderContentSkeleton:function(){var e,i,n="";for(e=0;e<this.colCnt;e++)n+='<td><div class="fc-content-col"><div class="fc-event-container fc-helper-container"></div><div class="fc-event-container"></div><div class="fc-highlight-container"></div><div class="fc-bgevent-container"></div><div class="fc-business-container"></div></div></td>';i=t('<div class="fc-content-skeleton"><table><tr>'+n+"</tr></table></div>"),this.colContainerEls=i.find(".fc-content-col"),this.helperContainerEls=i.find(".fc-helper-container"),this.fgContainerEls=i.find(".fc-event-container:not(.fc-helper-container)"),this.bgContainerEls=i.find(".fc-bgevent-container"),this.highlightContainerEls=i.find(".fc-highlight-container"),this.businessContainerEls=i.find(".fc-business-container"),this.bookendCells(i.find("tr")),this.el.append(i)},renderFgSegs:function(t){return t=this.renderFgSegsIntoContainers(t,this.fgContainerEls),this.fgSegs=t,t},unrenderFgSegs:function(){this.unrenderNamedSegs("fgSegs")},renderHelperSegs:function(t,e){var i,n,r;for(t=this.renderFgSegsIntoContainers(t,this.helperContainerEls),i=0;i<t.length;i++)n=t[i],e&&e.col===n.col&&(r=e.el,n.el.css({left:r.css("left"),right:r.css("right"),"margin-left":r.css("margin-left"),"margin-right":r.css("margin-right")}));this.helperSegs=t},unrenderHelperSegs:function(){this.unrenderNamedSegs("helperSegs")},renderBgSegs:function(t){return t=this.renderFillSegEls("bgEvent",t),this.updateSegVerticals(t),this.attachSegsByCol(this.groupSegsByCol(t),this.bgContainerEls),this.bgSegs=t,t},unrenderBgSegs:function(){this.unrenderNamedSegs("bgSegs")},renderHighlightSegs:function(t){t=this.renderFillSegEls("highlight",t),this.updateSegVerticals(t),this.attachSegsByCol(this.groupSegsByCol(t),this.highlightContainerEls),this.highlightSegs=t},unrenderHighlightSegs:function(){this.unrenderNamedSegs("highlightSegs")},renderBusinessSegs:function(t){t=this.renderFillSegEls("businessHours",t),this.updateSegVerticals(t),this.attachSegsByCol(this.groupSegsByCol(t),this.businessContainerEls),this.businessSegs=t},unrenderBusinessSegs:function(){this.unrenderNamedSegs("businessSegs")},groupSegsByCol:function(t){var e,i=[];for(e=0;e<this.colCnt;e++)i.push([]);for(e=0;e<t.length;e++)i[t[e].col].push(t[e]);return i},attachSegsByCol:function(t,e){var i,n,r;for(i=0;i<this.colCnt;i++)for(n=t[i],r=0;r<n.length;r++)e.eq(i).append(n[r].el)},unrenderNamedSegs:function(t){var e,i=this[t];if(i){for(e=0;e<i.length;e++)i[e].el.remove();this[t]=null}},renderFgSegsIntoContainers:function(t,e){var i,n;for(t=this.renderFgSegEls(t),i=this.groupSegsByCol(t),n=0;n<this.colCnt;n++)this.updateFgSegCoords(i[n]);return this.attachSegsByCol(i,e),t},fgSegHtml:function(t,e){var i,n,r,s=this.view,o=t.event,a=s.isEventDraggable(o),l=!e&&t.isStart&&s.isEventResizableFromStart(o),d=!e&&t.isEnd&&s.isEventResizableFromEnd(o),h=this.getSegClasses(t,a,l||d),c=J(this.getSegSkinCss(t));return h.unshift("fc-time-grid-event","fc-v-event"),s.isMultiDayEvent(o)?(t.isStart||t.isEnd)&&(i=this.getEventTimeText(t),n=this.getEventTimeText(t,"LT"),r=this.getEventTimeText(t,null,!1)):(i=this.getEventTimeText(o),n=this.getEventTimeText(o,"LT"),r=this.getEventTimeText(o,null,!1)),'<a class="'+h.join(" ")+'"'+(o.url?' href="'+X(o.url)+'"':"")+(c?' style="'+c+'"':"")+'><div class="fc-content">'+(i?'<div class="fc-time" data-start="'+X(r)+'" data-full="'+X(n)+'"><span>'+X(i)+"</span></div>":"")+(o.title?'<div class="fc-title">'+X(o.title)+"</div>":"")+'</div><div class="fc-bg"/>'+(d?'<div class="fc-resizer fc-end-resizer" />':"")+"</a>"},updateSegVerticals:function(t){this.computeSegVerticals(t),this.assignSegVerticals(t)},computeSegVerticals:function(t){var e,i;for(e=0;e<t.length;e++)(i=t[e]).top=this.computeDateTop(i.start,i.start),i.bottom=this.computeDateTop(i.end,i.start)},assignSegVerticals:function(t){var e,i;for(e=0;e<t.length;e++)(i=t[e]).el.css(this.generateSegVerticalCss(i))},generateSegVerticalCss:function(t){return{top:t.top,bottom:-t.bottom}},updateFgSegCoords:function(t){this.computeSegVerticals(t),this.computeFgSegHorizontals(t),this.assignSegVerticals(t),this.assignFgSegHorizontals(t)},computeFgSegHorizontals:function(t){var e,i,n;if(this.sortEventSegs(t),Ht(e=$t(t)),i=e[0]){for(n=0;n<i.length;n++)Mt(i[n]);for(n=0;n<i.length;n++)this.computeFgSegForwardBack(i[n],0,0)}},computeFgSegForwardBack:function(t,e,i){var n,r=t.forwardSegs;if(t.forwardCoord===undefined)for(r.length?(this.sortForwardSegs(r),this.computeFgSegForwardBack(r[0],e+1,i),t.forwardCoord=r[0].backwardCoord):t.forwardCoord=1,t.backwardCoord=t.forwardCoord-(t.forwardCoord-i)/(e+1),n=0;n<r.length;n++)this.computeFgSegForwardBack(r[n],0,t.forwardCoord)},sortForwardSegs:function(t){t.sort(it(this,"compareForwardSegs"))},compareForwardSegs:function(t,e){return e.forwardPressure-t.forwardPressure||(t.backwardCoord||0)-(e.backwardCoord||0)||this.compareEventSegs(t,e)},assignFgSegHorizontals:function(t){var e,i;for(e=0;e<t.length;e++)(i=t[e]).el.css(this.generateFgSegHorizontalCss(i)),i.bottom-i.top<30&&i.el.addClass("fc-short")},generateFgSegHorizontalCss:function(t){var e,i,n=this.view.opt("slotEventOverlap"),r=t.backwardCoord,s=t.forwardCoord,o=this.generateSegVerticalCss(t);return n&&(s=Math.min(1,r+2*(s-r))),this.isRTL?(e=1-s,i=r):(e=r,i=1-s),o.zIndex=t.level+1,o.left=100*e+"%",o.right=100*i+"%",n&&t.forwardPressure&&(o[this.isRTL?"marginLeft":"marginRight"]=20),o}});var fe=At.View=_t.extend({type:null,name:null,title:null,calendar:null,options:null,el:null,displaying:null,isSkeletonRendered:!1,isEventsRendered:!1,start:null,end:null,intervalStart:null,intervalEnd:null,intervalDuration:null,intervalUnit:null,isRTL:!1,isSelected:!1,eventOrderSpecs:null,scrollerEl:null,scrollTop:null,widgetHeaderClass:null,widgetContentClass:null,highlightStateClass:null,nextDayThreshold:null,isHiddenDayHash:null,documentMousedownProxy:null,isNowIndicatorRendered:null,initialNowDate:null,initialNowQueriedMs:null,nowIndicatorTimeoutID:null,nowIndicatorIntervalID:null,constructor:function(t,i,n,r){this.calendar=t,this.type=this.name=i,this.options=n,this.intervalDuration=r||e.duration(1,"day"),this.nextDayThreshold=e.duration(this.opt("nextDayThreshold")),this.initThemingProps(),this.initHiddenDays(),this.isRTL=this.opt("isRTL"),this.eventOrderSpecs=E(this.opt("eventOrder")),this.documentMousedownProxy=it(this,"documentMousedown"),this.initialize()},initialize:function(){},opt:function(t){return this.options[t]},trigger:function(t,e){var i=this.calendar;return i.trigger.apply(i,[t,e||this].concat(Array.prototype.slice.call(arguments,2),[this]))},setDate:function(t){this.setRange(this.computeRange(t))},setRange:function(e){t.extend(this,e),this.updateTitle()},computeRange:function(t){var e,i,n=I(this.intervalDuration),r=t.clone().startOf(n),s=r.clone().add(this.intervalDuration);return/year|month|week|day/.test(n)?(r.stripTime(),s.stripTime()):(r.hasTime()||(r=this.calendar.time(0)),s.hasTime()||(s=this.calendar.time(0))),e=r.clone(),e=this.skipHiddenDays(e),i=s.clone(),{intervalUnit:n,intervalStart:r,intervalEnd:s,start:e,end:i=this.skipHiddenDays(i,-1,!0)}},computePrevDate:function(t){return this.massageCurrentDate(t.clone().startOf(this.intervalUnit).subtract(this.intervalDuration),-1)},computeNextDate:function(t){return this.massageCurrentDate(t.clone().startOf(this.intervalUnit).add(this.intervalDuration))},massageCurrentDate:function(t,e){return this.intervalDuration.as("days")<=1&&this.isHiddenDay(t)&&(t=this.skipHiddenDays(t,e)).startOf("day"),t},updateTitle:function(){this.title=this.computeTitle()},computeTitle:function(){return this.formatRange({start:this.calendar.applyTimezone(this.intervalStart),end:this.calendar.applyTimezone(this.intervalEnd)},this.opt("titleFormat")||this.computeTitleFormat(),this.opt("titleRangeSeparator"))},computeTitleFormat:function(){return"year"==this.intervalUnit?"YYYY":"month"==this.intervalUnit?this.opt("monthYearFormat"):this.intervalDuration.as("days")>1?"ll":"LL"},formatRange:function(t,e,i){var n=t.end;return n.hasTime()||(n=n.clone().subtract(1)),ut(t.start,n,e,i,this.opt("isRTL"))},setElement:function(t){this.el=t,this.bindGlobalHandlers()},removeElement:function(){this.clear(),this.isSkeletonRendered&&(this.unrenderSkeleton(),this.isSkeletonRendered=!1),this.unbindGlobalHandlers(),this.el.remove()},display:function(e){var i=this,n=null;return this.displaying&&(n=this.queryScroll()),this.calendar.freezeContentHeight(),this.clear().then(function(){return i.displaying=t.when(i.displayView(e)).then(function(){i.forceScroll(i.computeInitialScroll(n)),i.calendar.unfreezeContentHeight(),i.triggerRender()})})},clear:function(){var e=this,i=this.displaying;return i?i.then(function(){return e.displaying=null,e.clearEvents(),e.clearView()}):t.when()},displayView:function(t){this.isSkeletonRendered||(this.renderSkeleton(),this.isSkeletonRendered=!0),t&&this.setDate(t),this.render&&this.render(),this.renderDates(),this.updateSize(),this.renderBusinessHours(),this.startNowIndicator()},clearView:function(){this.unselect(),this.stopNowIndicator(),this.triggerUnrender(),this.unrenderBusinessHours(),this.unrenderDates(),this.destroy&&this.destroy()},renderSkeleton:function(){},unrenderSkeleton:function(){},renderDates:function(){},unrenderDates:function(){},triggerRender:function(){this.trigger("viewRender",this,this,this.el)},triggerUnrender:function(){this.trigger("viewDestroy",this,this,this.el)},bindGlobalHandlers:function(){t(document).on("mousedown",this.documentMousedownProxy)},unbindGlobalHandlers:function(){t(document).off("mousedown",this.documentMousedownProxy)},initThemingProps:function(){var t=this.opt("theme")?"ui":"fc";this.widgetHeaderClass=t+"-widget-header",this.widgetContentClass=t+"-widget-content",this.highlightStateClass=t+"-state-highlight"},renderBusinessHours:function(){},unrenderBusinessHours:function(){},startNowIndicator:function(){var t,i,n,r=this;this.opt("nowIndicator")&&(t=this.getNowIndicatorUnit())&&(i=it(this,"updateNowIndicator"),this.initialNowDate=this.calendar.getNow(),this.initialNowQueriedMs=+new Date,this.renderNowIndicator(this.initialNowDate),this.isNowIndicatorRendered=!0,n=this.initialNowDate.clone().startOf(t).add(1,t)-this.initialNowDate,this.nowIndicatorTimeoutID=setTimeout(function(){r.nowIndicatorTimeoutID=null,i(),n=+e.duration(1,t),n=Math.max(100,n),r.nowIndicatorIntervalID=setInterval(i,n)},n))},updateNowIndicator:function(){this.isNowIndicatorRendered&&(this.unrenderNowIndicator(),this.renderNowIndicator(this.initialNowDate.clone().add(new Date-this.initialNowQueriedMs)))},stopNowIndicator:function(){this.isNowIndicatorRendered&&(this.nowIndicatorTimeoutID&&(clearTimeout(this.nowIndicatorTimeoutID),this.nowIndicatorTimeoutID=null),this.nowIndicatorIntervalID&&(clearTimeout(this.nowIndicatorIntervalID),this.nowIndicatorIntervalID=null),this.unrenderNowIndicator(),this.isNowIndicatorRendered=!1)},getNowIndicatorUnit:function(){},renderNowIndicator:function(){},unrenderNowIndicator:function(){},updateSize:function(t){var e;t&&(e=this.queryScroll()),this.updateHeight(t),this.updateWidth(t),this.updateNowIndicator(),t&&this.setScroll(e)},updateWidth:function(){},updateHeight:function(){var t=this.calendar;this.setHeight(t.getSuggestedViewHeight(),t.isHeightAuto())},setHeight:function(){},computeScrollerHeight:function(t){var e,i,n=this.scrollerEl;return(e=this.el.add(n)).css({position:"relative",left:-1}),i=this.el.outerHeight()-n.height(),e.css({position:"",left:""}),t-i},computeInitialScroll:function(){return 0},queryScroll:function(){if(this.scrollerEl)return this.scrollerEl.scrollTop()},setScroll:function(t){if(this.scrollerEl)return this.scrollerEl.scrollTop(t)},forceScroll:function(t){var e=this;this.setScroll(t),setTimeout(function(){e.setScroll(t)},0)},displayEvents:function(t){var e=this.queryScroll();this.clearEvents(),this.renderEvents(t),this.isEventsRendered=!0,this.setScroll(e),this.triggerEventRender()},clearEvents:function(){var t;this.isEventsRendered&&(t=this.queryScroll(),this.triggerEventUnrender(),this.destroyEvents&&this.destroyEvents(),this.unrenderEvents(),this.setScroll(t),this.isEventsRendered=!1)},renderEvents:function(){},unrenderEvents:function(){},triggerEventRender:function(){this.renderedEventSegEach(function(t){this.trigger("eventAfterRender",t.event,t.event,t.el)}),this.trigger("eventAfterAllRender")},triggerEventUnrender:function(){this.renderedEventSegEach(function(t){this.trigger("eventDestroy",t.event,t.event,t.el)})},resolveEventEl:function(e,i){var n=this.trigger("eventRender",e,e,i);return!1===n?i=null:n&&!0!==n&&(i=t(n)),i},showEvent:function(t){this.renderedEventSegEach(function(t){t.el.css("visibility","")},t)},hideEvent:function(t){this.renderedEventSegEach(function(t){t.el.css("visibility","hidden")},t)},renderedEventSegEach:function(t,e){var i,n=this.getEventSegs();for(i=0;i<n.length;i++)e&&n[i].event._id!==e._id||n[i].el&&t.call(this,n[i])},getEventSegs:function(){return[]},isEventDraggable:function(t){var e=t.source||{};return Z(t.startEditable,e.startEditable,this.opt("eventStartEditable"),t.editable,e.editable,this.opt("editable"))},reportEventDrop:function(t,e,i,n,r){var s=this.calendar,o=s.mutateEvent(t,e,i),a=function(){o.undo(),s.reportEventChange()};this.triggerEventDrop(t,o.dateDelta,a,n,r),s.reportEventChange()},triggerEventDrop:function(t,e,i,n,r){this.trigger("eventDrop",n[0],t,e,i,r,{})},reportExternalDrop:function(e,i,n,r,s){var o,a,l=e.eventProps;l&&(o=t.extend({},l,i),a=this.calendar.renderEvent(o,e.stick)[0]),this.triggerExternalDrop(a,i,n,r,s)},triggerExternalDrop:function(t,e,i,n,r){this.trigger("drop",i[0],e.start,n,r),t&&this.trigger("eventReceive",null,t)},renderDrag:function(){},unrenderDrag:function(){},isEventResizableFromStart:function(t){return this.opt("eventResizableFromStart")&&this.isEventResizable(t)},isEventResizableFromEnd:function(t){return this.isEventResizable(t)},isEventResizable:function(t){var e=t.source||{};return Z(t.durationEditable,e.durationEditable,this.opt("eventDurationEditable"),t.editable,e.editable,this.opt("editable"))},reportEventResize:function(t,e,i,n,r){var s=this.calendar,o=s.mutateEvent(t,e,i),a=function(){o.undo(),s.reportEventChange()};this.triggerEventResize(t,o.durationDelta,a,n,r),s.reportEventChange()},triggerEventResize:function(t,e,i,n,r){this.trigger("eventResize",n[0],t,e,i,r,{})},select:function(t,e){this.unselect(e),this.renderSelection(t),this.reportSelection(t,e)},renderSelection:function(){},reportSelection:function(t,e){this.isSelected=!0,this.triggerSelect(t,e)},triggerSelect:function(t,e){this.trigger("select",null,this.calendar.applyTimezone(t.start),this.calendar.applyTimezone(t.end),e)},unselect:function(t){this.isSelected&&(this.isSelected=!1,this.destroySelection&&this.destroySelection(),this.unrenderSelection(),this.trigger("unselect",null,t))},unrenderSelection:function(){},documentMousedown:function(e){var i;this.isSelected&&this.opt("unselectAuto")&&b(e)&&((i=this.opt("unselectCancel"))&&t(e.target).closest(i).length||this.unselect(e))},triggerDayClick:function(t,e,i){this.trigger("dayClick",e,this.calendar.applyTimezone(t.start),i)},initHiddenDays:function(){var e,i=this.opt("hiddenDays")||[],n=[],r=0;for(!1===this.opt("weekends")&&i.push(0,6),e=0;e<7;e++)(n[e]=-1!==t.inArray(e,i))||r++;if(!r)throw"invalid hiddenDays";this.isHiddenDayHash=n},isHiddenDay:function(t){return e.isMoment(t)&&(t=t.day()),this.isHiddenDayHash[t]},skipHiddenDays:function(t,e,i){var n=t.clone();for(e=e||1;this.isHiddenDayHash[(n.day()+(i?e:0)+7)%7];)n.add(e,"days");return n},computeDayRange:function(t){var e,i=t.start.clone().stripTime(),n=t.end,r=null;return n&&(r=n.clone().stripTime(),(e=+n.time())&&e>=this.nextDayThreshold&&r.add(1,"days")),(!n||r<=i)&&(r=i.clone().add(1,"days")),{start:i,end:r}},isMultiDayEvent:function(t){var e=this.computeDayRange(t);return e.end.diff(e.start,"days")>1}}),ge=At.Calendar=_t.extend({dirDefaults:null,langDefaults:null,overrides:null,options:null,viewSpecCache:null,view:null,header:null,loadingLevel:0,constructor:Ft,initialize:function(){},initOptions:function(t){var e,r,s;e=(t=n(t)).lang,(r=me[e])||(e=ge.defaults.lang,r=me[e]||{}),s=Z(t.isRTL,r.isRTL,ge.defaults.isRTL)?ge.rtlDefaults:{},this.dirDefaults=s,this.langDefaults=r,this.overrides=t,this.options=i([ge.defaults,s,r,t]),Gt(this.options),this.viewSpecCache={}},getViewSpec:function(t){var e=this.viewSpecCache;return e[t]||(e[t]=this.buildViewSpec(t))},getUnitViewSpec:function(e){var i,n,r;if(-1!=t.inArray(e,jt))for(i=this.header.getViewsWithButtons(),t.each(At.views,function(t){i.push(t)}),n=0;n<i.length;n++)if((r=this.getViewSpec(i[n]))&&r.singleUnit==e)return r},buildViewSpec:function(t){for(var n,r,s,o,a=this.overrides.views||{},l=[],d=[],h=[],c=t;c;)n=Wt[c],r=a[c],c=null,"function"==typeof n&&(n={"class":n}),n&&(l.unshift(n),d.unshift(n.defaults||{}),s=s||n.duration,c=c||n.type),r&&(h.unshift(r),s=s||r.duration,c=c||r.type);return(n=W(l)).type=t,!!n["class"]&&(s&&(s=e.duration(s)).valueOf()&&(n.duration=s,o=I(s),1===s.as(o)&&(n.singleUnit=o,h.unshift(a[o]||{}))),n.defaults=i(d),n.overrides=i(h),this.buildViewSpecOptions(n),this.buildViewSpecButtonText(n,t),n)},buildViewSpecOptions:function(t){t.options=i([ge.defaults,t.defaults,this.dirDefaults,this.langDefaults,this.overrides,t.overrides]),Gt(t.options)},buildViewSpecButtonText:function(t,e){function i(i){var n=i.buttonText||{};return n[e]||(t.singleUnit?n[t.singleUnit]:null)}t.buttonTextOverride=i(this.overrides)||t.overrides.buttonText,t.buttonTextDefault=i(this.langDefaults)||i(this.dirDefaults)||t.defaults.buttonText||i(ge.defaults)||(t.duration?this.humanizeDuration(t.duration):null)||e},instantiateView:function(t){var e=this.getViewSpec(t);return new e["class"](this,t,e.options,e.duration)},isValidViewType:function(t){return Boolean(this.getViewSpec(t))},pushLoading:function(){this.loadingLevel++||this.trigger("loading",null,!0,this.view)},popLoading:function(){--this.loadingLevel||this.trigger("loading",null,!1,this.view)},buildSelectSpan:function(t,e){var i=this.moment(t).stripZone();return{start:i,end:e?this.moment(e).stripZone():i.hasTime()?i.clone().add(this.defaultTimedEventDuration):i.clone().add(this.defaultAllDayEventDuration)}}});ge.mixin(re),ge.defaults={titleRangeSeparator:" \u2014 ",monthYearFormat:"MMMM YYYY",defaultTimedEventDuration:"02:00:00",defaultAllDayEventDuration:{days:1},forceEventDuration:!1,nextDayThreshold:"09:00:00",defaultView:"month",aspectRatio:1.35,header:{left:"title",center:"",right:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberTitle:"W",weekNumberCalculation:"local",scrollTime:"06:00:00",lazyFetching:!0,startParam:"start",endParam:"end",timezoneParam:"timezone",timezone:!1,isRTL:!1,buttonText:{prev:"prev",next:"next",prevYear:"prev year",nextYear:"next year",year:"year",today:"today",month:"month",week:"week",day:"day"},buttonIcons:{prev:"left-single-arrow",next:"right-single-arrow",prevYear:"left-double-arrow",nextYear:"right-double-arrow"},theme:!1,themeButtonIcons:{prev:"circle-triangle-w",next:"circle-triangle-e",prevYear:"seek-prev",nextYear:"seek-next"},dragOpacity:.75,dragRevertDuration:500,dragScroll:!0,unselectAuto:!0,dropAccept:"*",eventOrder:"title",eventLimit:!1,eventLimitText:"more",eventLimitClick:"popover",dayPopoverFormat:"LL",handleWindowResize:!0,windowResizeDelay:200},ge.englishDefaults={dayPopoverFormat:"dddd, MMMM D"},ge.rtlDefaults={header:{left:"next,prev today",center:"",right:"title"},buttonIcons:{prev:"right-single-arrow",next:"left-single-arrow",prevYear:"right-double-arrow",nextYear:"left-double-arrow"},themeButtonIcons:{prev:"circle-triangle-e",next:"circle-triangle-w",nextYear:"seek-prev",prevYear:"seek-next"}};var me=At.langs={};At.datepickerLang=function(e,i,n){var r=me[e]||(me[e]={});r.isRTL=n.isRTL,r.weekNumberTitle=n.weekHeader,t.each(_e,function(t,e){r[t]=e(n)}),t.datepicker&&(t.datepicker.regional[i]=t.datepicker.regional[e]=n,t.datepicker.regional.en=t.datepicker.regional[""],t.datepicker.setDefaults(n))},At.lang=function(e,n){var r,s;r=me[e]||(me[e]={}),n&&(r=me[e]=i([r,n])),s=Yt(e),t.each(ve,function(t,e){null==r[t]&&(r[t]=e(s,r))}),ge.defaults.lang=e};var _e={buttonText:function(t){return{prev:Q(t.prevText),next:Q(t.nextText),today:Q(t.currentText)}},monthYearFormat:function(t){return t.showMonthAfterYear?"YYYY["+t.yearSuffix+"] MMMM":"MMMM YYYY["+t.yearSuffix+"]"}},ve={dayOfMonthFormat:function(t,e){var i=t.longDateFormat("l");return i=i.replace(/^Y+[^\w\s]*|[^\w\s]*Y+$/g,""),e.isRTL?i+=" ddd":i="ddd "+i,i},mediumTimeFormat:function(t){return t.longDateFormat("LT").replace(/\s*a$/i,"a")},smallTimeFormat:function(t){return t.longDateFormat("LT").replace(":mm","(:mm)").replace(/(\Wmm)$/,"($1)").replace(/\s*a$/i,"a")},extraSmallTimeFormat:function(t){return t.longDateFormat("LT").replace(":mm","(:mm)").replace(/(\Wmm)$/,"($1)").replace(/\s*a$/i,"t")},hourFormat:function(t){return t.longDateFormat("LT").replace(":mm","").replace(/(\Wmm)$/,"").replace(/\s*a$/i,"a")},noMeridiemTimeFormat:function(t){return t.longDateFormat("LT").replace(/\s*a$/i,"")}},ye={smallDayDateFormat:function(t){return t.isRTL?"D dd":"dd D"},weekFormat:function(t){return t.isRTL?"w[ "+t.weekNumberTitle+"]":"["+t.weekNumberTitle+" ]w"},smallWeekFormat:function(t){return t.isRTL?"w["+t.weekNumberTitle+"]":"["+t.weekNumberTitle+"]w"}};At.lang("en",ge.englishDefaults),At.sourceNormalizers=[],At.sourceFetchers=[];var we={dataType:"json",cache:!1},be=1;ge.prototype.getPeerEvents=function(t,e){var i,n,r=this.getEventCache(),s=[];for(i=0;i<r.length;i++)n=r[i],e&&e._id===n._id||s.push(n);return s};var Se=At.BasicView=fe.extend({dayGridClass:ue,dayGrid:null,dayNumbersVisible:!1,weekNumbersVisible:!1,weekNumberWidth:null,headContainerEl:null,headRowEl:null,initialize:function(){this.dayGrid=this.instantiateDayGrid()},instantiateDayGrid:function(){return new(this.dayGridClass.extend(Ce))(this)},setRange:function(t){fe.prototype.setRange.call(this,t),this.dayGrid.breakOnWeeks=/year|month|week/.test(this.intervalUnit),this.dayGrid.setRange(t)},computeRange:function(t){var e=fe.prototype.computeRange.call(this,t);return/year|month/.test(e.intervalUnit)&&(e.start.startOf("week"),e.start=this.skipHiddenDays(e.start),e.end.weekday()&&(e.end.add(1,"week").startOf("week"),e.end=this.skipHiddenDays(e.end,-1,!0))),e},renderDates:function(){this.dayNumbersVisible=this.dayGrid.rowCnt>1,this.weekNumbersVisible=this.opt("weekNumbers"),this.dayGrid.numbersVisible=this.dayNumbersVisible||this.weekNumbersVisible,this.el.addClass("fc-basic-view").html(this.renderSkeletonHtml()),this.renderHead(),this.scrollerEl=this.el.find(".fc-day-grid-container"),this.dayGrid.setElement(this.el.find(".fc-day-grid")),this.dayGrid.renderDates(this.hasRigidRows())},renderHead:function(){this.headContainerEl=this.el.find(".fc-head-container").html(this.dayGrid.renderHeadHtml()),this.headRowEl=this.headContainerEl.find(".fc-row")},unrenderDates:function(){this.dayGrid.unrenderDates(),this.dayGrid.removeElement()},renderBusinessHours:function(){this.dayGrid.renderBusinessHours()},renderSkeletonHtml:function(){
return'<table><thead class="fc-head"><tr><td class="fc-head-container '+this.widgetHeaderClass+'"></td></tr></thead><tbody class="fc-body"><tr><td class="'+this.widgetContentClass+'"><div class="fc-day-grid-container"><div class="fc-day-grid"/></div></td></tr></tbody></table>'},weekNumberStyleAttr:function(){return null!==this.weekNumberWidth?'style="width:'+this.weekNumberWidth+'px"':""},hasRigidRows:function(){var t=this.opt("eventLimit");return t&&"number"!=typeof t},updateWidth:function(){this.weekNumbersVisible&&(this.weekNumberWidth=h(this.el.find(".fc-week-number")))},setHeight:function(t,e){var i,n=this.opt("eventLimit");u(this.scrollerEl),s(this.headRowEl),this.dayGrid.removeSegPopover(),n&&"number"==typeof n&&this.dayGrid.limitRows(n),i=this.computeScrollerHeight(t),this.setGridHeight(i,e),n&&"number"!=typeof n&&this.dayGrid.limitRows(n),!e&&c(this.scrollerEl,i)&&(r(this.headRowEl,_(this.scrollerEl)),i=this.computeScrollerHeight(t),this.scrollerEl.height(i))},setGridHeight:function(t,e){e?d(this.dayGrid.rowEls):l(this.dayGrid.rowEls,t,!0)},prepareHits:function(){this.dayGrid.prepareHits()},releaseHits:function(){this.dayGrid.releaseHits()},queryHit:function(t,e){return this.dayGrid.queryHit(t,e)},getHitSpan:function(t){return this.dayGrid.getHitSpan(t)},getHitEl:function(t){return this.dayGrid.getHitEl(t)},renderEvents:function(t){this.dayGrid.renderEvents(t),this.updateHeight()},getEventSegs:function(){return this.dayGrid.getEventSegs()},unrenderEvents:function(){this.dayGrid.unrenderEvents()},renderDrag:function(t,e){return this.dayGrid.renderDrag(t,e)},unrenderDrag:function(){this.dayGrid.unrenderDrag()},renderSelection:function(t){this.dayGrid.renderSelection(t)},unrenderSelection:function(){this.dayGrid.unrenderSelection()}}),Ce={renderHeadIntroHtml:function(){var t=this.view;return t.weekNumbersVisible?'<th class="fc-week-number '+t.widgetHeaderClass+'" '+t.weekNumberStyleAttr()+"><span>"+X(t.opt("weekNumberTitle"))+"</span></th>":""},renderNumberIntroHtml:function(t){var e=this.view;return e.weekNumbersVisible?'<td class="fc-week-number" '+e.weekNumberStyleAttr()+"><span>"+this.getCellDate(t,0).format("w")+"</span></td>":""},renderBgIntroHtml:function(){var t=this.view;return t.weekNumbersVisible?'<td class="fc-week-number '+t.widgetContentClass+'" '+t.weekNumberStyleAttr()+"></td>":""},renderIntroHtml:function(){var t=this.view;return t.weekNumbersVisible?'<td class="fc-week-number" '+t.weekNumberStyleAttr()+"></td>":""}},xe=At.MonthView=Se.extend({computeRange:function(t){var e,i=Se.prototype.computeRange.call(this,t);return this.isFixedWeeks()&&(e=Math.ceil(i.end.diff(i.start,"weeks",!0)),i.end.add(6-e,"weeks")),i},setGridHeight:function(t,e){(e=e||"variable"===this.opt("weekMode"))&&(t*=this.rowCnt/6),l(this.dayGrid.rowEls,t,!e)},isFixedWeeks:function(){var t=this.opt("weekMode");return t?"fixed"===t:this.opt("fixedWeekCount")}});Wt.basic={"class":Se},Wt.basicDay={type:"basic",duration:{days:1}},Wt.basicWeek={type:"basic",duration:{weeks:1}},Wt.month={"class":xe,duration:{months:1},defaults:{fixedWeekCount:!0}};var De=At.AgendaView=fe.extend({timeGridClass:pe,timeGrid:null,dayGridClass:ue,dayGrid:null,axisWidth:null,headContainerEl:null,noScrollRowEls:null,bottomRuleEl:null,bottomRuleHeight:null,initialize:function(){this.timeGrid=this.instantiateTimeGrid(),this.opt("allDaySlot")&&(this.dayGrid=this.instantiateDayGrid())},instantiateTimeGrid:function(){return new(this.timeGridClass.extend(Ee))(this)},instantiateDayGrid:function(){return new(this.dayGridClass.extend(Te))(this)},setRange:function(t){fe.prototype.setRange.call(this,t),this.timeGrid.setRange(t),this.dayGrid&&this.dayGrid.setRange(t)},renderDates:function(){this.el.addClass("fc-agenda-view").html(this.renderSkeletonHtml()),this.renderHead(),this.scrollerEl=this.el.find(".fc-time-grid-container"),this.timeGrid.setElement(this.el.find(".fc-time-grid")),this.timeGrid.renderDates(),this.bottomRuleEl=t('<hr class="fc-divider '+this.widgetHeaderClass+'"/>').appendTo(this.timeGrid.el),this.dayGrid&&(this.dayGrid.setElement(this.el.find(".fc-day-grid")),this.dayGrid.renderDates(),this.dayGrid.bottomCoordPadding=this.dayGrid.el.next("hr").outerHeight()),this.noScrollRowEls=this.el.find(".fc-row:not(.fc-scroller *)")},renderHead:function(){this.headContainerEl=this.el.find(".fc-head-container").html(this.timeGrid.renderHeadHtml())},unrenderDates:function(){this.timeGrid.unrenderDates(),this.timeGrid.removeElement(),this.dayGrid&&(this.dayGrid.unrenderDates(),this.dayGrid.removeElement())},renderSkeletonHtml:function(){return'<table><thead class="fc-head"><tr><td class="fc-head-container '+this.widgetHeaderClass+'"></td></tr></thead><tbody class="fc-body"><tr><td class="'+this.widgetContentClass+'">'+(this.dayGrid?'<div class="fc-day-grid"/><hr class="fc-divider '+this.widgetHeaderClass+'"/>':"")+'<div class="fc-time-grid-container"><div class="fc-time-grid"/></div></td></tr></tbody></table>'},axisStyleAttr:function(){return null!==this.axisWidth?'style="width:'+this.axisWidth+'px"':""},renderBusinessHours:function(){this.timeGrid.renderBusinessHours(),this.dayGrid&&this.dayGrid.renderBusinessHours()},unrenderBusinessHours:function(){this.timeGrid.unrenderBusinessHours(),this.dayGrid&&this.dayGrid.unrenderBusinessHours()},getNowIndicatorUnit:function(){return this.timeGrid.getNowIndicatorUnit()},renderNowIndicator:function(t){this.timeGrid.renderNowIndicator(t)},unrenderNowIndicator:function(){this.timeGrid.unrenderNowIndicator()},updateSize:function(t){this.timeGrid.updateSize(t),fe.prototype.updateSize.call(this,t)},updateWidth:function(){this.axisWidth=h(this.el.find(".fc-axis"))},setHeight:function(t,e){var i,n;null===this.bottomRuleHeight&&(this.bottomRuleHeight=this.bottomRuleEl.outerHeight()),this.bottomRuleEl.hide(),this.scrollerEl.css("overflow",""),u(this.scrollerEl),s(this.noScrollRowEls),this.dayGrid&&(this.dayGrid.removeSegPopover(),(i=this.opt("eventLimit"))&&"number"!=typeof i&&(i=ke),i&&this.dayGrid.limitRows(i)),e||(n=this.computeScrollerHeight(t),c(this.scrollerEl,n)?(r(this.noScrollRowEls,_(this.scrollerEl)),n=this.computeScrollerHeight(t),this.scrollerEl.height(n)):(this.scrollerEl.height(n).css("overflow","hidden"),this.bottomRuleEl.show()))},computeInitialScroll:function(){var t=e.duration(this.opt("scrollTime")),i=this.timeGrid.computeTimeTop(t);return(i=Math.ceil(i))&&i++,i},prepareHits:function(){this.timeGrid.prepareHits(),this.dayGrid&&this.dayGrid.prepareHits()},releaseHits:function(){this.timeGrid.releaseHits(),this.dayGrid&&this.dayGrid.releaseHits()},queryHit:function(t,e){var i=this.timeGrid.queryHit(t,e);return!i&&this.dayGrid&&(i=this.dayGrid.queryHit(t,e)),i},getHitSpan:function(t){return t.component.getHitSpan(t)},getHitEl:function(t){return t.component.getHitEl(t)},renderEvents:function(t){var e,i=[],n=[];for(e=0;e<t.length;e++)t[e].allDay?i.push(t[e]):n.push(t[e]);this.timeGrid.renderEvents(n),this.dayGrid&&this.dayGrid.renderEvents(i),this.updateHeight()},getEventSegs:function(){return this.timeGrid.getEventSegs().concat(this.dayGrid?this.dayGrid.getEventSegs():[])},unrenderEvents:function(){this.timeGrid.unrenderEvents(),this.dayGrid&&this.dayGrid.unrenderEvents()},renderDrag:function(t,e){return t.start.hasTime()?this.timeGrid.renderDrag(t,e):this.dayGrid?this.dayGrid.renderDrag(t,e):void 0},unrenderDrag:function(){this.timeGrid.unrenderDrag(),this.dayGrid&&this.dayGrid.unrenderDrag()},renderSelection:function(t){t.start.hasTime()||t.end.hasTime()?this.timeGrid.renderSelection(t):this.dayGrid&&this.dayGrid.renderSelection(t)},unrenderSelection:function(){this.timeGrid.unrenderSelection(),this.dayGrid&&this.dayGrid.unrenderSelection()}}),Ee={renderHeadIntroHtml:function(){var t,e=this.view;return e.opt("weekNumbers")?(t=this.start.format(e.opt("smallWeekFormat")),'<th class="fc-axis fc-week-number '+e.widgetHeaderClass+'" '+e.axisStyleAttr()+"><span>"+X(t)+"</span></th>"):'<th class="fc-axis '+e.widgetHeaderClass+'" '+e.axisStyleAttr()+"></th>"},renderBgIntroHtml:function(){var t=this.view;return'<td class="fc-axis '+t.widgetContentClass+'" '+t.axisStyleAttr()+"></td>"},renderIntroHtml:function(){return'<td class="fc-axis" '+this.view.axisStyleAttr()+"></td>"}},Te={renderBgIntroHtml:function(){var t=this.view;return'<td class="fc-axis '+t.widgetContentClass+'" '+t.axisStyleAttr()+"><span>"+(t.opt("allDayHtml")||X(t.opt("allDayText")))+"</span></td>"},renderIntroHtml:function(){return'<td class="fc-axis" '+this.view.axisStyleAttr()+"></td>"}},ke=5,Re=[{hours:1},{minutes:30},{minutes:15},{seconds:30},{seconds:15}];return Wt.agenda={"class":De,defaults:{allDaySlot:!0,allDayText:"all-day",slotDuration:"00:30:00",minTime:"00:00:00",maxTime:"24:00:00",slotEventOverlap:!0}},Wt.agendaDay={type:"agenda",duration:{days:1}},Wt.agendaWeek={type:"agenda",duration:{weeks:1}},At}),
/*!
 * FullCalendar v2.6.1 Google Calendar Plugin
 * Docs & License: http://fullcalendar.io/
 * (c) 2015 Adam Shaw
 */
function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?module.exports=t(require("jquery")):t(jQuery)}(function(t){function e(e,o,a,l,d){function h(i,n){var s=n||[{message:i}];(e.googleCalendarError||t.noop).apply(d,s),(d.options.googleCalendarError||t.noop).apply(d,s),r.warn.apply(null,[i].concat(n||[]))}var c,u,p=n+"/"+encodeURIComponent(e.googleCalendarId)+"/events?callback=?",f=e.googleCalendarApiKey||d.options.googleCalendarApiKey,g=e.success;return f?(o.hasZone()||(o=o.clone().utc().add(-1,"day")),a.hasZone()||(a=a.clone().utc().add(1,"day")),l&&"local"!=l&&(u=l.replace(" ","_")),c=t.extend({},e.data||{},{key:f,timeMin:o.format(),timeMax:a.format(),timeZone:u,singleEvents:!0,maxResults:9999}),t.extend({},e,{googleCalendarId:null,url:p,data:c,startParam:!1,endParam:!1,timezoneParam:!1,success:function(e){var n,r,o=[];if(e.error)h("Google Calendar API: "+e.error.message,e.error.errors);else if(e.items&&(t.each(e.items,function(t,e){var n=e.htmlLink;u&&(n=i(n,"ctz="+u)),o.push({id:e.id,title:e.summary,start:e.start.dateTime||e.start.date,end:e.end.dateTime||e.end.date,url:n,location:e.location,description:e.description})}),n=[o].concat(Array.prototype.slice.call(arguments,1)),r=s(g,this,n),t.isArray(r)))return r;return o}})):(h("Specify a googleCalendarApiKey. See http://fullcalendar.io/docs/google_calendar/"),{})}function i(t,e){return t.replace(/(\?.*?)?(#|$)/,function(t,i,n){return(i?i+"&":"?")+e+n})}var n="https://www.googleapis.com/calendar/v3/calendars",r=t.fullCalendar,s=r.applyAll;r.sourceNormalizers.push(function(t){var e,i=t.googleCalendarId,n=t.url;!i&&n&&(/^[^\/]+@([^\/\.]+\.)*(google|googlemail|gmail)\.com$/.test(n)?i=n:((e=/^https:\/\/www.googleapis.com\/calendar\/v3\/calendars\/([^\/]*)/.exec(n))||(e=/^https?:\/\/www.google.com\/calendar\/feeds\/([^\/]*)/.exec(n)))&&(i=decodeURIComponent(e[1])),i&&(t.googleCalendarId=i)),i&&(null==t.editable&&(t.editable=!1),t.url=i)}),r.sourceFetchers.push(function(t,i,n,r){if(t.googleCalendarId)return e(t,i,n,r,this)})}),function(t){"function"==typeof define&&define.amd?define(["jquery","moment"],t):"object"==typeof exports?module.exports=t(require("jquery"),require("moment")):t(jQuery,moment)}(function(t,e){!function(){"use strict";(e.defineLocale||e.lang).call(e,"ja",{months:"1\u6708_2\u6708_3\u6708_4\u6708_5\u6708_6\u6708_7\u6708_8\u6708_9\u6708_10\u6708_11\u6708_12\u6708".split("_"),monthsShort:"1\u6708_2\u6708_3\u6708_4\u6708_5\u6708_6\u6708_7\u6708_8\u6708_9\u6708_10\u6708_11\u6708_12\u6708".split("_"),weekdays:"\u65e5\u66dc\u65e5_\u6708\u66dc\u65e5_\u706b\u66dc\u65e5_\u6c34\u66dc\u65e5_\u6728\u66dc\u65e5_\u91d1\u66dc\u65e5_\u571f\u66dc\u65e5".split("_"),weekdaysShort:"\u65e5_\u6708_\u706b_\u6c34_\u6728_\u91d1_\u571f".split("_"),weekdaysMin:"\u65e5_\u6708_\u706b_\u6c34_\u6728_\u91d1_\u571f".split("_"),longDateFormat:{LT:"Ah\u6642m\u5206",LTS:"Ah\u6642m\u5206s\u79d2",L:"YYYY/MM/DD",LL:"YYYY\u5e74M\u6708D\u65e5",LLL:"YYYY\u5e74M\u6708D\u65e5Ah\u6642m\u5206",LLLL:"YYYY\u5e74M\u6708D\u65e5Ah\u6642m\u5206 dddd"},meridiemParse:/\u5348\u524d|\u5348\u5f8c/i,isPM:function(t){return"\u5348\u5f8c"===t},meridiem:function(t){return 12>t?"\u5348\u524d":"\u5348\u5f8c"},calendar:{sameDay:"[\u4eca\u65e5] LT",nextDay:"[\u660e\u65e5] LT",nextWeek:"[\u6765\u9031]dddd LT",lastDay:"[\u6628\u65e5] LT",lastWeek:"[\u524d\u9031]dddd LT",sameElse:"L"},relativeTime:{future:"%s\u5f8c",past:"%s\u524d",s:"\u6570\u79d2",m:"1\u5206",mm:"%d\u5206",h:"1\u6642\u9593",hh:"%d\u6642\u9593",d:"1\u65e5",dd:"%d\u65e5",M:"1\u30f6\u6708",MM:"%d\u30f6\u6708",y:"1\u5e74",yy:"%d\u5e74"}})}(),t.fullCalendar.datepickerLang("ja","ja",{closeText:"\u9589\u3058\u308b",prevText:"&#x3C;\u524d",nextText:"\u6b21&#x3E;",currentText:"\u4eca\u65e5",monthNames:["1\u6708","2\u6708","3\u6708","4\u6708","5\u6708","6\u6708","7\u6708","8\u6708","9\u6708","10\u6708","11\u6708","12\u6708"],monthNamesShort:["1\u6708","2\u6708","3\u6708","4\u6708","5\u6708","6\u6708","7\u6708","8\u6708","9\u6708","10\u6708","11\u6708","12\u6708"],dayNames:["\u65e5\u66dc\u65e5","\u6708\u66dc\u65e5","\u706b\u66dc\u65e5","\u6c34\u66dc\u65e5","\u6728\u66dc\u65e5","\u91d1\u66dc\u65e5","\u571f\u66dc\u65e5"],dayNamesShort:["\u65e5","\u6708","\u706b","\u6c34","\u6728","\u91d1","\u571f"],dayNamesMin:["\u65e5","\u6708","\u706b","\u6c34","\u6728","\u91d1","\u571f"],weekHeader:"\u9031",dateFormat:"yy/mm/dd",firstDay:0,isRTL:!1,showMonthAfterYear:!0,yearSuffix:"\u5e74"}),t.fullCalendar.lang("ja",{buttonText:{month:"\u6708",week:"\u9031",day:"\u65e5",list:"\u4e88\u5b9a\u30ea\u30b9\u30c8"},allDayText:"\u7d42\u65e5",eventLimitText:function(t){return"\u4ed6 "+t+" \u4ef6"}})}),function(t){"function"==typeof define&&define.amd?define(["jquery","moment"],t):t(jQuery,moment)}(function(t,e){var i,n,r,s,o,a,l,d,h,c,u,p,f,g,m,_,v,y,w,b,S,C,x,D,E,T,k,R,$,H,M,z,I,F,G,Y,L,P,O,A,W,N,V,B,j,U,q,Z,X,Q,J,K,tt,et,it,nt,rt,st,ot,at,lt,dt,ht,ct,ut,pt,ft,gt,mt,_t,vt,yt,wt,bt,St,Ct,xt,Dt,Et,Tt,kt,Rt,$t,Ht,Mt,zt,It,Ft,Gt=[].slice,Yt=function(t,e){function i(){this.constructor=t}for(var n in e)Lt.call(e,n)&&(t[n]=e[n]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},Lt={}.hasOwnProperty;return(c=t.fullCalendar).schedulerVersion="1.2.1",3!==c.internalApiVersion?void c.warn("v"+c.schedulerVersion+" of FullCalendar Scheduler is incompatible with v"+c.version+" of the core.\nPlease see http://fullcalendar.io/support/ for more information."):(n=c.Calendar,s=c.Class,B=c.View,u=c.Grid,ft=c.intersectRanges,K=c.debounce,_t=c.isInt,ht=c.getScrollbarWidths,l=c.DragListener,pt=c.htmlEscape,q=c.computeIntervalUnit,kt=c.proxy,j=c.capitaliseFirstLetter,c.applyAll,d=c.Emitter,rt=c.durationHasTime,nt=c.divideRangeByDuration,it=c.divideDurationByDuration,wt=c.multiplyDuration,Et=c.parseFieldSpecs,U=c.compareByFieldSpecs,st=c.flexibleCompare,gt=c.intersectRects,o=c.CoordCache,ot=function(t){return t.find("> td").filter(function(t,e){return e.rowSpan<=1})},$t=null,bt=function(t,e){var i,n;if(i=t.css("direction"),n=t[0],null!=e){if("rtl"===i)switch($t){case"positive":e=e-n.clientWidth+n.scrollWidth;break;case"reverse":e=-e}return n.scrollLeft=e,t}if(e=n.scrollLeft,"rtl"===i)switch($t){case"positive":e=e+n.clientWidth-n.scrollWidth;break;case"reverse":e=-e}return e},dt=function(t){var e,i,n;if(e=t.css("direction"),n=(i=t[0]).scrollLeft,"rtl"===e)switch($t){case"negative":n=n-i.clientWidth+i.scrollWidth;break;case"reverse":n=-n-i.clientWidth+i.scrollWidth}return n},tt=function(){var e,i,n;return n=(i=(e=t('<div style=" position: absolute top: -1000px; width: 1px; height: 1px; overflow: scroll; direction: rtl; font-size: 14px; ">A</div>').appendTo("body"))[0]).scrollLeft>0?"positive":(i.scrollLeft=1,e.scrollLeft>0?"reverse":"negative"),e.remove(),n},t(function(){return $t=tt()}),P=function(){function e(e,i){this.overflowX=null!=e?e:"auto",this.overflowY=null!=i?i:"auto",this.el=t('<div class="fc-scrollpane"> <div> <div class="fc-scrollpane-inner"> <div class="fc-content"/> <div class="fc-bg"/> </div> </div> </div>'),this.scrollEl=this.el.children(),this.innerEl=this.scrollEl.children(),this.contentEl=this.innerEl.find(".fc-content"),this.bgEl=this.innerEl.find(".fc-bg"),this.scrollEl.on("scroll",kt(this,"handleScroll")).on("scroll",K(kt(this,"handleScrollStop"),100)),this.handlers={},this.gutters={}}return e.prototype.el=null,e.prototype.innerEl=null,e.prototype.contentEl=null,e.prototype.bgEl=null,e.prototype.overflowX=null,e.prototype.overflowY=null,e.prototype.isScrolling=!1,e.prototype.handlers=null,e.prototype.height=null,e.prototype.contentWidth=null,e.prototype.contentMinWidth=null,e.prototype.gutters=null,e.prototype.update=function(){var t,e,i,n,r,s,o;return s=this.scrollEl,e="invisible-scroll"===(n=this.overflowX),i="invisible-scroll"===(r=this.overflowY),s.toggleClass("fc-no-scrollbars",(e||"hidden"===n)&&(i||"hidden"===r)&&!ut(s)),s.css({overflowX:e?"scroll":n,overflowY:i?"scroll":r}),t={marginLeft:0,marginRight:0,marginTop:0,marginBottom:0},(e||i)&&(o=ht(s),e&&(t.marginTop=-o.top,t.marginBottom=-o.bottom),i&&(t.marginLeft=-o.left,t.marginRight=-o.right)),s.css(t)},e.prototype.getScrollbarWidths=function(){var t;return t=ht(this.scrollEl),"invisible-scroll"===this.overflowX&&(t.top=0,t.bottom=0),"invisible-scroll"===this.overflowY&&(t.left=0,t.right=0),t},e.prototype.handleScroll=function(){return this.isScrolling||(this.isScrolling=!0,this.trigger("scrollStart")),this.trigger("scroll",this.scrollEl.scrollTop(),this.scrollEl.scrollLeft())},e.prototype.handleScrollStop=function(){return this.isScrolling=!1,this.trigger("scrollStop")},e.prototype.setHeight=function(t){return this.height=t,this.updateCss()},e.prototype.getHeight=function(){var t;return null!=(t=this.height)?t:this.scrollEl.height()},e.prototype.setContentWidth=function(t){return this.contentWidth=t,this.updateCss()},e.prototype.setContentMinWidth=function(t){return this.contentMinWidth=t,this.updateCss()},e.prototype.setGutters=function(e){return e?t.extend(this.gutters,e):this.gutters={},this.updateCss()},e.prototype.updateCss=function(){var t;return this.scrollEl.height(this.height),t=this.gutters,this.innerEl.css({width:this.contentWidth?this.contentWidth+(t.left||0)+(t.right||0):"",minWidth:this.contentMinWidth?this.contentMinWidth+(t.left||0)+(t.right||0):void 0,paddingLeft:t.left||"",paddingRight:t.right||"",paddingTop:t.top||"",paddingBottom:t.bottom||""}),this.bgEl.css({left:t.left||"",right:t.right||"",top:t.top||"",bottom:t.bottom||""})},e.prototype.append=function(t){return this.contentEl.append(t)},e.prototype.scrollTop=function(t){return this.scrollEl.scrollTop(t)},e.prototype.scrollLeft=function(t){return this.scrollEl.scrollLeft(t)},e.prototype.on=function(t,e){var i;return((i=this.handlers)[t]||(i[t]=[])).push(e),this},e.prototype.trigger=function(){var t,e,i,n,r;for(e=arguments[0],t=2<=arguments.length?Gt.call(arguments,1):[],i=0,n=(r=this.handlers[e]||[]).length;n>i;i++)r[i].apply(this,t)},e}(),ut=function(t){var e;return(e=ht(t)).left||e.right||e.top||e.bottom},L=function(){function t(t,e){var i,n,r,s;for(this.axis=t,this.scrollers=e,i=0,n=(r=this.scrollers).length;n>i;i++)s=r[i],this.initScroller(s)}return t.prototype.axis=null,t.prototype.scrollers=null,t.prototype.masterScroller=null,t.prototype.enabled=!0,t.prototype.enable=function(){return this.enabled=!0},t.prototype.disable=function(){return this.enabled=!1},t.prototype.initScroller=function(t){return t.on("scrollStart",(e=this,function(){e.masterScroller||(e.masterScroller=t)})).on("scroll",function(e){return function(i,n){var r,s,o,a;if(t===e.masterScroller)for(r=0,s=(a=e.scrollers).length;s>r;r++)if((o=a[r])!==e.masterScroller)switch(e.axis){case"horizontal":o.scrollLeft(n);break;case"vertical":o.scrollTop(i)}}}(this)).on("scrollStop",function(e){return function(){t===e.masterScroller&&(e.masterScroller=null)}}(this));var e},t.prototype.update=function(){var t,e,i,n,r,s,o,a,l,d,h,c,u;for(t=function(){var t,e,i,n;for(n=[],t=0,e=(i=this.scrollers).length;e>t;t++)c=i[t],n.push(c.getScrollbarWidths());return n}.call(this),a=l=d=o=0,i=0,r=t.length;r>i;i++)u=t[i],a=Math.max(a,u.left),l=Math.max(l,u.right),d=Math.max(d,u.top),o=Math.max(o,u.bottom);for(e=n=0,s=(h=this.scrollers).length;s>n;e=++n)c=h[e],u=t[e],c.setGutters("horizontal"===this.axis?{left:a-u.left,right:l-u.right}:{top:d-u.top,bottom:o-u.bottom})},t}(),G=function(){function e(t){this.scroller=t,this.sprites=[],this.scroller.on("scrollStart",function(t){return function(){return t.shouldRequeryDimensions?t.cacheDimensions():void 0}}(this)),this.scroller.on("scroll",function(t){return function(){var e,i,n;return i=t.scroller.scrollEl,e=dt(i),n=i.scrollTop(),t.viewportRect={left:e,right:e+i[0].clientWidth,top:n,bottom:n+i[0].clientHeight},t.updatePositions()}}(this))}return e.prototype.scroller=null,e.prototype.scrollbarWidths=null,e.prototype.sprites=null,e.prototype.viewportRect=null,e.prototype.contentOffset=null,e.prototype.isHFollowing=!0,e.prototype.isVFollowing=!1,e.prototype.containOnNaturalLeft=!1,e.prototype.containOnNaturalRight=!1,e.prototype.shouldRequeryDimensions=!1,e.prototype.minTravel=0,e.prototype.isForcedAbsolute=!1,e.prototype.isForcedRelative=!1,e.prototype.setSprites=function(e){var i,n,r;if(this.clearSprites(),e instanceof t)return this.sprites=function(){var i,n,s;for(s=[],i=0,n=e.length;n>i;i++)r=e[i],s.push(new Y(t(r),this));return s}.call(this);for(i=0,n=e.length;n>i;i++)(r=e[i]).follower=this;return this.sprites=e},e.prototype.clearSprites=function(){var t,e,i;for(t=0,e=(i=this.sprites).length;e>t;t++)i[t].clear();return this.sprites=[]},e.prototype.cacheDimensions=function(){var t,e,i,n,r,s;for(r=this.scroller.scrollEl,e=dt(r),s=r.scrollTop(),this.viewportRect={left:e,right:e+r[0].clientWidth,top:s,bottom:s+r[0].clientHeight},this.scrollbarWidths=this.scroller.getScrollbarWidths(),this.contentOffset=this.scroller.innerEl.offset(),t=0,i=(n=this.sprites).length;i>t;t++)n[t].cacheDimensions()},e.prototype.forceAbsolute=function(){var t,e,i,n,r;for(this.isForcedAbsolute=!0,n=[],t=0,e=(i=this.sprites).length;e>t;t++)r=i[t],n.push(r.doAbsolute?void 0:r.assignPosition());return n},e.prototype.forceRelative=function(){var t,e,i,n,r;for(this.isForcedRelative=!0,n=[],t=0,e=(i=this.sprites).length;e>t;t++)r=i[t],n.push(r.doAbsolute?r.assignPosition():void 0);return n},e.prototype.clearForce=function(){var t,e,i,n,r;for(this.isForcedRelative=!1,this.isForcedAbsolute=!1,n=[],t=0,e=(i=this.sprites).length;e>t;t++)r=i[t],n.push(r.assignPosition());return n},e.prototype.update=function(){return this.cacheDimensions(),this.updatePositions()},e.prototype.updatePositions=function(){var t,e,i;for(t=0,e=(i=this.sprites).length;e>t;t++)i[t].updatePosition()},e.prototype.getContentRect=function(t){var e,i,n;return e=(i=t.offset()).left+parseFloat(t.css("border-left-width"))+parseFloat(t.css("padding-left"))-this.contentOffset.left,n=i.top+parseFloat(t.css("border-left-width"))+parseFloat(t.css("padding-left"))-this.contentOffset.top,{left:e,right:e+t.width(),top:n,bottom:n+t.height()}},e.prototype.getBoundingRect=function(t){var e,i,n;return e=(i=t.offset()).left-this.contentOffset.left,n=i.top-this.contentOffset.top,{left:e,right:e+t.outerWidth(),top:n,bottom:n+t.outerHeight()}},e}(),Y=function(){function t(t,e){this.el=t,this.follower=null!=e?e:null,this.isBlock="block"===this.el.css("display"),this.el.css("position","relative")}return t.prototype.follower=null,t.prototype.el=null,t.prototype.absoluteEl=null,t.prototype.naturalRect=null,t.prototype.parentRect=null,t.prototype.containerRect=null,t.prototype.isEnabled=!0,t.prototype.isHFollowing=!1,t.prototype.isVFollowing=!1,t.prototype.doAbsolute=!1,t.prototype.isAbsolute=!1,t.prototype.isCentered=!1,t.prototype.rect=null,t.prototype.isBlock=!1,t.prototype.naturalWidth=null,t.prototype.disable=function(){return this.isEnabled?(this.isEnabled=!1,this.resetPosition(),this.unabsolutize()):void 0},t.prototype.enable=function(){return this.isEnabled?void 0:(this.isEnabled=!0,this.assignPosition())},t.prototype.clear=function(){return this.disable(),this.follower=null,this.absoluteEl=null},t.prototype.cacheDimensions=function(){var t,e,i,n,r,s,o,a;return n=!1,r=!1,i=!1,this.naturalWidth=this.el.width(),this.resetPosition(),e=this.follower,o=this.naturalRect=e.getBoundingRect(this.el),a=this.el.parent(),this.parentRect=e.getBoundingRect(a),t=this.containerRect=yt(e.getContentRect(a),o),s=e.minTravel,e.containOnNaturalLeft&&(t.left=o.left),e.containOnNaturalRight&&(t.right=o.right),e.isHFollowing&&lt(t)-lt(o)>=s&&(i="center"===this.el.css("text-align"),n=!0),e.isVFollowing&&at(t)-at(o)>=s&&(r=!0),this.isHFollowing=n,this.isVFollowing=r,this.isCentered=i},t.prototype.updatePosition=function(){return this.computePosition(),this.assignPosition()},t.prototype.resetPosition=function(){return this.el.css({top:"",left:""})},t.prototype.computePosition=function(){var t,e,i,n,r,s,o,a;return o=this.follower.viewportRect,i=this.parentRect,t=this.containerRect,n=null,e=!1,(a=gt(o,i))&&(n=Q(this.naturalRect),s=gt(n,i),(this.isCentered&&!Ht(o,i)||s&&!Ht(o,s))&&(e=!0,this.isHFollowing&&(this.isCentered?(r=lt(n),n.left=(a.left+a.right)/2-r/2,n.right=n.left+r):ct(n,o)||(e=!1),ct(n,t)&&(e=!1)),this.isVFollowing&&(Ft(n,o)||(e=!1),Ft(n,t)&&(e=!1)),Ht(o,n)||(e=!1))),this.rect=n,this.doAbsolute=e},t.prototype.assignPosition=function(){var t,e;return this.isEnabled?this.rect?!this.doAbsolute&&!this.follower.isForcedAbsolute||this.follower.isForcedRelative?(e=this.rect.top-this.naturalRect.top,t=this.rect.left-this.naturalRect.left,this.unabsolutize(),this.el.toggleClass("fc-following",Boolean(e||t)).css({top:e,left:t})):(this.absolutize(),this.absoluteEl.css({top:this.rect.top-this.follower.viewportRect.top+this.follower.scrollbarWidths.top,left:this.rect.left-this.follower.viewportRect.left+this.follower.scrollbarWidths.left,width:this.isBlock?this.naturalWidth:""})):this.unabsolutize():void 0},t.prototype.absolutize=function(){return this.isAbsolute?void 0:(this.absoluteEl||(this.absoluteEl=this.buildAbsoluteEl()),this.absoluteEl.appendTo(this.follower.scroller.el),this.el.css("visibility","hidden"),this.isAbsolute=!0)},t.prototype.unabsolutize=function(){return this.isAbsolute?(this.absoluteEl.detach(),this.el.css("visibility",""),this.isAbsolute=!1):void 0},t.prototype.buildAbsoluteEl=function(){return this.el.clone().addClass("fc-following").css({position:"absolute","z-index":1e3,"font-weight":this.el.css("font-weight"),"font-size":this.el.css("font-size"),"font-family":this.el.css("font-family"),color:this.el.css("color"),"padding-top":this.el.css("padding-top"),"padding-bottom":this.el.css("padding-bottom"),"padding-left":this.el.css("padding-left"),"padding-right":this.el.css("padding-right"),"pointer-events":"none"})},t}(),Q=function(t){return{left:t.left,right:t.right,top:t.top,bottom:t.bottom}},lt=function(t){return t.right-t.left},at=function(t){return t.bottom-t.top},Ht=function(t,e){return Mt(t,e)&&zt(t,e)},Mt=function(t,e){return e.left>=t.left&&e.right<=t.right},zt=function(t,e){return e.top>=t.top&&e.bottom<=t.bottom},ct=function(t,e){return t.left<e.left?(t.right=e.left+lt(t),t.left=e.left,!0):t.right>e.right&&(t.left=e.right-lt(t),t.right=e.right,!0)},Ft=function(t,e){return t.top<e.top?(t.bottom=e.top+at(t),t.top=e.top,!0):t.bottom>e.bottom&&(t.top=e.bottom-at(t),t.bottom=e.bottom,!0)},yt=function(t,e){return{left:Math.min(t.left,e.left),right:Math.max(t.right,e.right),top:Math.min(t.top,e.top),bottom:Math.max(t.bottom,e.bottom)}},r=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Yt(e,n),e.prototype.resourceManager=null,e.prototype.initialize=function(){return this.resourceManager=new E(this)},e.prototype.instantiateView=function(t){var e,i;return i=(e=this.getViewSpec(t))["class"],this.options.resources&&!1!==e.options.resources&&(e.queryResourceClass?i=e.queryResourceClass(e)||i:e.resourceClass&&(i=e.resourceClass)),new i(this,t,e.options,e.duration)},e.prototype.getResources=function(){return this.resourceManager.topLevelResources},e.prototype.addResource=function(t,e){var i;null==e&&(e=!1),i=this.resourceManager.addResource(t),e&&this.view.scrollToResource&&i.done(function(t){return function(e){return t.view.scrollToResource(e)}}(this))},e.prototype.removeResource=function(t){return this.resourceManager.removeResource(t)},e.prototype.refetchResources=function(){this.resourceManager.fetchResources()},e.prototype.rerenderResources=function(){this.resourceManager.resetResources()},e.prototype.getPeerEvents=function(t,i){var n,r,s,o,a,l,d,h,c,u,p,f,g;for(p=e.__super__.getPeerEvents.apply(this,arguments),c=t.resourceId?[t.resourceId]:i?this.getEventResourceIds(i):[],n=[],s=0,l=p.length;l>s;s++){if(u=p[s],r=!1,(g=this.getEventResourceIds(u)).length&&c.length){for(o=0,d=g.length;d>o;o++)for(f=g[o],a=0,h=c.length;h>a;a++)if(c[a]===f){r=!0;break}}else r=!0;r&&n.push(u)}return n},e.prototype.buildSelectSpan=function(t,i,n){var r;return r=e.__super__.buildSelectSpan.apply(this,arguments),n&&(r.resourceId=n),r},e.prototype.getResourceById=function(t){return this.resourceManager.getResourceById(t)},e.prototype.getEventResourceId=function(t){return this.getEventResourceIds(t)[0]},e.prototype.getEventResourceIds=function(t){var e,i,n,r,s,o,a,l;if(l=String(null!=(s=null!=(o=t[this.getEventResourceField()])?o:t.resourceId)?s:""))return[l];if(t.resourceIds){for(r=[],e=0,i=(a=t.resourceIds).length;i>e;e++)l=a[e],(n=String(null!=l?l:""))&&r.push(n);return r}return[]},e.prototype.setEventResourceId=function(t,e){return t[this.getEventResourceField()]=String(null!=e?e:"")},e.prototype.getEventResourceField=function(){return this.options.eventResourceField||"resourceId"},e.prototype.getResourceEvents=function(e){var i;return(i="object"==typeof e?e:this.getResourceById(e))?this.clientEvents(function(e){return function(n){return-1!==t.inArray(i.id,e.getEventResourceIds(n))}}(this)):[]},e.prototype.getEventResource=function(t){return this.getEventResources(t)[0]},e.prototype.getEventResources=function(t){var e,i,n,r,s,o,a;if(a=[],e="object"==typeof t?t:this.clientEvents(t)[0])for(i=0,n=(r=this.getEventResourceIds(e)).length;n>i;i++)o=r[i],(s=this.getResourceById(o))&&a.push(s);return a},e}(),n.prototype=r.prototype,Ct=B.prototype.displayView,B.prototype.renderSkeleton,Dt=B.prototype.unrenderSkeleton,St=B.prototype.displayEvents,B.prototype.isResourcesBound=!1,B.prototype.settingResources=null,B.prototype.displayView=function(){return Ct.apply(this,arguments),Tt(this.calendar.options.schedulerLicenseKey,this.el),this.bindResources(),this.whenResources()},B.prototype.unrenderSkeleton=function(){return Dt.apply(this,arguments),this.unbindResources()},B.prototype.displayEvents=function(t){return this.whenResources((e=this,function(){return St.call(e,t)}));var e},B.prototype.bindResources=function(){var e;return this.isResourcesBound?void 0:(this.isResourcesBound=!0,this.settingResources=t.Deferred(),e=function(t){return function(e){return t.setResources(e),t.settingResources.resolve()}}(this),this.calendar.resourceManager.on("set",this._setResources=e).on("unset",this._unsetResources=kt(this,"unsetResources")).on("reset",this._resetResources=kt(this,"resetResources")).on("add",this._addResource=kt(this,"addResource")).on("remove",this._removeResource=kt(this,"removeResource")),this.calendar.resourceManager.hasFetched()?e(this.calendar.resourceManager.topLevelResources):this.calendar.resourceManager.getResources())},B.prototype.unbindResources=function(){return this.isResourcesBound?(this.calendar.resourceManager.off("set",this._setResources).off("unset",this._unsetResources).off("reset",this._resetResources).off("add",this._addResource).off("remove",this._removeResource),"resolved"===this.settingResources.state()&&this.unsetResources(),this.settingResources=null,this.isResourcesBound=!1):void 0},B.prototype.whenResources=function(e){return"resolved"===this.settingResources.state()?t.when(e?e():void 0):e?this.settingResources.then(e):this.settingResources.promise()},B.prototype.setResources=function(){},B.prototype.unsetResources=function(){},B.prototype.resetResources=function(){return this.calendar.rerenderEvents()},B.prototype.addResource=function(){return this.resetResources(this.calendar.resourceManager.topLevelResources)},B.prototype.removeResource=function(){return this.resetResources(this.calendar.resourceManager.topLevelResources)},xt=u.prototype.getSegClasses,u.prototype.getSegClasses=function(t){var e,i,n,r,s;for(e=xt.apply(this,arguments),i=0,n=(r=this.getSegResources(t)).length;n>i;i++)s=r[i],e=e.concat(s.eventClassName||[]);return e},u.prototype.getSegSkinCss=function(t){var e,i,n,r,s,o,a,l,d,h;return h=this.view,l=(e=t.event).source||{},i=e.color,d=l.color,o=h.opt("eventColor"),a=this.getSegResources(t),n=function(){var t,e,i,n;for(n=null,e=0,i=a.length;i>e;e++)for(t=a[e];t&&!n;)n=t.eventBackgroundColor||t.eventColor,t=t._parent;return n},r=function(){var t,e,i,n;for(n=null,e=0,i=a.length;i>e;e++)for(t=a[e];t&&!n;)n=t.eventBorderColor||t.eventColor,t=t._parent;return n},s=function(){var t,e,i,n;for(n=null,e=0,i=a.length;i>e;e++)for(t=a[e];t&&!n;)n=t.eventTextColor,t=t._parent;return n},{"background-color":e.backgroundColor||i||n()||l.backgroundColor||d||h.opt("eventBackgroundColor")||o,"border-color":e.borderColor||i||r()||l.borderColor||d||h.opt("eventBorderColor")||o,color:e.textColor||s()||l.textColor||h.opt("eventTextColor")}},u.prototype.getSegResources=function(t){return t.resource?[t.resource]:this.view.calendar.getEventResources(t.event)},E=function(){function e(t){this.calendar=t,this.initializeCache()}return Yt(e,s),e.mixin(d),e.resourceGuid=1,e.ajaxDefaults={dataType:"json",cache:!1},e.prototype.calendar=null,e.prototype.topLevelResources=null,e.prototype.resourcesById=null,e.prototype.fetching=null,e.prototype.hasFetched=function(){return this.fetching&&"resolved"===this.fetching.state()},e.prototype.getResources=function(){var e;return this.fetching?t.Deferred().resolve(this.topLevelResources).promise():(e=t.Deferred(),this.fetchResources().done(function(t){return e.resolve(t)}).fail(function(){return e.resolve([])}),e)},e.prototype.fetchResources=function(){var e;return e=this.fetching,t.when(e).then(function(t){return function(){return t.fetching=t.fetchResourceInputs().then(function(i){return t.setResources(i,Boolean(e)),t.topLevelResources})}}(this))},e.prototype.fetchResourceInputs=function(){var i,n,r;switch(i=t.Deferred(),r=this.calendar.options.resources,"string"===t.type(r)&&(r={url:r}),t.type(r)){case"function":r(function(t){return i.resolve(t)});break;case"object":n=t.ajax(t.extend({},e.ajaxDefaults,r));break;case"array":i.resolve(r);break;default:i.resolve([])}return n||(n=i.promise()),"pending"===!n.state()&&(this.calendar.pushLoading(),n.always(function(){return this.calendar.popLoading()})),n},e.prototype.resetResources=function(){return this.getResources().then((t=this,function(){return t.trigger("reset",t.topLevelResources)}));var t},e.prototype.getResourceById=function(t){return this.resourcesById[t]},e.prototype.initializeCache=function(){return this.topLevelResources=[],this.resourcesById={}},e.prototype.setResources=function(t,e){var i,n,r,s,o,a;for(this.initializeCache(),o=function(){var e,i,n;for(n=[],e=0,i=t.length;i>e;e++)s=t[e],n.push(this.buildResource(s));return n}.call(this),a=function(){var t,e,i;for(i=[],t=0,e=o.length;e>t;t++)r=o[t],this.addResourceToIndex(r)&&i.push(r);return i}.call(this),i=0,n=a.length;n>i;i++)r=a[i],this.addResourceToTree(r);return e?this.trigger("reset",this.topLevelResources):this.trigger("set",this.topLevelResources),this.calendar.trigger("resourcesSet",null,this.topLevelResources)},e.prototype.addResource=function(e){return t.when(this.fetching).then(function(t){return function(){var i;return i=t.buildResource(e),!!t.addResourceToIndex(i)&&(t.addResourceToTree(i),t.trigger("add",i),i)}}(this))},e.prototype.addResourceToIndex=function(t){var e,i,n,r;if(this.resourcesById[t.id])return!1;for(this.resourcesById[t.id]=t,i=0,n=(r=t.children).length;n>i;i++)e=r[i],this.addResourceToIndex(e);return!0},e.prototype.addResourceToTree=function(t){var e,i,n,r;if(!t.parent){if(i=String(null!=(n=t.parentId)?n:"")){if(!(e=this.resourcesById[i]))return!1;t.parent=e,r=e.children}else r=this.topLevelResources;r.push(t)}return!0},e.prototype.removeResource=function(e){var i;return i="object"==typeof e?e.id:e,t.when(this.fetching).then(function(t){return function(){var e;return(e=t.removeResourceFromIndex(i))&&(t.removeResourceFromTree(e),t.trigger("remove",e)),e}}(this))},e.prototype.removeResourceFromIndex=function(t){var e,i,n,r,s;if(s=this.resourcesById[t]){for(delete this.resourcesById[t],i=0,n=(r=s.children).length;n>i;i++)e=r[i],this.removeResourceFromIndex(e.id);return s}return!1},e.prototype.removeResourceFromTree=function(t,e){var i,n,r,s;for(null==e&&(e=this.topLevelResources),i=n=0,r=e.length;r>n;i=++n){if((s=e[i])===t)return t.parent=null,e.splice(i,1),!0;if(this.removeResourceFromTree(t,s.children))return!0}return!1},e.prototype.buildResource=function(i){var n,r,s,o,a;return(a=t.extend({},i)).id=String(null!=(o=i.id)?o:"_fc"+e.resourceGuid++),s=i.eventClassName,a.eventClassName=function(){switch(t.type(s)){case"string":return s.split(/\s+/);case"array":return s;default:return[]}}(),a.children=function(){var t,e,s,o,l;for(l=[],t=0,e=(o=null!=(s=i.children)?s:[]).length;e>t;t++)r=o[t],(n=this.buildResource(r)).parent=a,l.push(n);return l}.call(this),a},e}(),M=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Yt(e,B),e.prototype.resourceTextFunc=null,e.prototype.unsetResources=function(){return this.clearEvents()},e.prototype.resetResources=function(t){var e;return e=this.queryScroll(),this.unsetResources(),this.setResources(t),this.setScroll(e),this.calendar.rerenderEvents()},e.prototype.getResourceText=function(t){return this.getResourceTextFunc()(t)},e.prototype.getResourceTextFunc=function(){var t;return this.resourceTextFunc?this.resourceTextFunc:("function"!=typeof(t=this.opt("resourceText"))&&(t=function(t){return t.title||t.id}),this.resourceTextFunc=t)},e.prototype.triggerDayClick=function(t,e,i){var n;return n=this.calendar.resourceManager,this.trigger("dayClick",e,this.calendar.applyTimezone(t.start),i,this,n.getResourceById(t.resourceId))},e.prototype.triggerSelect=function(t,e){var i;return i=this.calendar.resourceManager,this.trigger("select",null,this.calendar.applyTimezone(t.start),this.calendar.applyTimezone(t.end),e,this,i.getResourceById(t.resourceId))},e.prototype.triggerExternalDrop=function(t,e,i,n,r){return this.trigger("drop",i[0],e.start,n,r,e.resourceId),t?this.trigger("eventReceive",null,t):void 0},e.prototype.reportEventDrop=function(){var t,i,n;return i=arguments[0],t=arguments[1],n=3<=arguments.length?Gt.call(arguments,2):[],(t=this.normalizeDropLocation(t)).resourceId&&i.resourceIds&&(t.resourceIds=null),e.__super__.reportEventDrop.apply(this,[i,t].concat(Gt.call(n)))},e.prototype.reportExternalDrop=function(){var t,i,n;return i=arguments[0],t=arguments[1],n=3<=arguments.length?Gt.call(arguments,2):[],t=this.normalizeDropLocation(t),e.__super__.reportExternalDrop.apply(this,[i,t].concat(Gt.call(n)))},e.prototype.normalizeDropLocation=function(e){var i;return delete(i=t.extend({},e)).resourceId,this.calendar.setEventResourceId(i,e.resourceId),i},e}(),D=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Yt(e,u),e.prototype.allowCrossResource=!0,e.prototype.eventRangeToSpans=function(i,n){var r,s,o,a,l;if((a=this.view.calendar.getEventResourceIds(n)).length){for(l=[],r=0,s=a.length;s>r;r++)o=a[r],l.push(t.extend({},i,{resourceId:o}));return l}return c.isBgEvent(n)?e.__super__.eventRangeToSpans.apply(this,arguments):[]},e.prototype.fabricateHelperEvent=function(t){var i;return i=e.__super__.fabricateHelperEvent.apply(this,arguments),this.view.calendar.setEventResourceId(i,t.resourceId),i},e.prototype.computeEventDrop=function(t,i){var n;return!0||t.resourceId===i.resourceId?((n=e.__super__.computeEventDrop.apply(this,arguments))&&(n.resourceId=i.resourceId),n):null},e.prototype.computeExternalDrop=function(t){var i;return(i=e.__super__.computeExternalDrop.apply(this,arguments))&&(i.resourceId=t.resourceId),i},e.prototype.computeEventResize=function(t,i,n){var r;if(this.allowCrossResource||i.resourceId===n.resourceId)return(r=e.__super__.computeEventResize.apply(this,arguments))&&(r.resourceId=i.resourceId),r},e.prototype.computeSelectionSpan=function(t,i){var n;if(this.allowCrossResource||t.resourceId===i.resourceId)return(n=e.__super__.computeSelectionSpan.apply(this,arguments))&&(n.resourceId=t.resourceId),n},e}(),x={flattenedResources:null,resourceCnt:0,datesAboveResources:!1,allowCrossResource:!1,setResources:function(t){return this.flattenedResources=this.flattenResources(t),this.resourceCnt=this.flattenedResources.length,this.updateDayTableCols()},unsetResources:function(){return this.flattenedResources=null,this.resourceCnt=0,this.updateDayTableCols()},flattenResources:function(t){var e,i,n,r;return(i=this.view.opt("resourceOrder"))?(e=Et(i),r=function(t,i){return U(t,i,e)}):r=null,n=[],this.accumulateResources(t,r,n),n},accumulateResources:function(t,e,i){var n,r,s,o,a;for(e?(a=t.slice(0)).sort(e):a=t,o=[],n=0,r=a.length;r>n;n++)s=a[n],i.push(s),o.push(this.accumulateResources(s.children,e,i));return o},updateDayTableCols:function(){return this.datesAboveResources=this.view.opt("groupByDateAndResource"),c.DayTableMixin.updateDayTableCols.call(this)},computeColCnt:function(){return(this.resourceCnt||1)*this.daysPerRow},getColDayIndex:function(t){return this.isRTL&&(t=this.colCnt-1-t),
this.datesAboveResources?Math.floor(t/(this.resourceCnt||1)):t%this.daysPerRow},getColResource:function(t){return this.flattenedResources[this.getColResourceIndex(t)]},getColResourceIndex:function(t){return this.isRTL&&(t=this.colCnt-1-t),this.datesAboveResources?t%(this.resourceCnt||1):Math.floor(t/this.daysPerRow)},indicesToCol:function(t,e){var i;return i=this.datesAboveResources?e*(this.resourceCnt||1)+t:t*this.daysPerRow+e,this.isRTL&&(i=this.colCnt-1-i),i},renderHeadTrHtml:function(){return this.resourceCnt?this.daysPerRow>1?this.datesAboveResources?this.renderHeadDateAndResourceHtml():this.renderHeadResourceAndDateHtml():this.renderHeadResourceHtml():c.DayTableMixin.renderHeadTrHtml.call(this)},renderHeadResourceHtml:function(){var t,e,i,n,r;for(r=[],t=0,e=(i=this.flattenedResources).length;e>t;t++)n=i[t],r.push(this.renderHeadResourceCellHtml(n));return this.wrapTr(r,"renderHeadIntroHtml")},renderHeadResourceAndDateHtml:function(){var t,e,i,n,r,s,o,a,l,d;for(d=[],e=[],n=0,s=(o=this.flattenedResources).length;s>n;n++)for(l=o[n],d.push(this.renderHeadResourceCellHtml(l,null,this.daysPerRow)),i=r=0,a=this.daysPerRow;a>r;i=r+=1)t=this.dayDates[i].clone(),e.push(this.renderHeadResourceDateCellHtml(t,l));return this.wrapTr(d,"renderHeadIntroHtml")+this.wrapTr(e,"renderHeadIntroHtml")},renderHeadDateAndResourceHtml:function(){var t,e,i,n,r,s,o,a,l,d;for(e=[],d=[],i=n=0,o=this.daysPerRow;o>n;i=n+=1)for(t=this.dayDates[i].clone(),e.push(this.renderHeadDateCellHtml(t,this.resourceCnt)),r=0,s=(a=this.flattenedResources).length;s>r;r++)l=a[r],d.push(this.renderHeadResourceCellHtml(l,t));return this.wrapTr(e,"renderHeadIntroHtml")+this.wrapTr(d,"renderHeadIntroHtml")},renderHeadResourceCellHtml:function(t,e,i){return'<th class="fc-resource-cell" data-resource-id="'+t.id+'"'+(e?' data-date="'+e.format("YYYY-MM-DD")+'"':"")+(i>1?' colspan="'+i+'"':"")+">"+pt(this.view.getResourceText(t))+"</th>"},renderHeadResourceDateCellHtml:function(t,e,i){return this.renderHeadDateCellHtml(t,i,'data-resource-id="'+e.id+'"')},processHeadResourceEls:function(e){return e.find(".fc-resource-cell").each(function(e){return function(i,n){var r;return r=e.datesAboveResources?e.getColResource(i):e.flattenedResources[e.isRTL?e.flattenedResources.length-1-i:i],e.view.trigger("resourceRender",r,r,t(n),t())}}(this))},renderBgCellsHtml:function(t){var e,i,n,r,s,o;if(this.resourceCnt){for(n=[],e=r=0,s=this.colCnt;s>r;e=r+=1)i=this.getCellDate(t,e),o=this.getColResource(e),n.push(this.renderResourceBgCellHtml(i,o));return n.join("")}return c.DayTableMixin.renderBgCellsHtml.call(this,t)},renderResourceBgCellHtml:function(t,e){return this.renderBgCellHtml(t,'data-resource-id="'+e.id+'"')},wrapTr:function(t,e){return this.isRTL?(t.reverse(),"<tr>"+t.join("")+this[e]()+"</tr>"):"<tr>"+this[e]()+t.join("")+"</tr>"}},C=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return Yt(i,e),i.mixin(D),i.mixin(x),i.prototype.getHitSpan=function(t){var e;return e=i.__super__.getHitSpan.apply(this,arguments),this.resourceCnt&&(e.resourceId=this.getColResource(t.col).id),e},i.prototype.spanToSegs=function(e){var i,n,r,s,o,a,l,d,h,c,u,p,f;if(h=this.resourceCnt,n=this.datesAboveResources?this.sliceRangeByDay(e):this.sliceRangeByRow(e),h){for(p=[],s=0,l=n.length;l>s;s++)for(f=n[s],c=o=0,d=h;d>o;c=o+=1)u=this.flattenedResources[c],e.resourceId&&e.resourceId!==u.id||((i=t.extend({},f)).resource=u,this.isRTL?(i.leftCol=this.indicesToCol(c,f.lastRowDayIndex),i.rightCol=this.indicesToCol(c,f.firstRowDayIndex)):(i.leftCol=this.indicesToCol(c,f.firstRowDayIndex),i.rightCol=this.indicesToCol(c,f.lastRowDayIndex)),p.push(i));return p}for(r=0,a=n.length;a>r;r++)f=n[r],this.isRTL?(f.leftCol=f.lastRowDayIndex,f.rightCol=f.firstRowDayIndex):(f.leftCol=f.firstRowDayIndex,f.rightCol=f.lastRowDayIndex);return n},i}(c.DayGrid),R=function(e){function i(){return i.__super__.constructor.apply(this,arguments)}return Yt(i,e),i.mixin(D),i.mixin(x),i.prototype.getHitSpan=function(t){var e;return e=i.__super__.getHitSpan.apply(this,arguments),this.resourceCnt&&(e.resourceId=this.getColResource(t.col).id),e},i.prototype.spanToSegs=function(e){var i,n,r,s,o,a,l,d,h,c,u,p,f;if(h=this.resourceCnt,n=this.sliceRangeByTimes(e),h){for(p=[],s=0,l=n.length;l>s;s++)for(f=n[s],c=o=0,d=h;d>o;c=o+=1)u=this.flattenedResources[c],e.resourceId&&e.resourceId!==u.id||((i=t.extend({},f)).resource=u,i.col=this.indicesToCol(c,f.dayIndex),p.push(i));return p}for(r=0,a=n.length;a>r;r++)(f=n[r]).col=f.dayIndex;return n},i}(c.TimeGrid),W=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Yt(t,B),t.prototype.timeGrid=null,t.prototype.isScrolled=!1,t.prototype.initialize=function(){return this.timeGrid=this.instantiateGrid(),this.intervalDuration=this.timeGrid.duration},t.prototype.instantiateGrid=function(){return new A(this)},t.prototype.setRange=function(e){return t.__super__.setRange.apply(this,arguments),this.timeGrid.setRange(e)},t.prototype.renderSkeleton=function(){return this.el.addClass("fc-timeline"),!1===this.opt("eventOverlap")&&this.el.addClass("fc-no-overlap"),this.el.html(this.renderSkeletonHtml()),this.renderTimeGridSkeleton()},t.prototype.renderSkeletonHtml=function(){return'<table> <thead class="fc-head"> <tr> <td class="fc-time-area '+this.widgetHeaderClass+'"></td> </tr> </thead> <tbody class="fc-body"> <tr> <td class="fc-time-area '+this.widgetContentClass+'"></td> </tr> </tbody> </table>'},t.prototype.renderTimeGridSkeleton=function(){return this.timeGrid.setElement(this.el.find("tbody .fc-time-area")),this.timeGrid.headEl=this.el.find("thead .fc-time-area"),this.timeGrid.renderSkeleton(),this.isScrolled=!1,this.timeGrid.bodyScroller.on("scroll",kt(this,"handleBodyScroll"))},t.prototype.handleBodyScroll=function(t){if(t){if(!this.isScrolled)return this.isScrolled=!0,this.el.addClass("fc-scrolled")}else if(this.isScrolled)return this.isScrolled=!1,this.el.removeClass("fc-scrolled")},t.prototype.unrenderSkeleton=function(){return this.timeGrid.removeElement(),this.handleBodyScroll(0),t.__super__.unrenderSkeleton.apply(this,arguments)},t.prototype.renderDates=function(){return this.timeGrid.renderDates()},t.prototype.unrenderDates=function(){return this.timeGrid.unrenderDates()},t.prototype.renderBusinessHours=function(){return this.timeGrid.renderBusinessHours()},t.prototype.unrenderBusinessHours=function(){return this.timeGrid.unrenderBusinessHours()},t.prototype.getNowIndicatorUnit=function(){return this.timeGrid.getNowIndicatorUnit()},t.prototype.renderNowIndicator=function(t){return this.timeGrid.renderNowIndicator(t)},t.prototype.unrenderNowIndicator=function(){return this.timeGrid.unrenderNowIndicator()},t.prototype.prepareHits=function(){return this.timeGrid.prepareHits()},t.prototype.releaseHits=function(){return this.timeGrid.releaseHits()},t.prototype.queryHit=function(t,e){return this.timeGrid.queryHit(t,e)},t.prototype.getHitSpan=function(t){return this.timeGrid.getHitSpan(t)},t.prototype.getHitEl=function(t){return this.timeGrid.getHitEl(t)},t.prototype.updateWidth=function(){return this.timeGrid.updateWidth()},t.prototype.setHeight=function(t,e){var i;return i=e?"auto":t-this.timeGrid.headHeight()-this.queryMiscHeight(),this.timeGrid.bodyScroller.setHeight(i)},t.prototype.queryMiscHeight=function(){return this.el.outerHeight()-this.timeGrid.headScroller.el.outerHeight()-this.timeGrid.bodyScroller.el.outerHeight()},t.prototype.computeInitialScroll=function(t){return this.timeGrid.computeInitialScroll(t)},t.prototype.queryScroll=function(){return this.timeGrid.queryScroll()},t.prototype.setScroll=function(t){return this.timeGrid.setScroll(t)},t.prototype.renderEvents=function(t){return this.timeGrid.renderEvents(t),this.updateWidth()},t.prototype.unrenderEvents=function(){return this.timeGrid.unrenderEvents(),this.updateWidth()},t.prototype.renderDrag=function(t,e){return this.timeGrid.renderDrag(t,e)},t.prototype.unrenderDrag=function(){return this.timeGrid.unrenderDrag()},t.prototype.getEventSegs=function(){return this.timeGrid.getEventSegs()},t.prototype.renderSelection=function(t){return this.timeGrid.renderSelection(t)},t.prototype.unrenderSelection=function(){return this.timeGrid.unrenderSelection()},t}(),J=c.cssToStr,A=function(){function i(){var t;i.__super__.constructor.apply(this,arguments),this.initScaleProps(),this.minTime=e.duration(this.opt("minTime")||"00:00"),this.maxTime=e.duration(this.opt("maxTime")||"24:00"),this.timeWindowMs=this.maxTime-this.minTime,this.snapDuration=(t=this.opt("snapDuration"))?e.duration(t):this.slotDuration,this.minResizeDuration=this.snapDuration,this.snapsPerSlot=it(this.slotDuration,this.snapDuration),this.slotWidth=this.opt("slotWidth")}return Yt(i,u),i.prototype.slotDates=null,i.prototype.slotCnt=null,i.prototype.snapCnt=null,i.prototype.snapsPerSlot=null,i.prototype.snapDiffToIndex=null,i.prototype.snapIndexToDiff=null,i.prototype.headEl=null,i.prototype.slatContainerEl=null,i.prototype.slatEls=null,i.prototype.containerCoordCache=null,i.prototype.slatCoordCache=null,i.prototype.slatInnerCoordCache=null,i.prototype.headScroller=null,i.prototype.bodyScroller=null,i.prototype.joiner=null,i.prototype.follower=null,i.prototype.eventTitleFollower=null,i.prototype.minTime=null,i.prototype.maxTime=null,i.prototype.timeWindowMs=null,i.prototype.slotDuration=null,i.prototype.snapDuration=null,i.prototype.duration=null,i.prototype.labelInterval=null,i.prototype.headerFormats=null,i.prototype.isTimeScale=null,i.prototype.largeUnit=null,i.prototype.emphasizeWeeks=!1,i.prototype.titleFollower=null,i.prototype.segContainerEl=null,i.prototype.segContainerHeight=null,i.prototype.bgSegContainerEl=null,i.prototype.helperEls=null,i.prototype.innerEl=null,i.prototype.opt=function(t){return this.view.opt(t)},i.prototype.isValidDate=function(t){return!this.view.isHiddenDay(t)&&(!this.isTimeScale||((t.time()-this.minTime)%864e5+864e5)%864e5<this.timeWindowMs)},i.prototype.computeDisplayEventTime=function(){return!this.isTimeScale},i.prototype.computeDisplayEventEnd=function(){return!1},i.prototype.computeEventTimeFormat=function(){return this.opt("extraSmallTimeFormat")},i.prototype.normalizeGridDate=function(t){var e;return this.isTimeScale?(e=t.clone()).hasTime()||e.time(0):(e=t.clone().stripTime(),this.largeUnit&&e.startOf(this.largeUnit)),e},i.prototype.normalizeGridRange=function(t){var e,i;return this.isTimeScale?i={start:this.normalizeGridDate(t.start),end:this.normalizeGridDate(t.end)}:(i=this.view.computeDayRange(t),this.largeUnit&&(i.start.startOf(this.largeUnit),(e=i.end.clone().startOf(this.largeUnit)).isSame(i.end)&&e.isAfter(i.start)||e.add(this.slotDuration),i.end=e)),i},i.prototype.rangeUpdated=function(){var t,e;for(this.start=this.normalizeGridDate(this.start).add(this.minTime),this.end=this.normalizeGridDate(this.end).subtract(1,"day").add(this.maxTime),e=[],t=this.start.clone();t<this.end;)this.isValidDate(t)&&e.push(t.clone()),t.add(this.slotDuration);return this.slotDates=e,this.updateGridDates()},i.prototype.updateGridDates=function(){var t,e,i,n,r;for(n=-1,e=0,i=[],r=[],t=this.start.clone();t<this.end;)this.isValidDate(t)?(n++,i.push(n),r.push(e)):i.push(n+.5),t.add(this.snapDuration),e++;return this.snapDiffToIndex=i,this.snapIndexToDiff=r,this.snapCnt=n+1,this.slotCnt=this.snapCnt/this.snapsPerSlot},i.prototype.spanToSegs=function(t){var e,i;return e=this.normalizeGridRange(t),this.computeDateSnapCoverage(t.start)<this.computeDateSnapCoverage(t.end)&&(i=ft(e,this))?(i.isStart&&!this.isValidDate(i.start)&&(i.isStart=!1),i.isEnd&&i.end&&!this.isValidDate(i.end.clone().subtract(1))&&(i.isEnd=!1),[i]):[]},i.prototype.prepareHits=function(){return this.buildCoords()},i.prototype.queryHit=function(t,e){var i,n,r,s,o,a,l,d,h,c,u,p;return p=this.snapsPerSlot,s=this.slatCoordCache,null!=(i=this.containerCoordCache).getVerticalIndex(e)&&null!=(o=s.getHorizontalIndex(t))?(d=s.getWidth(o),this.isRTL?(r=((l=s.getRightOffset(o))-t)/d,h=o*p+(n=Math.floor(r*p)),c=(u=l-n/p*d)-(n+1)/p*d):(r=(t-(a=s.getLeftOffset(o)))/d,h=o*p+(n=Math.floor(r*p)),c=a+n/p*d,u=a+(n+1)/p*d),{snap:h,component:this,left:c,right:u,top:i.getTopOffset(0),bottom:i.getBottomOffset(0)}):void 0},i.prototype.getHitSpan=function(t){return this.getSnapRange(t.snap)},i.prototype.getHitEl=function(t){return this.getSnapEl(t.snap)},i.prototype.getSnapRange=function(t){var e;return(e=this.start.clone()).add(wt(this.snapDuration,this.snapIndexToDiff[t])),{start:e,end:e.clone().add(this.snapDuration)}},i.prototype.getSnapEl=function(t){return this.slatEls.eq(Math.floor(t/this.snapsPerSlot))},i.prototype.renderSkeleton=function(){return this.headScroller=new P("invisible-scroll","hidden"),this.headEl.append(this.headScroller.el),this.bodyScroller=new P,this.el.append(this.bodyScroller.el),this.innerEl=this.bodyScroller.contentEl,this.slatContainerEl=t('<div class="fc-slats"/>').appendTo(this.bodyScroller.bgEl),this.segContainerEl=t('<div class="fc-event-container"/>').appendTo(this.bodyScroller.contentEl),this.bgSegContainerEl=this.bodyScroller.bgEl,this.containerCoordCache=new o({els:this.bodyScroller.innerEl,isHorizontal:!0,isVertical:!0}),this.joiner=new L("horizontal",[this.headScroller,this.bodyScroller]),this.follower=new G(this.headScroller),this.eventTitleFollower=new G(this.bodyScroller),this.eventTitleFollower.minTravel=50,this.isRTL?this.eventTitleFollower.containOnNaturalRight=!0:this.eventTitleFollower.containOnNaturalLeft=!0,i.__super__.renderSkeleton.apply(this,arguments)},i.prototype.headColEls=null,i.prototype.slatColEls=null,i.prototype.renderDates=function(){var t,e,i,n,r;for(this.headScroller.contentEl.html(this.renderHeadHtml()),this.headColEls=this.headScroller.contentEl.find("col"),this.slatContainerEl.html(this.renderSlatHtml()),this.slatColEls=this.slatContainerEl.find("col"),this.slatEls=this.slatContainerEl.find("td"),this.slatCoordCache=new o({els:this.slatEls,isHorizontal:!0}),this.slatInnerCoordCache=new o({els:this.slatEls.find("> div"),isHorizontal:!0,offsetParent:this.bodyScroller.innerEl}),e=i=0,n=(r=this.slotDates).length;n>i;e=++i)t=r[e],this.view.trigger("dayRender",null,t,this.slatEls.eq(e));return this.follower?this.follower.setSprites(this.headEl.find("tr:not(:last-child) span")):void 0},i.prototype.unrenderDates=function(){return this.follower&&this.follower.clearSprites(),this.headScroller.contentEl.empty(),this.slatContainerEl.empty(),this.headScroller.contentEl.add(this.bodyScroller.contentEl).css({minWidth:"",width:""})},i.prototype.renderHeadHtml=function(){var t,e,i,n,r,s,o,a,l,d,h,c,u,p,f,g,m,_,v,y,w,b,S,C,x,D,E,T,k,R,$,H,M,z,I,F;for(f=this.labelInterval,s=this.headerFormats,e=function(){var t,e,i;for(i=[],t=0,e=s.length;e>t;t++)r=s[t],i.push([]);return i}(),g=null,T=null,M=[],c=0,m=(z=this.slotDates).length;m>c;c++){for(F=(i=z[c]).week(),h=this.emphasizeWeeks&&null!==T&&T!==F,R=u=0,_=s.length;_>u;R=++u)r=s[R],g=($=e[R])[$.length-1],D=null,s.length>1&&R<s.length-1?(I=i.format(r),n=i.format(),g&&g.text===I?g.colspan+=1:D={text:I,dateData:n,colspan:1}):!g||_t(nt(this.start,i,f))?D={text:I=i.format(r),dateData:n=i.format(),colspan:1}:g.colspan+=1,D&&(D.weekStart=h,$.push(D));M.push({weekStart:h}),T=F}for(l=f>this.slotDuration,o="<table>",o+="<colgroup>",p=0,v=z.length;v>p;p++)i=z[p],o+="<col/>";for(o+="</colgroup>",o+="<tbody>",a=C=0,y=e.length;y>C;a=++C){for($=e[a],d=a===e.length-1,o+="<tr"+(l&&d?' class="fc-chrono"':"")+">",x=0,w=$.length;w>x;x++)t=$[x],o+='<th class="'+this.view.widgetHeaderClass+" "+(t.weekStart?"fc-em-cell":"")+'" data-date="'+t.dateData+'"'+(t.colspan>1?' colspan="'+t.colspan+'"':"")+'><div class="fc-cell-content"><span class="fc-cell-text">'+pt(t.text)+"</span></div></th>";o+="</tr>"}for(o+="</tbody></table>",H="<table>",H+="<colgroup>",E=0,b=M.length;b>E;E++)t=M[E],H+="<col/>";for(H+="</colgroup>",H+="<tbody><tr>",a=k=0,S=M.length;S>k;a=++k)t=M[a],i=z[a],H+=this.slatCellHtml(i,t.weekStart);return H+="</tr></tbody></table>",this._slatHtml=H,o},i.prototype.renderSlatHtml=function(){return this._slatHtml},i.prototype.slatCellHtml=function(t,e){var i;return this.isTimeScale?(i=[]).push(_t(nt(this.start,t,this.labelInterval))?"fc-major":"fc-minor"):(i=this.getDayClasses(t)).push("fc-day"),i.unshift(this.view.widgetContentClass),e&&i.push("fc-em-cell"),'<td class="'+i.join(" ")+'" data-date="'+t.format()+'"><div /></td>'},i.prototype.businessHourSegs=null,i.prototype.renderBusinessHours=function(){var t,e;return this.largeUnit?void 0:(t=this.view.calendar.getBusinessHoursEvents(!this.isTimeScale),e=this.businessHourSegs=this.eventsToSegs(t),this.renderFill("businessHours",e,"bgevent"))},i.prototype.unrenderBusinessHours=function(){return this.unrenderFill("businessHours")},i.prototype.nowIndicatorEls=null,i.prototype.getNowIndicatorUnit=function(){return this.isTimeScale?q(this.slotDuration):void 0},i.prototype.renderNowIndicator=function(e){var i,n,r;return r=[],(e=this.normalizeGridDate(e))>=this.start&&e<this.end&&(i=this.dateToCoord(e),n=this.isRTL?{right:-i}:{left:i},r.push(t("<div class='fc-now-indicator fc-now-indicator-arrow'></div>").css(n).appendTo(this.headScroller.innerEl)[0]),r.push(t("<div class='fc-now-indicator fc-now-indicator-line'></div>").css(n).appendTo(this.bodyScroller.innerEl)[0])),this.nowIndicatorEls=t(r)},i.prototype.unrenderNowIndicator=function(){return this.nowIndicatorEls?(this.nowIndicatorEls.remove(),this.nowIndicatorEls=null):void 0},i.prototype.explicitSlotWidth=null,i.prototype.defaultSlotWidth=null,i.prototype.updateWidth=function(){var t,e,i,n,r;return i=(r=Math.round(this.slotWidth||(this.slotWidth=this.computeSlotWidth())))*this.slotDates.length,e="",n=r,(t=this.bodyScroller.scrollEl[0].clientWidth)>i&&(e=t,i="",n=Math.floor(t/this.slotDates.length)),this.headScroller.setContentWidth(i),this.headScroller.setContentMinWidth(e),this.bodyScroller.setContentWidth(i),this.bodyScroller.setContentMinWidth(e),this.headColEls.slice(0,-1).add(this.slatColEls.slice(0,-1)).width(n),this.headScroller.update(),this.bodyScroller.update(),this.joiner.update(),this.buildCoords(),this.updateSegPositions(),this.follower&&this.follower.update(),this.eventTitleFollower?this.eventTitleFollower.update():void 0},i.prototype.computeSlotWidth=function(){var e,i,n,r,s;return i=0,this.headEl.find("tr:last-child th span").each(function(e,n){var r;return r=t(n).outerWidth(),i=Math.max(i,r)}),e=i+1,s=it(this.labelInterval,this.slotDuration),r=Math.ceil(e/s),(n=this.headColEls.eq(0).css("min-width"))&&((n=parseInt(n,10))&&(r=Math.max(r,n))),r},i.prototype.buildCoords=function(){return this.containerCoordCache.build(),this.slatCoordCache.build(),this.slatInnerCoordCache.build()},i.prototype.computeDateSnapCoverage=function(t){var e,i,n;return 0>(i=nt(this.start,t,this.snapDuration))?0:i>=this.snapDiffToIndex.length?this.snapCnt:(n=Math.floor(i),e=this.snapDiffToIndex[n],_t(e)?e+=i-n:e=Math.ceil(e),e)},i.prototype.dateToCoord=function(t){var e,i,n,r;return n=this.computeDateSnapCoverage(t)/this.snapsPerSlot,r=Math.floor(n),i=n-(r=Math.min(r,this.slotCnt-1)),e=this.slatInnerCoordCache,this.isRTL?e.getRightPosition(r)-e.getWidth(r)*i-this.containerCoordCache.getWidth(0):e.getLeftPosition(r)+e.getWidth(r)*i},i.prototype.rangeToCoords=function(t){return this.isRTL?{right:this.dateToCoord(t.start),left:this.dateToCoord(t.end)}:{left:this.dateToCoord(t.start),right:this.dateToCoord(t.end)}},i.prototype.headHeight=function(){var t;return(t=this.headScroller.contentEl.find("table")).height.apply(t,arguments)},i.prototype.updateSegPositions=function(){var t,e,i,n,r;for(e=0,i=(r=(this.segs||[]).concat(this.businessHourSegs||[])).length;i>e;e++)n=r[e],t=this.rangeToCoords(n),n.el.css({left:n.left=t.left,right:-(n.right=t.right)})},i.prototype.computeInitialScroll=function(){var t,i;return t=0,this.isTimeScale&&((i=this.opt("scrollTime"))&&(i=e.duration(i),t=this.dateToCoord(this.start.clone().time(i)))),{left:t,top:0}},i.prototype.queryScroll=function(){return{left:bt(this.bodyScroller.scrollEl),top:this.bodyScroller.scrollEl.scrollTop()}},i.prototype.setScroll=function(t){return bt(this.headScroller.scrollEl,t.left),bt(this.bodyScroller.scrollEl,t.left),this.bodyScroller.scrollEl.scrollTop(t.top)},i.prototype.renderFgSegs=function(t){return t=this.renderFgSegEls(t),this.renderFgSegsInContainers([[this,t]]),this.updateSegFollowers(t),t},i.prototype.unrenderFgSegs=function(){return this.clearSegFollowers(),this.unrenderFgContainers([this])},i.prototype.renderFgSegsInContainers=function(t){var e,i,n,r,s,o,a,l,d,h,c,u,p,f,g,m,_,v,y,w,b,S,C,x,D;for(n=0,o=t.length;o>n;n++)for(e=(y=t[n])[0],r=0,a=(D=y[1]).length;a>r;r++)x=D[r],i=this.rangeToCoords(x),x.el.css({left:x.left=i.left,right:-(x.right=i.right)});for(s=0,l=t.length;l>s;s++)for(e=(w=t[s])[0],f=0,d=(D=w[1]).length;d>f;f++)(x=D[f]).el.appendTo(e.segContainerEl);for(g=0,h=t.length;h>g;g++){for(e=(b=t[g])[0],m=0,c=(D=b[1]).length;c>m;m++)(x=D[m]).height=x.el.outerHeight(!0);this.buildSegLevels(D),e.segContainerHeight=X(D)}for(C=[],_=0,u=t.length;u>_;_++){for(e=(S=t[_])[0],v=0,p=(D=S[1]).length;p>v;v++)(x=D[v]).el.css("top",x.top);C.push(e.segContainerEl.height(e.segContainerHeight))}return C},i.prototype.buildSegLevels=function(t){var e,i,n,r,s,o,a,l,d,h,c,u,p,f;for(p=[],this.sortEventSegs(t),n=0,o=t.length;o>n;n++){for((f=t[n]).above=[],d=0;d<p.length;){for(i=!1,r=0,a=(c=p[d]).length;a>r;r++)h=c[r],It(f,h)&&(f.above.push(h),i=!0);if(!i)break;d+=1}for((p[d]||(p[d]=[])).push(f),d+=1;d<p.length;){for(s=0,l=(u=p[d]).length;l>s;s++)e=u[s],It(f,e)&&e.above.push(f);d+=1}}return p},i.prototype.unrenderFgContainers=function(t){var e,i,n,r;for(r=[],i=0,n=t.length;n>i;i++)(e=t[i]).segContainerEl.empty(),e.segContainerEl.height(""),r.push(e.segContainerHeight=null);return r},i.prototype.fgSegHtml=function(t){var e,i,n,r,s,o;return i=t.event,n=this.view.isEventDraggable(i),s=t.isStart&&this.view.isEventResizableFromStart(i),r=t.isEnd&&this.view.isEventResizableFromEnd(i),(e=this.getSegClasses(t,n,s||r)).unshift("fc-timeline-event","fc-h-event"),o=this.getEventTimeText(i),'<a class="'+e.join(" ")+'" style="'+J(this.getSegSkinCss(t))+'"'+(i.url?' href="'+pt(i.url)+'"':"")+'><div class="fc-content">'+(o?'<span class="fc-time">'+pt(o)+"</span>":"")+'<span class="fc-title">'+(i.title?pt(i.title):"&nbsp;")+'</span></div><div class="fc-bg" />'+(s?'<div class="fc-resizer fc-start-resizer"></div>':"")+(r?'<div class="fc-resizer fc-end-resizer"></div>':"")+"</a>"},i.prototype.updateSegFollowers=function(t){var e,i,n,r;if(this.eventTitleFollower){for(n=[],e=0,i=t.length;i>e;e++)(r=t[e].el.find(".fc-title")).length&&n.push(new Y(r));return this.eventTitleFollower.setSprites(n)}},i.prototype.clearSegFollowers=function(){return this.eventTitleFollower?this.eventTitleFollower.clearSprites():void 0},i.prototype.segDragStart=function(){return i.__super__.segDragStart.apply(this,arguments),this.eventTitleFollower?this.eventTitleFollower.forceRelative():void 0},i.prototype.segDragEnd=function(){return i.__super__.segDragEnd.apply(this,arguments),this.eventTitleFollower?this.eventTitleFollower.clearForce():void 0},i.prototype.segResizeStart=function(){return i.__super__.segResizeStart.apply(this,arguments),this.eventTitleFollower?this.eventTitleFollower.forceRelative():void 0},i.prototype.segResizeEnd=function(){return i.__super__.segResizeEnd.apply(this,arguments),this.eventTitleFollower?this.eventTitleFollower.clearForce():void 0},i.prototype.renderHelper=function(t,e){var i;return i=this.eventToSegs(t),i=this.renderFgSegEls(i),this.renderHelperSegsInContainers([[this,i]],e)},i.prototype.renderHelperSegsInContainers=function(e,i){var n,r,s,o,a,l,d,h,c,u,p,f,g,m,_,v,y;for(o=[],a=0,h=e.length;h>a;a++)for(n=(g=e[a])[0],l=0,c=(y=g[1]).length;c>l;l++)v=y[l],r=this.rangeToCoords(v),v.el.css({left:v.left=r.left,right:-(v.right=r.right)}),i&&i.resourceId===(null!=(m=n.resource)?m.id:void 0)?v.el.css("top",i.el.css("top")):v.el.css("top",0);for(d=0,u=e.length;u>d;d++)for(n=(_=e[d])[0],y=_[1],s=t('<div class="fc-event-container fc-helper-container"/>').appendTo(n.innerEl),o.push(s[0]),f=0,p=y.length;p>f;f++)v=y[f],s.append(v.el);return this.helperEls=this.helperEls?this.helperEls.add(t(o)):t(o)},i.prototype.unrenderHelper=function(){return this.helperEls?(this.helperEls.remove(),this.helperEls=null):void 0},i.prototype.renderEventResize=function(t,e){return this.renderHighlight(this.eventToSpan(t)),this.renderEventLocationHelper(t,e)},i.prototype.unrenderEventResize=function(){return this.unrenderHighlight(),this.unrenderHelper()},i.prototype.renderFill=function(t,e,i){return e=this.renderFillSegEls(t,e),this.renderFillInContainers(t,[[this,e]],i),e},i.prototype.renderFillInContainers=function(t,e,i){var n,r,s,o,a,l;for(a=[],r=0,s=e.length;s>r;r++)n=(o=e[r])[0],l=o[1],a.push(this.renderFillInContainer(t,n,l,i));return a},i.prototype.renderFillInContainer=function(e,i,n,r){var s,o,a,l,d;if(n.length){for(r||(r=e.toLowerCase()),s=t('<div class="fc-'+r+'-container" />').appendTo(i.bgSegContainerEl),a=0,l=n.length;l>a;a++)d=n[a],o=this.rangeToCoords(d),d.el.css({left:d.left=o.left,right:-(d.right=o.right)}),d.el.appendTo(s);return this.elsByFill[e]=this.elsByFill[e]?this.elsByFill[e].add(s):s}},i.prototype.renderDrag=function(t,e){return e?(this.renderEventLocationHelper(t,e),this.applyDragOpacity(this.helperEls),!0):(this.renderHighlight(this.eventToSpan(t)),!1)},i.prototype.unrenderDrag=function(){return this.unrenderHelper(),this.unrenderHighlight()},i}(),X=function(t){var e,i,n,r;for(n=0,e=0,i=t.length;i>e;e++)r=t[e],n=Math.max(n,Z(r));return n},Z=function(t){return null==t.top&&(t.top=X(t.above)),t.top+t.height},It=function(t,e){return t.left<e.right&&t.right>e.left},v=18,m=6,g=200,_=1e3,a={months:1},F=[{years:1},{months:1},{days:1},{hours:1},{minutes:30},{minutes:15},{minutes:10},{minutes:5},{minutes:1},{seconds:30},{seconds:15},{seconds:10},{seconds:5},{seconds:1},{milliseconds:500},{milliseconds:100},{milliseconds:10},{milliseconds:1}],A.prototype.initScaleProps=function(){var e,i,n;return this.labelInterval=this.queryDurationOption("slotLabelInterval"),this.slotDuration=this.queryDurationOption("slotDuration"),this.ensureGridDuration(),this.validateLabelAndSlot(),this.ensureLabelInterval(),this.ensureSlotDuration(),e=this.opt("slotLabelFormat"),n=t.type(e),this.headerFormats="array"===n?e:"string"===n?[e]:this.computeHeaderFormats(),this.isTimeScale=rt(this.slotDuration),this.largeUnit=this.isTimeScale?void 0:(i=q(this.slotDuration),/year|month|week/.test(i)?i:void 0),this.emphasizeWeeks=1===this.slotDuration.as("days")&&this.duration.as("weeks")>=2&&!this.opt("businessHours")},A.prototype.queryDurationOption=function(t){var i,n;return null!=(n=this.opt(t))&&+(i=e.duration(n))?i:void 0},A.prototype.validateLabelAndSlot=function(){var t;return this.labelInterval&&(it(this.duration,this.labelInterval)>_&&(c.warn("slotLabelInterval results in too many cells"),this.labelInterval=null)),this.slotDuration&&(it(this.duration,this.slotDuration)>_&&(c.warn("slotDuration results in too many cells"),this.slotDuration=null)),this.labelInterval&&this.slotDuration&&(t=it(this.labelInterval,this.slotDuration),!_t(t)||1>t)?(c.warn("slotLabelInterval must be a multiple of slotDuration"),this.slotDuration=null):void 0},A.prototype.ensureGridDuration=function(){var t,i,n,r;if(!(t=this.duration)){if(!(t=this.view.intervalDuration))if(this.labelInterval||this.slotDuration)for(r=this.ensureLabelInterval(),n=F.length-1;n>=0&&(i=F[n],t=e.duration(i),!(it(t,r)>=v));n+=-1);else t=e.duration(a);this.duration=t}return t},A.prototype.ensureLabelInterval=function(){var t,i,n,r,s,o,a,l;if(!(r=this.labelInterval)){if(this.duration||this.slotDuration||this.ensureGridDuration(),this.slotDuration){for(i=0,s=F.length;s>i;i++)if(t=F[i],l=e.duration(t),a=it(l,this.slotDuration),_t(a)&&m>=a){r=l;break}r||(r=this.slotDuration)}else for(n=0,o=F.length;o>n&&(t=F[n],r=e.duration(t),!(it(this.duration,r)>=v));n++);this.labelInterval=r}return r},A.prototype.ensureSlotDuration=function(){var t,i,n,r,s,o,a;if(!(s=this.slotDuration)){for(n=this.ensureLabelInterval(),i=0,r=F.length;r>i;i++)if(t=F[i],a=e.duration(t),o=it(n,a),_t(o)&&o>1&&m>=o){s=a;break}s&&this.duration&&(it(this.duration,s)>g&&(s=null)),s||(s=n),this.slotDuration=s}return s},A.prototype.computeHeaderFormats=function(){var t,e,i,n,r,s,o;switch(this.view,n=this.duration,r=this.labelInterval,s=q(r),o=this.opt("weekNumbers"),t=e=i=null,"week"!==s||o||(s="day"),s){case"year":t="YYYY";break;case"month":n.asYears()>1&&(t="YYYY"),e="MMM";break;case"week":n.asYears()>1&&(t="YYYY"),e=this.opt("shortWeekFormat");break;case"day":n.asYears()>1?t=this.opt("monthYearFormat"):n.asMonths()>1&&(t="MMMM"),o&&(e=this.opt("weekFormat")),i="dd D";break;case"hour":o&&(t=this.opt("weekFormat")),n.asDays()>1&&(e=this.opt("dayOfMonthFormat")),i=this.opt("smallTimeFormat");break;case"minute":r.asMinutes()/60>=m?(t=this.opt("hourFormat"),e="[:]mm"):t=this.opt("mediumTimeFormat");break;case"second":r.asSeconds()/60>=m?(t="LT",e="[:]ss"):t="LTS";break;case"millisecond":t="LTS",e="[.]SSS"}return[].concat(t||[],e||[],i||[])},c.views.timeline={"class":W,defaults:{eventResizableFromStart:!0}},c.views.timelineDay={type:"timeline",duration:{days:1}},c.views.timelineWeek={type:"timeline",duration:{weeks:1}},c.views.timelineMonth={type:"timeline",duration:{months:1}},c.views.timelineYear={type:"timeline",duration:{years:1}},H=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Yt(e,W),e.mixin(M),e.prototype.resourceGrid=null,e.prototype.tbodyHash=null,e.prototype.joiner=null,e.prototype.dividerEls=null,e.prototype.superHeaderText=null,e.prototype.isVGrouping=null,e.prototype.isHGrouping=null,e.prototype.groupSpecs=null,e.prototype.colSpecs=null,e.prototype.orderSpecs=null,e.prototype.rowHierarchy=null,e.prototype.resourceRowHash=null,e.prototype.nestingCnt=0,e.prototype.isNesting=null,e.prototype.dividerWidth=null,e.prototype.initialize=function(){return e.__super__.initialize.apply(this,arguments),this.processResourceOptions(),this.resourceGrid=new O(this),this.rowHierarchy=new I(this),this.resourceRowHash={}},e.prototype.instantiateGrid=function(){return new $(this)},e.prototype.processResourceOptions=function(){var t,e,i,n,r,s,o,a,l,d,h,c,u,p,f,g,m,_,v,y,w,b;for(t=this.opt("resourceColumns")||[],f=this.opt("resourceLabelText"),n="Resources",b=null,t.length?b=f:t.push({labelText:f||n,text:this.getResourceTextFunc()}),y=[],r=[],o=[],h=!1,d=!1,c=0,g=t.length;g>c;c++)(i=t[c]).group?r.push(i):y.push(i);for(y[0].isMain=!0,r.length?(o=r,h=!0):(a=this.opt("resourceGroupField"))&&(d=!0,o.push({field:a,text:this.opt("resourceGroupText"),render:this.opt("resourceGroupRender")})),w=[],u=0,m=(e=Et(this.opt("resourceOrder"))).length;m>u;u++){for(v=e[u],l=!1,p=0,_=o.length;_>p;p++)if((s=o[p]).field===v.field){s.order=v.order,l=!0;break}l||w.push(v)}return this.superHeaderText=b,this.isVGrouping=h,this.isHGrouping=d,this.groupSpecs=o,this.colSpecs=r.concat(y),this.orderSpecs=w},e.prototype.renderSkeleton=function(){return e.__super__.renderSkeleton.apply(this,arguments),this.renderResourceGridSkeleton(),this.tbodyHash={spreadsheet:this.resourceGrid.tbodyEl,event:this.timeGrid.tbodyEl},this.joiner=new L("vertical",[this.resourceGrid.bodyScroller,this.timeGrid.bodyScroller]),this.initDividerMoving()},e.prototype.renderSkeletonHtml=function(){return'<table> <thead class="fc-head"> <tr> <td class="fc-resource-area '+this.widgetHeaderClass+'"></td> <td class="fc-divider fc-col-resizer '+this.widgetHeaderClass+'"></td> <td class="fc-time-area '+this.widgetHeaderClass+'"></td> </tr> </thead> <tbody class="fc-body"> <tr> <td class="fc-resource-area '+this.widgetContentClass+'"></td> <td class="fc-divider fc-col-resizer '+this.widgetHeaderClass+'"></td> <td class="fc-time-area '+this.widgetContentClass+'"></td> </tr> </tbody> </table>'},e.prototype.renderResourceGridSkeleton=function(){return this.resourceGrid.el=this.el.find("tbody .fc-resource-area"),this.resourceGrid.headEl=this.el.find("thead .fc-resource-area"),this.resourceGrid.renderSkeleton()},e.prototype.initDividerMoving=function(){var t;return this.dividerEls=this.el.find(".fc-divider"),this.dividerWidth=null!=(t=this.opt("resourceAreaWidth"))?t:this.resourceGrid.tableWidth,null!=this.dividerWidth&&this.positionDivider(this.dividerWidth),this.dividerEls.on("mousedown",function(t){return function(e){return t.dividerMousedown(e)}}(this))},e.prototype.dividerMousedown=function(t){var e,i,n,r;return e=this.opt("isRTL"),n=30,i=this.el.width()-30,r=this.getNaturalDividerWidth(),new l({dragStart:function(t){return function(){return t.dividerEls.addClass("fc-active")}}(this),drag:function(t){return function(s){var o;return o=e?r-s:r+s,
o=Math.max(o,n),o=Math.min(o,i),t.dividerWidth=o,t.positionDivider(o),t.updateWidth()}}(this),dragStop:function(t){return function(){return t.dividerEls.removeClass("fc-active")}}(this)}).mousedown(t)},e.prototype.getNaturalDividerWidth=function(){return this.el.find(".fc-resource-area").width()},e.prototype.positionDivider=function(t){return this.el.find(".fc-resource-area").width(t)},e.prototype.renderEvents=function(t){return this.timeGrid.renderEvents(t),this.syncRowHeights(),this.updateWidth()},e.prototype.unrenderEvents=function(){return this.timeGrid.unrenderEvents(),this.syncRowHeights(),this.updateWidth()},e.prototype.updateWidth=function(){return e.__super__.updateWidth.apply(this,arguments),this.resourceGrid.updateWidth(),this.joiner.update(),this.cellFollower?this.cellFollower.update():void 0},e.prototype.updateHeight=function(t){return e.__super__.updateHeight.apply(this,arguments),t?this.syncRowHeights():void 0},e.prototype.setHeight=function(t,e){var i,n;return n=this.syncHeadHeights(),i=e?"auto":t-n-this.queryMiscHeight(),this.timeGrid.bodyScroller.setHeight(i),this.resourceGrid.bodyScroller.setHeight(i)},e.prototype.queryMiscHeight=function(){return this.el.outerHeight()-Math.max(this.resourceGrid.headScroller.el.outerHeight(),this.timeGrid.headScroller.el.outerHeight())-Math.max(this.resourceGrid.bodyScroller.el.outerHeight(),this.timeGrid.bodyScroller.el.outerHeight())},e.prototype.syncHeadHeights=function(){var t;return this.resourceGrid.headHeight("auto"),this.timeGrid.headHeight("auto"),t=Math.max(this.resourceGrid.headHeight(),this.timeGrid.headHeight()),this.resourceGrid.headHeight(t),this.timeGrid.headHeight(t),t},e.prototype.scrollToResource=function(t){return this.timeGrid.scrollToResource(t)},e.prototype.setResources=function(t){var e,i,n;for(this.batchRows(),e=0,i=t.length;i>e;e++)n=t[e],this.insertResource(n);return this.rowHierarchy.show(),this.unbatchRows(),this.reinitializeCellFollowers()},e.prototype.unsetResources=function(){return this.clearEvents(),this.batchRows(),this.rowHierarchy.removeChildren(),this.unbatchRows(),this.reinitializeCellFollowers()},e.prototype.addResource=function(t){return this.insertResource(t),this.reinitializeCellFollowers()},e.prototype.removeResource=function(t){var e;return(e=this.getResourceRow(t.id))?(this.batchRows(),e.remove(),this.unbatchRows(),this.reinitializeCellFollowers()):void 0},e.prototype.cellFollower=null,e.prototype.reinitializeCellFollowers=function(){var e,i,n,r,s,o;for(this.cellFollower&&this.cellFollower.clearSprites(),this.cellFollower=new G(this.resourceGrid.bodyScroller),this.cellFollower.isHFollowing=!1,this.cellFollower.isVFollowing=!0,r=[],i=0,n=(s=this.rowHierarchy.getNodes()).length;n>i;i++)(o=s[i])instanceof V&&o.groupTd&&((e=o.groupTd.find(".fc-cell-content")).length&&r.push(e[0]));return this.cellFollower.setSprites(t(r))},e.prototype.insertResource=function(t,e){var i,n,r,s,o,a,l;for(l=new k(this,t),null==e&&((s=t.parentId)&&(e=this.getResourceRow(s))),e?this.insertRowAsChild(l,e):this.insertRow(l),a=[],n=0,r=(o=t.children).length;r>n;n++)i=o[n],a.push(this.insertResource(i,l));return a},e.prototype.insertRow=function(t,e,i){var n;return null==e&&(e=this.rowHierarchy),null==i&&(i=this.groupSpecs),i.length?(n=this.ensureResourceGroup(t,e,i[0]))instanceof p?this.insertRowAsChild(t,n):this.insertRow(t,n,i.slice(1)):this.insertRowAsChild(t,e)},e.prototype.insertRowAsChild=function(t,e){return e.addChild(t,this.computeChildRowPosition(t,e))},e.prototype.computeChildRowPosition=function(t,e){var i,n,r,s,o;if(this.orderSpecs.length)for(i=n=0,r=(s=e.children).length;r>n;i=++n)if(o=s[i],this.compareResources(o.resource||{},t.resource||{})>0)return i;return null},e.prototype.compareResources=function(t,e){return U(t,e,this.orderSpecs)},e.prototype.ensureResourceGroup=function(t,e,i){var n,r,s,o,a,l,d,h,c,u,f;if(s=(t.resource||{})[i.field],r=null,i.order)for(o=a=0,d=(c=e.children).length;d>a;o=++a){if(f=c[o],0===(n=st(f.groupValue,s)*i.order)){r=f;break}if(n>0)break}else for(o=l=0,h=(u=e.children).length;h>l;o=++l)if((f=u[o]).groupValue===s){r=f;break}return r||(r=this.isVGrouping?new V(this,i,s):new p(this,i,s),e.addChild(r,o)),r},e.prototype.pairSegsWithRows=function(t){var e,i,n,r,s,o,a,l;for(r=[],s={},e=0,i=t.length;i>e;e++)(o=(l=t[e]).resourceId)&&((a=this.getResourceRow(o))&&((n=s[o])||(n=[a,[]],r.push(n),s[o]=n),n[1].push(l)));return r},e.prototype.rowAdded=function(t){var e;return t instanceof k&&(this.resourceRowHash[t.resource.id]=t),this.isNesting!==(e=Boolean(this.nestingCnt+=t.depth?1:0))&&(this.el.toggleClass("fc-nested",e),this.el.toggleClass("fc-flat",!e)),this.isNesting=e},e.prototype.rowRemoved=function(t){var e;return t instanceof k&&delete this.resourceRowHash[t.resource.id],this.isNesting!==(e=Boolean(this.nestingCnt-=t.depth?1:0))&&(this.el.toggleClass("fc-nested",e),this.el.toggleClass("fc-flat",!e)),this.isNesting=e},e.prototype.batchRowDepth=0,e.prototype.shownRowBatch=null,e.prototype.hiddenRowBatch=null,e.prototype.batchRows=function(){return this.batchRowDepth++?void 0:(this.shownRowBatch=[],this.hiddenRowBatch=[])},e.prototype.unbatchRows=function(){return--this.batchRowDepth?void 0:(this.hiddenRowBatch.length&&this.rowsHidden(this.hiddenRowBatch),this.shownRowBatch.length&&this.rowsShown(this.shownRowBatch),this.hiddenRowBatch=null,this.shownRowBatch=null)},e.prototype.rowShown=function(t){return this.shownRowBatch?this.shownRowBatch.push(t):this.rowsShown([t])},e.prototype.rowHidden=function(t){return this.hiddenRowBatch?this.hiddenRowBatch.push(t):this.rowsHidden([t])},e.prototype.rowsShown=function(t){return this.syncRowHeights(t),this.updateWidth()},e.prototype.rowsHidden=function(){return this.updateWidth()},e.prototype.syncRowHeights=function(t,e){var i,n,r,s,o,a,l,d,h,c;for(null==e&&(e=!1),null==t&&(t=this.getVisibleRows()),a=0,d=t.length;d>a;a++)(c=t[a]).setTrInnerHeight("");for(o=function(){var n,r,s;for(s=[],n=0,r=t.length;r>n;n++)c=t[n],i=c.getMaxTrInnerHeight(),e&&(i+=i%2),s.push(i);return s}(),s=l=0,h=t.length;h>l;s=++l)(c=t[s]).setTrInnerHeight(o[s]);return!e&&(n=this.resourceGrid.tbodyEl.height(),r=this.timeGrid.tbodyEl.height(),Math.abs(n-r)>1)?this.syncRowHeights(t,!0):void 0},e.prototype.getVisibleRows=function(){var t,e,i,n,r;for(n=[],t=0,e=(i=this.rowHierarchy.getRows()).length;e>t;t++)(r=i[t]).isShown&&n.push(r);return n},e.prototype.getEventRows=function(){var t,e,i,n,r;for(n=[],t=0,e=(i=this.rowHierarchy.getRows()).length;e>t;t++)(r=i[t])instanceof h&&n.push(r);return n},e.prototype.getResourceRow=function(t){return this.resourceRowHash[t]},e.prototype.setScroll=function(t){return e.__super__.setScroll.apply(this,arguments),this.resourceGrid.bodyScroller.scrollTop(t.top)},e}(),$=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Yt(e,A),e.mixin(D),e.prototype.eventRows=null,e.prototype.shownEventRows=null,e.prototype.tbodyEl=null,e.prototype.rowCoordCache=null,e.prototype.spanToSegs=function(t){var i,n,r,s,o,a;if(a=e.__super__.spanToSegs.apply(this,arguments),i=this.view.calendar,s=t.resourceId)for(n=0,r=a.length;r>n;n++)(o=a[n]).resource=i.getResourceById(s),o.resourceId=s;return a},e.prototype.prepareHits=function(){var t,i;return e.__super__.prepareHits.apply(this,arguments),this.eventRows=this.view.getEventRows(),this.shownEventRows=function(){var e,i,n,r;for(r=[],e=0,i=(n=this.eventRows).length;i>e;e++)(t=n[e]).isShown&&r.push(t);return r}.call(this),i=function(){var e,i,n,r;for(r=[],e=0,i=(n=this.shownEventRows).length;i>e;e++)t=n[e],r.push(t.getTr("event")[0]);return r}.call(this),this.rowCoordCache=new o({els:i,isVertical:!0}),this.rowCoordCache.build()},e.prototype.releaseHits=function(){return e.__super__.releaseHits.apply(this,arguments),this.eventRows=null,this.shownEventRows=null,this.rowCoordCache.clear()},e.prototype.queryHit=function(t,i){var n,r;return(r=e.__super__.queryHit.apply(this,arguments))&&null!=(n=this.rowCoordCache.getVerticalIndex(i))?{resourceId:this.shownEventRows[n].resource.id,snap:r.snap,component:this,left:r.left,right:r.right,top:this.rowCoordCache.getTopOffset(n),bottom:this.rowCoordCache.getBottomOffset(n)}:void 0},e.prototype.getHitSpan=function(t){var e;return(e=this.getSnapRange(t.snap)).resourceId=t.resourceId,e},e.prototype.getHitEl=function(t){return this.getSnapEl(t.snap)},e.prototype.renderSkeleton=function(){var i;return e.__super__.renderSkeleton.apply(this,arguments),this.segContainerEl.remove(),this.segContainerEl=null,i=t('<div class="fc-rows"><table><tbody/></table></div>').appendTo(this.bodyScroller.contentEl),this.tbodyEl=i.find("tbody")},e.prototype.renderFgSegs=function(t){var e,i,n,r,s,o,a;for(t=this.renderFgSegEls(t),a=[],n=0,r=(o=this.view.pairSegsWithRows(t)).length;r>n;n++)e=(s=o[n])[0],i=s[1],e.fgSegs=i,e.isShown&&(e.isSegsRendered=!0,a.push(s));return this.renderFgSegsInContainers(a),this.updateSegFollowers(t),t},e.prototype.unrenderFgSegs=function(){var t,e,i,n;for(this.clearSegFollowers(),i=0,n=(e=this.view.getEventRows()).length;n>i;i++)(t=e[i]).fgSegs=null,t.isSegsRendered=!1;return this.unrenderFgContainers(e)},e.prototype.renderFill=function(t,e,i){var n,r,s,o,a,l,d,h,c,u,p,f;for(h=[],a=[],n=0,s=(e=this.renderFillSegEls(t,e)).length;s>n;n++)(p=e[n]).resourceId?h.push(p):a.push(p);for(f=[],r=0,o=(d=this.view.pairSegsWithRows(h)).length;o>r;r++)c=(l=d[r])[0],u=l[1],"bgEvent"===t&&(c.bgSegs=u),c.isShown&&f.push(l);return a.length&&f.unshift([this,a]),this.renderFillInContainers(t,f,i),e},e.prototype.renderHelper=function(t,e){var i,n;return n=this.eventToSegs(t),n=this.renderFgSegEls(n),i=this.view.pairSegsWithRows(n),this.renderHelperSegsInContainers(i,e)},e.prototype.computeInitialScroll=function(t){var i;return i=e.__super__.computeInitialScroll.apply(this,arguments),t&&(i.resourceId=t.resourceId,i.bottom=t.bottom),i},e.prototype.queryScroll=function(){var t,i,n,r,s,o,a,l;for(l=e.__super__.queryScroll.apply(this,arguments),a=this.bodyScroller.scrollEl.offset().top,n=0,r=(s=this.view.getVisibleRows()).length;r>n;n++)if((o=s[n]).resource&&(i=(t=o.getTr("event")).offset().top+t.outerHeight())>a){l.resourceId=o.resource.id,l.bottom=i-a;break}return l},e.prototype.setScroll=function(t){var i,n,r,s;return t.resourceId&&((s=this.view.getResourceRow(t.resourceId))&&((i=s.getTr("event"))&&(r=this.bodyScroller.innerEl.offset().top,n=i.offset().top+i.outerHeight(),t.top=n-t.bottom-r))),e.__super__.setScroll.call(this,t)},e.prototype.scrollToResource=function(t){var e,i,n,r;return(n=this.view.getResourceRow(t.id))&&(e=n.getTr("event"))?(i=this.bodyScroller.innerEl.offset().top,r=e.offset().top-i,this.bodyScroller.scrollEl.scrollTop(r)):void 0},e}(),i=30,O=function(){function e(t){var e;this.view=t,this.isRTL=this.view.opt("isRTL"),this.givenColWidths=this.colWidths=function(){var t,i,n,r;for(r=[],t=0,i=(n=this.view.colSpecs).length;i>t;t++)e=n[t],r.push(e.width);return r}.call(this)}return e.prototype.view=null,e.prototype.headEl=null,e.prototype.el=null,e.prototype.tbodyEl=null,e.prototype.headScroller=null,e.prototype.bodyScroller=null,e.prototype.joiner=null,e.prototype.colGroupHtml="",e.prototype.headTable=null,e.prototype.headColEls=null,e.prototype.headCellEls=null,e.prototype.bodyColEls=null,e.prototype.bodyTable=null,e.prototype.renderSkeleton=function(){return this.headScroller=new P("invisible-scroll","hidden"),this.headScroller.contentEl.html(this.renderHeadHtml()),this.headEl.append(this.headScroller.el),this.bodyScroller=new P("auto","invisible-scroll"),this.bodyScroller.contentEl.html("<table>"+this.colGroupHtml+"<tbody/></table>"),this.tbodyEl=this.bodyScroller.contentEl.find("tbody"),this.el.append(this.bodyScroller.el),this.joiner=new L("horizontal",[this.headScroller,this.bodyScroller]),this.headTable=this.headEl.find("table"),this.headColEls=this.headEl.find("col"),this.headCellEls=this.headScroller.contentEl.find("tr:last-child th"),this.bodyColEls=this.el.find("col"),this.bodyTable=this.el.find("table"),this.colMinWidths=this.computeColMinWidths(),this.applyColWidths(),this.initColResizing()},e.prototype.renderHeadHtml=function(){var t,e,i,n,r,s,o,a,l,d;for(i="<table>",t="<colgroup>",s=0,a=(e=this.view.colSpecs).length;a>s;s++)t+=(d=e[s]).isMain?'<col class="fc-main-col"/>':"<col/>";for(t+="</colgroup>",this.colGroupHtml=t,i+=t,i+="<tbody>",this.view.superHeaderText&&(i+='<tr class="fc-super"><th class="'+this.view.widgetHeaderClass+'" colspan="'+e.length+'"><div class="fc-cell-content"><span class="fc-cell-text">'+pt(this.view.superHeaderText)+"</span></div></th></tr>"),i+="<tr>",!0,n=o=0,l=e.length;l>o;n=++o)d=e[n],r=n===e.length-1,i+='<th class="'+this.view.widgetHeaderClass+'"><div><div class="fc-cell-content">'+(d.isMain?'<div class="fc-icon fc-expander-space" />':"")+'<span class="fc-cell-text">'+pt(d.labelText||"")+"</span></div>"+(r?"":'<div class="fc-col-resizer"></div>')+"</div></th>";return(i+="</tr>")+"</tbody></table>"},e.prototype.givenColWidths=null,e.prototype.colWidths=null,e.prototype.colMinWidths=null,e.prototype.tableWidth=null,e.prototype.tableMinWidth=null,e.prototype.initColResizing=function(){return this.headEl.find("th .fc-col-resizer").each((e=this,function(i,n){return(n=t(n)).on("mousedown",function(t){return e.colResizeMousedown(i,t,n)})}));var e},e.prototype.colResizeMousedown=function(t,e,n){var r,s,o;return(r=this.colWidths=this.queryColWidths()).pop(),r.push(null),o=r[t],s=Math.min(this.colMinWidths[t],i),new l({dragStart:function(){return n.addClass("fc-active")},drag:function(e){return function(i){var n;return n=o+(e.isRTL?-i:i),n=Math.max(n,s),r[t]=n,e.applyColWidths()}}(this),dragStop:function(){return n.removeClass("fc-active")}}).mousedown(e)},e.prototype.applyColWidths=function(){var t,e,i,n,r,s,o,a,l,d,h,c,u,p,f,g,m;for(i=this.colMinWidths,t=!0,e=!1,m=0,d=0,u=(r=this.colWidths).length;u>d;d++)"number"==typeof(n=r[d])?m+=n:(t=!1,n&&(e=!0));for(a=e&&!this.view.isHGrouping?"auto":"",o=function(){var t,e,i;for(i=[],l=t=0,e=r.length;e>t;l=++t)n=r[l],i.push(null!=n?n:a);return i}(),g=0,l=h=0,p=o.length;p>h;l=++h)g+="number"==typeof(s=o[l])?s:i[l];for(l=c=0,f=o.length;f>c;l=++c)s=o[l],this.headColEls.eq(l).width(s),this.bodyColEls.eq(l).width(s);return this.headScroller.setContentMinWidth(g),this.bodyScroller.setContentMinWidth(g),this.tableMinWidth=g,this.tableWidth=t?m:void 0},e.prototype.computeColMinWidths=function(){var t,e,n,r,s,o;for(s=[],t=e=0,n=(r=this.givenColWidths).length;n>e;t=++e)o=r[t],s.push("number"==typeof o?o:parseInt(this.headColEls.eq(t).css("min-width"))||i);return s},e.prototype.queryColWidths=function(){var e,i,n,r,s;for(s=[],e=0,i=(r=this.headCellEls).length;i>e;e++)n=r[e],s.push(t(n).outerWidth());return s},e.prototype.updateWidth=function(){return this.headScroller.update(),this.bodyScroller.update(),this.joiner.update(),this.follower?this.follower.update():void 0},e.prototype.headHeight=function(){var t;return(t=this.headScroller.contentEl.find("table")).height.apply(t,arguments)},e}(),I=function(){function e(e){this.view=e,this.children=[],this.trHash={},this.trs=t()}return e.prototype.view=null,e.prototype.parent=null,e.prototype.prevSibling=null,e.prototype.children=null,e.prototype.depth=0,e.prototype.hasOwnRow=!1,e.prototype.trHash=null,e.prototype.trs=null,e.prototype.isRendered=!1,e.prototype.isExpanded=!0,e.prototype.isShown=!1,e.prototype.addChild=function(t,e){var i,n,r,s;for(t.remove(),i=this.children,null!=e?i.splice(e,0,t):(e=i.length,i.push(t)),t.prevSibling=e>0?i[e-1]:null,e<i.length-1&&(i[e+1].prevSibling=t),t.parent=this,t.depth=this.depth+(this.hasOwnRow?1:0),n=0,r=(s=t.getNodes()).length;r>n;n++)s[n].added();return this.isShown&&this.isExpanded?t.show():void 0},e.prototype.removeChild=function(t){var e,i,n,r,s,o,a,l;for(n=!1,i=r=0,o=(e=this.children).length;o>r;i=++r)if(e[i]===t){n=!0;break}if(n){for(i<e.length-1&&(e[i+1].prevSibling=t.prevSibling),e.splice(i,1),t.recursivelyUnrender(),s=0,a=(l=t.getNodes()).length;a>s;s++)l[s].removed();return t.parent=null,t.prevSibling=null,t}return!1},e.prototype.removeChildren=function(){var t,e,i,n,r,s;for(t=0,i=(r=this.children).length;i>t;t++)r[t].recursivelyUnrender();for(e=0,n=(s=this.getDescendants()).length;n>e;e++)s[e].removed();return this.children=[]},e.prototype.remove=function(){return this.parent?this.parent.removeChild(this):void 0},e.prototype.getLastChild=function(){var t;return(t=this.children)[t.length-1]},e.prototype.getPrevRow=function(){var t,e;for(e=this;e;){if(e.prevSibling)for(e=e.prevSibling;t=e.getLastChild();)e=t;else e=e.parent;if(e&&e.hasOwnRow&&e.isShown)return e}return null},e.prototype.getLeadingRow=function(){return this.hasOwnRow?this:this.isExpanded&&this.children.length?this.children[0].getLeadingRow():void 0},e.prototype.getRows=function(t){var e,i,n;for(null==t&&(t=[]),this.hasOwnRow&&t.push(this),e=0,i=(n=this.children).length;i>e;e++)n[e].getRows(t);return t},e.prototype.getNodes=function(t){var e,i,n;for(null==t&&(t=[]),t.push(this),e=0,i=(n=this.children).length;i>e;e++)n[e].getNodes(t);return t},e.prototype.getDescendants=function(){var t,e,i,n;for(t=[],e=0,i=(n=this.children).length;i>e;e++)n[e].getNodes(t);return t},e.prototype.render=function(){var e,i,n,r,s,o,a;if(this.trHash={},o=[],this.hasOwnRow)for(a in e=this.getPrevRow(),i=this.view.tbodyHash)r=i[a],s=t("<tr/>"),this.trHash[a]=s,o.push(s[0]),this[n="render"+j(a)+"Content"]&&this[n](s),e?e.trHash[a].after(s):r.prepend(s);return this.trs=t(o).on("click",".fc-expander",kt(this,"toggleExpanded")),this.isRendered=!0},e.prototype.unrender=function(){var e,i,n,r;if(this.isRendered){for(n in e=this.trHash)i=e[n],this[r="unrender"+j(n)+"Content"]&&this[r](i);return this.trHash={},this.trs.remove(),this.trs=t(),this.isRendered=!1,this.isShown=!1,this.hidden()}},e.prototype.recursivelyUnrender=function(){var t,e,i,n,r;for(this.unrender(),r=[],e=0,i=(n=this.children).length;i>e;e++)t=n[e],r.push(t.recursivelyUnrender());return r},e.prototype.getTr=function(t){return this.trHash[t]},e.prototype.show=function(){var t,e,i,n,r;if(!this.isShown&&(this.isRendered?this.trs.css("display",""):this.render(),this.ensureSegsRendered&&this.ensureSegsRendered(),this.isExpanded?this.indicateExpanded():this.indicateCollapsed(),this.isShown=!0,this.shown(),this.isExpanded)){for(r=[],e=0,i=(n=this.children).length;i>e;e++)t=n[e],r.push(t.show());return r}},e.prototype.hide=function(){var t,e,i,n,r;if(this.isShown&&(this.isRendered&&this.trs.hide(),this.isShown=!1,this.hidden(),this.isExpanded)){for(r=[],e=0,i=(n=this.children).length;i>e;e++)t=n[e],r.push(t.hide());return r}},e.prototype.expand=function(){var t,e,i;if(!this.isExpanded){for(this.isExpanded=!0,this.indicateExpanded(),this.view.batchRows(),t=0,e=(i=this.children).length;e>t;t++)i[t].show();return this.view.unbatchRows(),this.animateExpand()}},e.prototype.collapse=function(){var t,e,i;if(this.isExpanded){for(this.isExpanded=!1,this.indicateCollapsed(),this.view.batchRows(),t=0,e=(i=this.children).length;e>t;t++)i[t].hide();return this.view.unbatchRows()}},e.prototype.toggleExpanded=function(){return this.isExpanded?this.collapse():this.expand()},e.prototype.indicateExpanded=function(){return this.trs.find(".fc-expander").removeClass(this.getCollapsedIcon()).addClass(this.getExpandedIcon())},e.prototype.indicateCollapsed=function(){return this.trs.find(".fc-expander").removeClass(this.getExpandedIcon()).addClass(this.getCollapsedIcon())},e.prototype.enableExpanding=function(){return this.trs.find(".fc-expander-space").addClass("fc-expander")},e.prototype.disableExpanding=function(){return this.trs.find(".fc-expander-space").removeClass("fc-expander").removeClass(this.getExpandedIcon()).removeClass(this.getCollapsedIcon())},e.prototype.getExpandedIcon=function(){return"fc-icon-down-triangle"},e.prototype.getCollapsedIcon=function(){return"fc-icon-"+(this.view.isRTL?"left":"right")+"-triangle"},e.prototype.animateExpand=function(){var t,e,i;return(i=null!=(t=this.children[0])&&null!=(e=t.getLeadingRow())?e.trs:void 0)?(i.addClass("fc-collapsed"),setTimeout(function(){return i.addClass("fc-transitioning"),i.removeClass("fc-collapsed")}),i.one("webkitTransitionEnd otransitionend oTransitionEnd msTransitionEnd transitionend",function(){return i.removeClass("fc-transitioning")})):void 0},e.prototype.getMaxTrInnerHeight=function(){var e;return e=0,t.each(this.trHash,function(t,i){var n;return n=ot(i).find("> div:not(.fc-cell-content):first"),e=Math.max(n.height(),e)}),e},e.prototype.setTrInnerHeight=function(e){return t.each(this.trHash,function(t,i){return ot(i).find("> div:not(.fc-cell-content):first").height(e)})},e.prototype.shown=function(){return this.hasOwnRow?this.rowShown(this):void 0},e.prototype.hidden=function(){return this.hasOwnRow?this.rowHidden(this):void 0},e.prototype.rowShown=function(t){return(this.parent||this.view).rowShown(t)},e.prototype.rowHidden=function(t){return(this.parent||this.view).rowHidden(t)},e.prototype.added=function(){return this.hasOwnRow?this.rowAdded(this):void 0},e.prototype.removed=function(){return this.hasOwnRow?this.rowRemoved(this):void 0},e.prototype.rowAdded=function(t){return(this.parent||this.view).rowAdded(t)},e.prototype.rowRemoved=function(t){return(this.parent||this.view).rowRemoved(t)},e}(),z=function(){function e(t,i,n){this.groupSpec=i,this.groupValue=n,e.__super__.constructor.apply(this,arguments)}return Yt(e,I),e.prototype.groupSpec=null,e.prototype.groupValue=null,e.prototype.rowRemoved=function(t){return e.__super__.rowRemoved.apply(this,arguments),t===this||this.children.length?void 0:this.remove()},e.prototype.renderGroupContentEl=function(){var e,i;return e=t('<div class="fc-cell-content" />').append(this.renderGroupTextEl()),"function"==typeof(i=this.groupSpec.render)&&(e=i(e,this.groupValue)||e),e},e.prototype.renderGroupTextEl=function(){var e,i;return i=this.groupValue||"","function"==typeof(e=this.groupSpec.text)&&(i=e(i)||i),t('<span class="fc-cell-text" />').text(i)},e}(),p=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Yt(e,z),e.prototype.hasOwnRow=!0,e.prototype.renderSpreadsheetContent=function(e){var i;return(i=this.renderGroupContentEl()).prepend('<span class="fc-icon fc-expander" />'),t('<td class="fc-divider" />').attr("colspan",this.view.colSpecs.length).append(t("<div/>").append(i)).appendTo(e)},e.prototype.renderEventContent=function(t){return t.append('<td class="fc-divider"> <div/> </td>')},e}(),V=function(){function e(){return e.__super__.constructor.apply(this,arguments)}return Yt(e,z),e.prototype.rowspan=0,e.prototype.leadingTr=null,e.prototype.groupTd=null,e.prototype.rowShown=function(){return this.rowspan+=1,this.renderRowspan(),e.__super__.rowShown.apply(this,arguments)},e.prototype.rowHidden=function(){return this.rowspan-=1,this.renderRowspan(),e.__super__.rowHidden.apply(this,arguments)},e.prototype.renderRowspan=function(){var e;return this.rowspan?(this.groupTd||(this.groupTd=t('<td class="'+this.view.widgetContentClass+'"/>').append(this.renderGroupContentEl())),this.groupTd.attr("rowspan",this.rowspan),(e=this.getLeadingRow().getTr("spreadsheet"))!==this.leadingTr?(e&&e.prepend(this.groupTd),this.leadingTr=e):void 0):(this.groupTd&&(this.groupTd.remove(),this.groupTd=null),this.leadingTr=null)},e}(),h=function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Yt(t,I),t.prototype.hasOwnRow=!0,t.prototype.segContainerEl=null,t.prototype.segContainerHeight=null,t.prototype.innerEl=null,t.prototype.bgSegContainerEl=null,t.prototype.isSegsRendered=!1,t.prototype.bgSegs=null,t.prototype.fgSegs=null,t.prototype.renderEventContent=function(t){return t.html('<td class="'+this.view.widgetContentClass+'"> <div> <div class="fc-event-container" /> </div> </td>'),this.segContainerEl=t.find(".fc-event-container"),this.innerEl=this.bgSegContainerEl=t.find("td > div"),this.ensureSegsRendered()},t.prototype.ensureSegsRendered=function(){return this.isSegsRendered?void 0:(this.bgSegs&&this.view.timeGrid.renderFillInContainer("bgEvent",this,this.bgSegs),this.fgSegs&&this.view.timeGrid.renderFgSegsInContainers([[this,this.fgSegs]]),this.isSegsRendered=!0)},t.prototype.unrenderEventContent=function(){return this.bgSegs=null,this.fgSegs=null,this.isSegsRendered=!1},t}(),k=function(){function e(t,i){this.resource=i,e.__super__.constructor.apply(this,arguments)}return Yt(e,h),e.prototype.resource=null,e.prototype.rowAdded=function(t){return e.__super__.rowAdded.apply(this,arguments),t!==this&&this.isRendered&&1===this.children.length?(this.enableExpanding(),this.isExpanded?this.indicateExpanded():this.indicateCollapsed()):void 0},e.prototype.rowRemoved=function(t){return e.__super__.rowRemoved.apply(this,arguments),t!==this&&this.isRendered&&!this.children.length?this.disableExpanding():void 0},e.prototype.render=function(){return e.__super__.render.apply(this,arguments),this.children.length>0?this.enableExpanding():this.disableExpanding(),this.view.trigger("resourceRender",this.resource,this.resource,this.getTr("spreadsheet").find("> td"),this.getTr("event").find("> td"))},e.prototype.renderEventContent=function(t){return e.__super__.renderEventContent.apply(this,arguments),t.attr("data-resource-id",this.resource.id)},e.prototype.renderSpreadsheetContent=function(e){var i,n,r,s,o,a,l,d,h;for(l=this.resource,s=0,o=(a=this.view.colSpecs).length;o>s;s++)(i=a[s]).group||(r=i.field?l[i.field]||null:l,h="function"==typeof i.text?i.text(l,r):r,n=t('<div class="fc-cell-content">'+(i.isMain?this.renderGutterHtml():"")+'<span class="fc-cell-text">'+(h?pt(h):"&nbsp;")+"</span></div>"),"function"==typeof i.render&&(n=i.render(l,n,r)||n),d=t('<td class="'+this.view.widgetContentClass+'"/>').append(n),i.isMain&&d.wrapInner("<div/>"),e.append(d));return e.attr("data-resource-id",l.id)},e.prototype.renderGutterHtml=function(){var t,e,i;for(t="",e=0,i=this.depth;i>e;e+=1)t+='<span class="fc-icon"/>';return t+'<span class="fc-icon fc-expander-space"/>'},e}(),c.views.timeline.resourceClass=H,b=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Yt(e,t),e.mixin(M),e.prototype.timeGridClass=R,e.prototype.dayGridClass=C,e.prototype.renderHead=function(){return e.__super__.renderHead.apply(this,arguments),this.timeGrid.processHeadResourceEls(this.headContainerEl)},e.prototype.setResources=function(t){return this.timeGrid.setResources(t),this.dayGrid&&this.dayGrid.setResources(t),this.clearView(),this.displayView()},e.prototype.unsetResources=function(){return this.clearEvents(),this.timeGrid.unsetResources(),this.dayGrid&&this.dayGrid.unsetResources(),this.clearView(),this.displayView()},e}(c.AgendaView),c.views.agenda.queryResourceClass=function(t){var e;return(null!=(e=t.options.groupByResource||t.options.groupByDateAndResource)?e:1===t.duration.as("days"))?b:void 0},S=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Yt(e,t),e.mixin(M),e.prototype.dayGridClass=C,e.prototype.renderHead=function(){return e.__super__.renderHead.apply(this,arguments),this.dayGrid.processHeadResourceEls(this.headContainerEl)},e.prototype.setResources=function(t){return this.dayGrid.setResources(t),this.clearView(),this.displayView()},e.prototype.unsetResources=function(){return this.clearEvents(),this.dayGrid.unsetResources(),this.clearView(),this.displayView()},e}(c.BasicView),T=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return Yt(e,t),e.mixin(M),e.prototype.dayGridClass=C,e.prototype.renderHead=function(){return e.__super__.renderHead.apply(this,arguments),this.dayGrid.processHeadResourceEls(this.headContainerEl)},e.prototype.setResources=function(t){return this.dayGrid.setResources(t),this.clearView(),this.displayView()},e.prototype.unsetResources=function(){return this.clearEvents(),this.dayGrid.unsetResources(),this.clearView(),this.displayView()},e}(c.MonthView),c.views.basic.queryResourceClass=function(t){var e;return(null!=(e=t.options.groupByResource||t.options.groupByDateAndResource)?e:1===t.duration.as("days"))?S:void 0},c.views.month.queryResourceClass=function(t){return t.options.groupByResource||t.options.groupByDateAndResource?T:void 0},w="2016-02-18",N={years:1,weeks:1},f="http://fullcalendar.io/scheduler/license/",y=["GPL-My-Project-Is-Open-Source","CC-Attribution-NonCommercial-NoDerivatives"],Tt=function(t,e){return mt(window.location.href)||vt(t)||et(e)?void 0:Rt('Please use a valid license key. <a href="'+f+'">More Info</a>',e)},vt=function(i){var n,r,s,o;return-1!==t.inArray(i,y)||!!((r=(i||"").match(/^(\d+)\-fcs\-(\d+)$/))&&10===r[1].length&&(s=e.utc(1e3*parseInt(r[2])),o=e.utc(c.mockSchedulerReleaseDate||w),o.isValid()&&(n=o.clone().subtract(N),s.isAfter(n))))},mt=function(t){return Boolean(t.match(/\w+\:\/\/fullcalendar\.io\/|\/demos\/[\w-]+\.html$/))},Rt=function(e,i){return i.append(t('<div class="fc-license-message" />').html(e))},void(et=function(t){return t.find(".fc-license-message").length>=1}))}),function(t,e){"use strict";"object"==typeof exports?module.exports=e(require("jquery")):"function"==typeof define&&define.amd?define("gridster-coords",["jquery"],e):t.GridsterCoords=e(t.$||t.jQuery)}(this,function(t){"use strict";function e(e){return e[0]&&t.isPlainObject(e[0])?this.data=e[0]:this.el=e,this.isCoords=!0,this.coords={},this.init(),this}var i=e.prototype;return i.init=function(){this.set(),this.original_coords=this.get()},i.set=function(t,e){var i=this.el;if(i&&!t&&(this.data=i.offset(),this.data.width=i[0].scrollWidth,this.data.height=i[0].scrollHeight),i&&t&&!e){var n=i.offset();this.data.top=n.top,this.data.left=n.left}var r=this.data;return void 0===r.left&&(r.left=r.x1),void 0===r.top&&(r.top=r.y1),this.coords.x1=r.left,this.coords.y1=r.top,this.coords.x2=r.left+r.width,this.coords.y2=r.top+r.height,this.coords.cx=r.left+r.width/2,this.coords.cy=r.top+r.height/2,this.coords.width=r.width,this.coords.height=r.height,this.coords.el=i||!1,this},i.update=function(e){if(!e&&!this.el)return this;if(e){var i=t.extend({},this.data,e);return this.data=i,this.set(!0,!0)}return this.set(!0),this},i.get=function(){return this.coords},i.destroy=function(){this.el.removeData("coords"),delete this.el},t.fn.coords=function(){if(this.data("coords"))return this.data("coords");var t=new e(this);return this.data("coords",t),t},e}),function(t,e){"use strict";"object"==typeof exports?module.exports=e(require("jquery")):"function"==typeof define&&define.amd?define("gridster-collision",["jquery","gridster-coords"],e):t.GridsterCollision=e(t.$||t.jQuery,t.GridsterCoords)}(this,function(t){"use strict";function e(e,n,r){this.options=t.extend(i,r),this.$element=e,this.last_colliders=[],this.last_colliders_coords=[],this.set_colliders(n),this.init()}var i={colliders_context:document.body,overlapping_region:"C"};e.defaults=i;var n=e.prototype;return n.init=function(){this.find_collisions()},n.overlaps=function(t,e){var i=!1,n=!1;return(e.x1>=t.x1&&e.x1<=t.x2||e.x2>=t.x1&&e.x2<=t.x2||t.x1>=e.x1&&t.x2<=e.x2)&&(i=!0),(e.y1>=t.y1&&e.y1<=t.y2||e.y2>=t.y1&&e.y2<=t.y2||t.y1>=e.y1&&t.y2<=e.y2)&&(n=!0),i&&n},n.detect_overlapping_region=function(t,e){var i="",n="";return t.y1>e.cy&&t.y1<e.y2&&(i="N"),t.y2>e.y1&&t.y2<e.cy&&(i="S"),t.x1>e.cx&&t.x1<e.x2&&(n="W"),t.x2>e.x1&&t.x2<e.cx&&(n="E"),i+n||"C"},n.calculate_overlapped_area_coords=function(e,i){var n=Math.max(e.x1,i.x1),r=Math.max(e.y1,i.y1);return t({left:n,top:r,width:Math.min(e.x2,i.x2)-n,height:Math.min(e.y2,i.y2)-r}).coords().get()},n.calculate_overlapped_area=function(t){return t.width*t.height},n.manage_colliders_start_stop=function(e,i,n){for(var r=this.last_colliders_coords,s=0,o=r.length;s<o;s++)-1===t.inArray(r[s],e)&&i.call(this,r[s]);for(var a=0,l=e.length;a<l;a++)-1===t.inArray(e[a],r)&&n.call(this,e[a])},n.find_collisions=function(e){for(var i=this,n=this.options.overlapping_region,r=[],s=[],o=this.colliders||this.$colliders,a=o.length,l=i.$element.coords().update(e||!1).get();a--;){var d=i.$colliders?t(o[a]):o[a],h=d.isCoords?d:d.coords(),c=h.get();if(i.overlaps(l,c)){var u=i.detect_overlapping_region(l,c);if(u===n||"all"===n){var p=i.calculate_overlapped_area_coords(l,c),f=i.calculate_overlapped_area(p);if(0!==f){var g={area:f,area_coords:p,region:u,coords:c,player_coords:l,el:d};i.options.on_overlap&&i.options.on_overlap.call(this,g),r.push(h),s.push(g)}}}}return(i.options.on_overlap_stop||i.options.on_overlap_start)&&this.manage_colliders_start_stop(r,i.options.on_overlap_start,i.options.on_overlap_stop),this.last_colliders_coords=r,s},n.get_closest_colliders=function(t){var e=this.find_collisions(t);return e.sort(function(t,e){return"C"===t.region&&"C"===e.region?t.coords.y1<e.coords.y1||t.coords.x1<e.coords.x1?-1:1:(t.area,e.area,1)}),e},n.set_colliders=function(e){
"string"==typeof e||e instanceof t?this.$colliders=t(e,this.options.colliders_context).not(this.$element):this.colliders=t(e)},t.fn.collision=function(t,i){return new e(this,t,i)},e}),function(t){"use strict";t.delay=function(t,e){var i=Array.prototype.slice.call(arguments,2);return setTimeout(function(){return t.apply(null,i)},e)},t.debounce=function(t,e,i){var n;return function(){var r=this,s=arguments,o=function(){n=null,i||t.apply(r,s)};i&&!n&&t.apply(r,s),clearTimeout(n),n=setTimeout(o,e)}},t.throttle=function(t,e){var i,n,r,s,o,a,l=debounce(function(){o=s=!1},e);return function(){i=this,n=arguments;var d=function(){r=null,o&&t.apply(i,n),l()};return r||(r=setTimeout(d,e)),s?o=!0:a=t.apply(i,n),l(),s=!0,a}}}(window),function(t,e){"use strict";"object"==typeof exports?module.exports=e(require("jquery")):"function"==typeof define&&define.amd?define("gridster-draggable",["jquery"],e):t.GridsterDraggable=e(t.$||t.jQuery)}(this,function(t){"use strict";function e(e,n){this.options=t.extend({},i,n),this.$document=t(document),this.$container=t(e),this.$scroll_container=this.options.scroll_container===window?t(window):this.$container.closest(this.options.scroll_container),this.is_dragging=!1,this.player_min_left=0+this.options.offset_left,this.player_min_top=0+this.options.offset_top,this.id=l(),this.ns=".gridster-draggable-"+this.id,this.init()}var i={items:"li",distance:1,limit:{width:!0,height:!1},offset_left:0,autoscroll:!0,ignore_dragging:["INPUT","TEXTAREA","SELECT","BUTTON"],handle:null,container_width:0,move_element:!0,helper:!1,remove_helper:!0},n=t(window),r={x:"left",y:"top"},s=!!("ontouchstart"in window),o=function(t){return t.charAt(0).toUpperCase()+t.slice(1)},a=0,l=function(){return++a+""};e.defaults=i;var d=e.prototype;return d.init=function(){var e=this.$container.css("position");this.calculate_dimensions(),this.$container.css("position","static"===e?"relative":e),this.disabled=!1,this.events(),n.bind(this.nsEvent("resize"),throttle(t.proxy(this.calculate_dimensions,this),200))},d.nsEvent=function(t){return(t||"")+this.ns},d.events=function(){this.pointer_events={start:this.nsEvent("touchstart")+" "+this.nsEvent("mousedown"),move:this.nsEvent("touchmove")+" "+this.nsEvent("mousemove"),end:this.nsEvent("touchend")+" "+this.nsEvent("mouseup")},this.$container.on(this.nsEvent("selectstart"),t.proxy(this.on_select_start,this)),this.$container.on(this.pointer_events.start,this.options.items,t.proxy(this.drag_handler,this)),this.$document.on(this.pointer_events.end,t.proxy(function(t){this.is_dragging=!1,this.disabled||(this.$document.off(this.pointer_events.move),this.drag_start&&this.on_dragstop(t))},this))},d.get_actual_pos=function(t){return t.position()},d.get_mouse_pos=function(t){if(t.originalEvent&&t.originalEvent.touches){var e=t.originalEvent;t=e.touches.length?e.touches[0]:e.changedTouches[0]}return{left:t.clientX,top:t.clientY}},d.get_offset=function(t){t.preventDefault();var e=this.get_mouse_pos(t),i=Math.round(e.left-this.mouse_init_pos.left),n=Math.round(e.top-this.mouse_init_pos.top),r=Math.round(this.el_init_offset.left+i-this.baseX+this.$scroll_container.scrollLeft()-this.scroll_container_offset_x),s=Math.round(this.el_init_offset.top+n-this.baseY+this.$scroll_container.scrollTop()-this.scroll_container_offset_y);return this.options.limit.width&&(r>this.player_max_left?r=this.player_max_left:r<this.player_min_left&&(r=this.player_min_left)),this.options.limit.height&&(s>this.player_max_top?s=this.player_max_top:s<this.player_min_top&&(s=this.player_min_top)),{position:{left:r,top:s},pointer:{left:e.left,top:e.top,diff_left:i+(this.$scroll_container.scrollLeft()-this.scroll_container_offset_x),diff_top:n+(this.$scroll_container.scrollTop()-this.scroll_container_offset_y)}}},d.get_drag_data=function(t){var e=this.get_offset(t);return e.$player=this.$player,e.$helper=this.helper?this.$helper:this.$player,e},d.set_limits=function(t){return t||(t=this.$container.width()),this.player_max_left=t-this.player_width-this.options.offset_left,this.player_max_top=this.options.container_height-this.player_height-this.options.offset_top,this.options.container_width=t,this},d.scroll_in=function(t,e){var i,n=r[t],s=50,a=30,l="scroll"+o(n),d="x"===t,h=d?this.scroller_width:this.scroller_height;i=this.$scroll_container===window?d?this.$scroll_container.width():this.$scroll_container.height():d?this.$scroll_container[0].scrollWidth:this.$scroll_container[0].scrollHeight;var c,u=d?this.$player.width():this.$player.height(),p=this.$scroll_container[l](),f=p+h-s,g=p+s,m=p+e.pointer[n];return m>=f&&(c=p+a)<i-h+u&&(this.$scroll_container[l](c),this["scroll_offset_"+t]+=a),m<=g&&(c=p-a)>0&&(this.$scroll_container[l](c),this["scroll_offset_"+t]-=a),this},d.manage_scroll=function(t){this.scroll_in("x",t),this.scroll_in("y",t)},d.calculate_dimensions=function(){this.scroller_height=this.$scroll_container.height(),this.scroller_width=this.$scroll_container.width()},d.drag_handler=function(e){if(!this.disabled&&(1===e.which||s)&&!this.ignore_drag(e)){var i=this,n=!0;return this.$player=t(e.currentTarget),this.el_init_pos=this.get_actual_pos(this.$player),this.mouse_init_pos=this.get_mouse_pos(e),this.offsetY=this.mouse_init_pos.top-this.el_init_pos.top,this.$document.on(this.pointer_events.move,function(t){var e=i.get_mouse_pos(t),r=Math.abs(e.left-i.mouse_init_pos.left),s=Math.abs(e.top-i.mouse_init_pos.top);return(r>i.options.distance||s>i.options.distance)&&(n?(n=!1,i.on_dragstart.call(i,t),!1):(!0===i.is_dragging&&i.on_dragmove.call(i,t),!1))}),!!s&&void 0}},d.on_dragstart=function(t){if(t.preventDefault(),this.is_dragging)return this;this.drag_start=this.is_dragging=!0;var e=this.$container.offset();return this.baseX=Math.round(e.left),this.baseY=Math.round(e.top),"clone"===this.options.helper?(this.$helper=this.$player.clone().appendTo(this.$container).addClass("helper"),this.helper=!0):this.helper=!1,this.scroll_container_offset_y=this.$scroll_container.scrollTop(),this.scroll_container_offset_x=this.$scroll_container.scrollLeft(),this.el_init_offset=this.$player.offset(),this.player_width=this.$player.width(),this.player_height=this.$player.height(),this.set_limits(this.options.container_width),this.options.start&&this.options.start.call(this.$player,t,this.get_drag_data(t)),!1},d.on_dragmove=function(t){var e=this.get_drag_data(t);this.options.autoscroll&&this.manage_scroll(e),this.options.move_element&&(this.helper?this.$helper:this.$player).css({position:"absolute",left:e.position.left,top:e.position.top});var i=this.last_position||e.position;return e.prev_position=i,this.options.drag&&this.options.drag.call(this.$player,t,e),this.last_position=e.position,!1},d.on_dragstop=function(t){var e=this.get_drag_data(t);return this.drag_start=!1,this.options.stop&&this.options.stop.call(this.$player,t,e),this.helper&&this.options.remove_helper&&this.$helper.remove(),!1},d.on_select_start=function(t){if(!this.disabled&&!this.ignore_drag(t))return!1},d.enable=function(){this.disabled=!1},d.disable=function(){this.disabled=!0},d.destroy=function(){this.disable(),this.$container.off(this.ns),this.$document.off(this.ns),n.off(this.ns),t.removeData(this.$container,"drag")},d.ignore_drag=function(e){return this.options.handle?!t(e.target).is(this.options.handle):t.isFunction(this.options.ignore_dragging)?this.options.ignore_dragging(e):this.options.resize?!t(e.target).is(this.options.items):t(e.target).is(this.options.ignore_dragging.join(", "))},t.fn.gridDraggable=function(t){return new e(this,t)},t.fn.dragg=function(i){return this.each(function(){t.data(this,"drag")||t.data(this,"drag",new e(this,i))})},e}),function(t,e){"use strict";"object"==typeof exports?module.exports=e(require("jquery"),require("./jquery.draggable.js"),require("./jquery.collision.js"),require("./jquery.coords.js"),require("./utils.js")):"function"==typeof define&&define.amd?define(["jquery","gridster-draggable","gridster-collision"],e):t.Gridster=e(t.$||t.jQuery,t.GridsterDraggable,t.GridsterCollision)}(this,function(t,e){"use strict";function i(e,i){this.options=t.extend(!0,{},s,i),this.options.draggable=this.options.draggable||{},this.options.draggable=t.extend(!0,{},this.options.draggable,{scroll_container:this.options.scroll_container}),this.$el=t(e),this.$scroll_container=this.options.scroll_container===window?t(window):this.$el.closest(this.options.scroll_container),this.$wrapper=this.$el.parent(),this.$widgets=this.$el.children(this.options.widget_selector).addClass("gs-w"),this.$changed=t([]),this.w_queue={},this.is_responsive()?this.min_widget_width=this.get_responsive_col_width():this.min_widget_width=this.options.widget_base_dimensions[0],this.min_widget_height=this.options.widget_base_dimensions[1],this.is_resizing=!1,this.min_col_count=this.options.min_cols,this.prev_col_count=this.min_col_count,this.generated_stylesheets=[],this.$style_tags=t([]),typeof this.options.limit==typeof!0&&(console.log("limit: bool is deprecated, consider using limit: { width: boolean, height: boolean} instead"),this.options.limit={width:this.options.limit,height:this.options.limit}),this.options.auto_init&&this.init()}function n(t){for(var e=["col","row","size_x","size_y"],i={},n=0,r=e.length;n<r;n++){var s=e[n];if(!(s in t))throw new Error("Not exists property `"+s+"`");var o=t[s];if(!o||isNaN(o))throw new Error("Invalid value of `"+s+"` property");i[s]=+o}return i}var r=t(window),s={namespace:"",widget_selector:"li",static_class:"static",widget_margins:[10,10],widget_base_dimensions:[400,225],extra_rows:0,extra_cols:0,min_cols:1,max_cols:1/0,limit:{width:!0,height:!1},min_rows:1,max_rows:15,autogenerate_stylesheet:!0,avoid_overlapped_widgets:!0,auto_init:!0,center_widgets:!1,responsive_breakpoint:!1,scroll_container:window,shift_larger_widgets_down:!0,move_widgets_down_only:!1,shift_widgets_up:!0,show_element:function(t,e){e?t.fadeIn(e):t.fadeIn()},hide_element:function(t,e){e?t.fadeOut(e):t.fadeOut()},serialize_params:function(t,e){return{col:e.col,row:e.row,size_x:e.size_x,size_y:e.size_y}},collision:{wait_for_mouseup:!1},draggable:{items:".gs-w:not(.static)",distance:4,ignore_dragging:e.defaults.ignore_dragging.slice(0)},resize:{enabled:!1,axes:["both"],handle_append_to:"",handle_class:"gs-resize-handle",max_size:[1/0,1/0],min_size:[1,1]},ignore_self_occupied:!1};i.defaults=s,i.generated_stylesheets=[],i.sort_by_row_asc=function(e){return e.sort(function(e,i){return e.row||(e=t(e).coords().grid,i=t(i).coords().grid),e=n(e),i=n(i),e.row>i.row?1:-1})},i.sort_by_row_and_col_asc=function(t){return t.sort(function(t,e){return t=n(t),e=n(e),t.row>e.row||t.row===e.row&&t.col>e.col?1:-1})},i.sort_by_col_asc=function(t){return t.sort(function(t,e){return t=n(t),e=n(e),t.col>e.col?1:-1})},i.sort_by_row_desc=function(t){return t.sort(function(t,e){return t=n(t),e=n(e),t.row+t.size_y<e.row+e.size_y?1:-1})};var o=i.prototype;return o.init=function(){this.options.resize.enabled&&this.setup_resize(),this.generate_grid_and_stylesheet(),this.get_widgets_from_DOM(),this.set_dom_grid_height(),this.set_dom_grid_width(),this.$wrapper.addClass("ready"),this.draggable(),this.options.resize.enabled&&this.resizable(),this.options.center_widgets&&setTimeout(t.proxy(function(){this.center_widgets()},this),0),r.bind("resize.gridster",throttle(t.proxy(this.recalculate_faux_grid,this),200))},o.disable=function(){return this.$wrapper.find(".player-revert").removeClass("player-revert"),this.drag_api.disable(),this},o.enable=function(){return this.drag_api.enable(),this},o.disable_resize=function(){return this.$el.addClass("gs-resize-disabled"),this.resize_api.disable(),this},o.enable_resize=function(){return this.$el.removeClass("gs-resize-disabled"),this.resize_api.enable(),this},o.add_widget=function(e,i,n,r,s,o,a,l){var d;if(i||(i=1),n||(n=1),r||s)d={col:r,row:s,size_x:i,size_y:n},this.options.avoid_overlapped_widgets&&this.empty_cells(r,s,i,n);else if(!1===(d=this.next_position(i,n)))return!1;var h=t(e).attr({"data-col":d.col,"data-row":d.row,"data-sizex":i,"data-sizey":n}).addClass("gs-w").appendTo(this.$el).hide();this.$widgets=this.$widgets.add(h),this.$changed=this.$changed.add(h),this.register_widget(h);var c=parseInt(d.row)+(parseInt(d.size_y)-1);return this.rows<c&&this.add_faux_rows(c-this.rows),o&&this.set_widget_max_size(h,o),a&&this.set_widget_min_size(h,a),this.set_dom_grid_width(),this.set_dom_grid_height(),this.drag_api.set_limits(this.cols*this.min_widget_width+(this.cols+1)*this.options.widget_margins[0]),this.options.center_widgets&&setTimeout(t.proxy(function(){this.center_widgets()},this),0),this.options.show_element.call(this,h,l),h},o.set_widget_min_size=function(t,e){if(!(t="number"==typeof t?this.$widgets.eq(t):t).length)return this;var i=t.data("coords").grid;return i.min_size_x=e[0],i.min_size_y=e[1],this},o.set_widget_max_size=function(t,e){if(!(t="number"==typeof t?this.$widgets.eq(t):t).length)return this;var i=t.data("coords").grid;return i.max_size_x=e[0],i.max_size_y=e[1],this},o.add_resize_handle=function(e){var i=this.options.resize.handle_append_to?t(this.options.resize.handle_append_to,e):e;return 0===i.children("span[class~='"+this.resize_handle_class+"']").length&&t(this.resize_handle_tpl).appendTo(i),this},o.resize_widget=function(t,e,i,n){var r=t.coords().grid;this.is_resizing=!0,e||(e=r.size_x),i||(i=r.size_y),this.is_valid_row(r.row,i)||this.add_faux_rows(Math.max(this.calculate_highest_row(r.row,i)-this.rows,0)),this.is_valid_col(r.col,i)||this.add_faux_cols(Math.max(this.calculate_highest_row(r.col,e)-this.cols,0));var s={col:r.col,row:r.row,size_x:e,size_y:i};return this.mutate_widget_in_gridmap(t,r,s),this.set_dom_grid_height(),this.set_dom_grid_width(),n&&n.call(this,s.size_x,s.size_y),this.is_resizing=!1,t},o.expand_widget=function(e,i,n,r,s){var o=e.coords().grid,a=Math.floor((t(window).width()-2*this.options.widget_margins[0])/this.min_widget_width);i=i||Math.min(a,this.cols),n||(n=o.size_y);var l=o.size_y;e.attr("pre_expand_col",o.col),e.attr("pre_expand_sizex",o.size_x),e.attr("pre_expand_sizey",o.size_y);var d=r||1;n>l&&this.add_faux_rows(Math.max(n-l,0));var h={col:d,row:o.row,size_x:i,size_y:n};return this.mutate_widget_in_gridmap(e,o,h),this.set_dom_grid_height(),this.set_dom_grid_width(),s&&s.call(this,h.size_x,h.size_y),e},o.collapse_widget=function(t,e){var i=t.coords().grid,n=parseInt(t.attr("pre_expand_sizex")),r=parseInt(t.attr("pre_expand_sizey")),s={col:parseInt(t.attr("pre_expand_col")),row:i.row,size_x:n,size_y:r};return this.mutate_widget_in_gridmap(t,i,s),this.set_dom_grid_height(),this.set_dom_grid_width(),e&&e.call(this,s.size_x,s.size_y),t},o.fit_to_content=function(t,e,i,n){var r=t.coords().grid,s=this.$wrapper.width(),o=this.$wrapper.height(),a=this.options.widget_base_dimensions[0]+2*this.options.widget_margins[0],l=this.options.widget_base_dimensions[1]+2*this.options.widget_margins[1],d=Math.ceil((s+2*this.options.widget_margins[0])/a),h=Math.ceil((o+2*this.options.widget_margins[1])/l),c={col:r.col,row:r.row,size_x:Math.min(e,d),size_y:Math.min(i,h)};return this.mutate_widget_in_gridmap(t,r,c),this.set_dom_grid_height(),this.set_dom_grid_width(),n&&n.call(this,c.size_x,c.size_y),t},o.center_widgets=debounce(function(){var e,i=this.$wrapper.width();e=this.is_responsive()?this.get_responsive_col_width():this.options.widget_base_dimensions[0]+2*this.options.widget_margins[0];var n=2*Math.floor(Math.max(Math.floor(i/e),this.min_col_count)/2);this.options.min_cols=n,this.options.max_cols=n,this.options.extra_cols=0,this.set_dom_grid_width(n),this.cols=n;var r=(n-this.prev_col_count)/2;return r<0?(this.get_min_col()>-1*r?this.shift_cols(r):this.resize_widget_dimensions(this.options),setTimeout(t.proxy(function(){this.resize_widget_dimensions(this.options)},this),0)):r>0?(this.resize_widget_dimensions(this.options),setTimeout(t.proxy(function(){this.shift_cols(r)},this),0)):(this.resize_widget_dimensions(this.options),setTimeout(t.proxy(function(){this.resize_widget_dimensions(this.options)},this),0)),this.prev_col_count=n,this},200),o.get_min_col=function(){return Math.min.apply(Math,this.$widgets.map(t.proxy(function(e,i){return this.get_cells_occupied(t(i).coords().grid).cols},this)).get())},o.shift_cols=function(e){var n=this.$widgets.map(t.proxy(function(e,i){var n=t(i);return this.dom_to_coords(n)},this));(n=i.sort_by_row_and_col_asc(n)).each(t.proxy(function(i,n){var r=t(n.el),s=r.coords().grid,o=parseInt(r.attr("data-col")),a={col:Math.max(Math.round(o+e),1),row:s.row,size_x:s.size_x,size_y:s.size_y};setTimeout(t.proxy(function(){this.mutate_widget_in_gridmap(r,s,a)},this),0)},this))},o.mutate_widget_in_gridmap=function(e,i,n){var r=i.size_y,s=this.get_cells_occupied(i),o=this.get_cells_occupied(n),a=[];t.each(s.cols,function(e,i){-1===t.inArray(i,o.cols)&&a.push(i)});var l=[];t.each(o.cols,function(e,i){-1===t.inArray(i,s.cols)&&l.push(i)});var d=[];t.each(s.rows,function(e,i){-1===t.inArray(i,o.rows)&&d.push(i)});var h=[];if(t.each(o.rows,function(e,i){-1===t.inArray(i,s.rows)&&h.push(i)}),this.remove_from_gridmap(i),l.length){var c=[n.col,n.row,n.size_x,Math.min(r,n.size_y),e];this.empty_cells.apply(this,c)}if(h.length){var u=[n.col,n.row,n.size_x,n.size_y,e];this.empty_cells.apply(this,u)}if(i.col=n.col,i.row=n.row,i.size_x=n.size_x,i.size_y=n.size_y,this.add_to_gridmap(n,e),e.removeClass("player-revert"),this.update_widget_dimensions(e,n),this.options.shift_widgets_up){if(a.length){var p=[a[0],n.row,a[a.length-1]-a[0]+1,Math.min(r,n.size_y),e];this.remove_empty_cells.apply(this,p)}if(d.length){var f=[n.col,n.row,n.size_x,n.size_y,e];this.remove_empty_cells.apply(this,f)}}return this.move_widget_up(e),this},o.empty_cells=function(e,i,n,r,s){return this.widgets_below({col:e,row:i-r,size_x:n,size_y:r}).not(s).each(t.proxy(function(e,n){var s=t(n),o=s.coords().grid;if(o.row<=i+r-1){var a=i+r-o.row;this.move_widget_down(s,a)}},this)),this.is_resizing||this.set_dom_grid_height(),this},o.remove_empty_cells=function(e,i,n,r,s){return this.widgets_below({col:e,row:i,size_x:n,size_y:r}).not(s).each(t.proxy(function(e,i){this.move_widget_up(t(i),r)},this)),this.set_dom_grid_height(),this},o.next_position=function(t,e){t||(t=1),e||(e=1);for(var n,r=this.gridmap,s=r.length,o=[],a=1;a<s;a++){n=r[a].length;for(var l=1;l<=n;l++)this.can_move_to({size_x:t,size_y:e},a,l)&&o.push({col:a,row:l,size_y:e,size_x:t})}return!!o.length&&i.sort_by_row_and_col_asc(o)[0]},o.remove_by_grid=function(t,e){var i=this.is_widget(t,e);i&&this.remove_widget(i)},o.remove_widget=function(e,i,n){var r=e instanceof t?e:t(e);if(0===r.length)return this;var s=r.coords().grid;if(void 0===s)return this;t.isFunction(i)&&(n=i,i=!1),this.cells_occupied_by_placeholder={},this.$widgets=this.$widgets.not(r);var o=this.widgets_below(r);return this.remove_from_gridmap(s),this.options.hide_element.call(this,r,t.proxy(function(){r.remove(),i||o.each(t.proxy(function(e,i){this.move_widget_up(t(i),s.size_y)},this)),this.set_dom_grid_height(),n&&n.call(this,e)},this)),this},o.remove_all_widgets=function(e){return this.$widgets.each(t.proxy(function(t,i){this.remove_widget(i,!0,e)},this)),this},o.serialize=function(e){e||(e=this.$widgets);var i=[];return e.each(t.proxy(function(e,n){var r=t(n);void 0!==r.coords().grid&&i.push(this.options.serialize_params(r,r.coords().grid))},this)),i},o.serialize_changed=function(){return this.serialize(this.$changed)},o.dom_to_coords=function(t){return{col:parseInt(t.attr("data-col"),10),row:parseInt(t.attr("data-row"),10),size_x:parseInt(t.attr("data-sizex"),10)||1,size_y:parseInt(t.attr("data-sizey"),10)||1,max_size_x:parseInt(t.attr("data-max-sizex"),10)||!1,max_size_y:parseInt(t.attr("data-max-sizey"),10)||!1,min_size_x:parseInt(t.attr("data-min-sizex"),10)||!1,min_size_y:parseInt(t.attr("data-min-sizey"),10)||!1,el:t}},o.register_widget=function(e){var i=e instanceof t,n=i?this.dom_to_coords(e):e,r=!1;i||(e=n.el);var s=this.can_go_widget_up(n);return this.options.shift_widgets_up&&s&&(n.row=s,e.attr("data-row",s),this.$el.trigger("gridster:positionchanged",[n]),r=!0),this.options.avoid_overlapped_widgets&&!this.can_move_to({size_x:n.size_x,size_y:n.size_y},n.col,n.row)&&(t.extend(n,this.next_position(n.size_x,n.size_y)),e.attr({"data-col":n.col,"data-row":n.row,"data-sizex":n.size_x,"data-sizey":n.size_y}),r=!0),e.data("coords",e.coords()),e.data("coords").grid=n,this.add_to_gridmap(n,e),this.update_widget_dimensions(e,n),this.options.resize.enabled&&this.add_resize_handle(e),r},o.update_widget_position=function(t,e){return this.for_each_cell_occupied(t,function(t,i){if(!this.gridmap[t])return this;this.gridmap[t][i]=e}),this},o.update_widget_dimensions=function(t,e){var i=e.size_x*(this.is_responsive()?this.get_responsive_col_width():this.options.widget_base_dimensions[0])+(e.size_x-1)*this.options.widget_margins[0],n=e.size_y*this.options.widget_base_dimensions[1]+(e.size_y-1)*this.options.widget_margins[1];return t.data("coords").update({width:i,height:n}),t.attr({"data-col":e.col,"data-row":e.row,"data-sizex":e.size_x,"data-sizey":e.size_y}),this},o.update_widgets_dimensions=function(){return t.each(this.$widgets,t.proxy(function(e,i){var n=t(i).coords().grid;"object"==typeof n&&this.update_widget_dimensions(t(i),n)},this)),this},o.remove_from_gridmap=function(t){return this.update_widget_position(t,!1)},o.add_to_gridmap=function(t,e){this.update_widget_position(t,e||t.el)},o.draggable=function(){var e=this,i=t.extend(!0,{},this.options.draggable,{offset_left:this.options.widget_margins[0],offset_top:this.options.widget_margins[1],container_width:this.cols*this.min_widget_width+(this.cols+1)*this.options.widget_margins[0],container_height:this.rows*this.min_widget_height+(this.rows+1)*this.options.widget_margins[0],limit:{width:this.options.limit.width,height:this.options.limit.height},start:function(i,n){e.$widgets.filter(".player-revert").removeClass("player-revert"),e.$player=t(this),e.$helper=t(n.$helper),e.helper=!e.$helper.is(e.$player),e.on_start_drag.call(e,i,n),e.$el.trigger("gridster:dragstart")},stop:function(t,i){e.on_stop_drag.call(e,t,i),e.$el.trigger("gridster:dragstop")},drag:throttle(function(t,i){e.on_drag.call(e,t,i),e.$el.trigger("gridster:drag")},60)});this.drag_api=this.$el.dragg(i).data("drag")},o.resizable=function(){return this.resize_api=this.$el.gridDraggable({items:"."+this.options.resize.handle_class,offset_left:this.options.widget_margins[0],container_width:this.container_width,move_element:!1,resize:!0,limit:{width:this.options.max_cols!==1/0||this.limit.width,height:this.options.max_rows!==1/0||this.limit.height},scroll_container:this.options.scroll_container,start:t.proxy(this.on_start_resize,this),stop:t.proxy(function(e,i){delay(t.proxy(function(){this.on_stop_resize(e,i)},this),120)},this),drag:throttle(t.proxy(this.on_resize,this),60)}),this},o.setup_resize=function(){this.resize_handle_class=this.options.resize.handle_class;var e=this.options.resize.axes,i='<span class="'+this.resize_handle_class+" "+this.resize_handle_class+'-{type}" />';return this.resize_handle_tpl=t.map(e,function(t){return i.replace("{type}",t)}).join(""),t.isArray(this.options.draggable.ignore_dragging)&&this.options.draggable.ignore_dragging.push("."+this.resize_handle_class),this},o.on_start_drag=function(e,i){this.$helper.add(this.$player).add(this.$wrapper).addClass("dragging"),this.highest_col=this.get_highest_occupied_cell().col,this.$player.addClass("player"),this.player_grid_data=this.$player.coords().grid,this.placeholder_grid_data=t.extend({},this.player_grid_data),this.get_highest_occupied_cell().row+this.player_grid_data.size_y<=this.options.max_rows&&this.set_dom_grid_height(this.$el.height()+this.player_grid_data.size_y*this.min_widget_height),this.set_dom_grid_width(this.cols);var n=this.player_grid_data.size_x,r=this.cols-this.highest_col;this.options.max_cols===1/0&&r<=n&&this.add_faux_cols(Math.min(n-r,1));var s=this.faux_grid,o=this.$player.data("coords").coords;this.cells_occupied_by_player=this.get_cells_occupied(this.player_grid_data),this.cells_occupied_by_placeholder=this.get_cells_occupied(this.placeholder_grid_data),this.last_cols=[],this.last_rows=[],this.collision_api=this.$helper.collision(s,this.options.collision),this.$preview_holder=t("<"+this.$player.get(0).tagName+" />",{"class":"preview-holder","data-row":this.$player.attr("data-row"),"data-col":this.$player.attr("data-col"),css:{width:o.width,height:o.height}}).appendTo(this.$el),this.options.draggable.start&&this.options.draggable.start.call(this,e,i)},o.on_drag=function(t,e){if(null===this.$player)return!1;var i=this.options.widget_margins,n=this.$preview_holder.attr("data-col"),r=this.$preview_holder.attr("data-row"),s={left:e.position.left+this.baseX-i[0]*n,top:e.position.top+this.baseY-i[1]*r};this.options.max_cols===1/0&&(this.placeholder_grid_data.col+this.placeholder_grid_data.size_x-1>=this.cols-1&&this.options.max_cols>=this.cols+1&&(this.add_faux_cols(1),this.set_dom_grid_width(this.cols+1),this.drag_api.set_limits(this.cols*this.min_widget_width+(this.cols+1)*this.options.widget_margins[0])),this.collision_api.set_colliders(this.faux_grid)),this.colliders_data=this.collision_api.get_closest_colliders(s),this.on_overlapped_column_change(this.on_start_overlapping_column,this.on_stop_overlapping_column),this.on_overlapped_row_change(this.on_start_overlapping_row,this.on_stop_overlapping_row),this.helper&&this.$player&&this.$player.css({left:e.position.left,top:e.position.top}),this.options.draggable.drag&&this.options.draggable.drag.call(this,t,e)},o.on_stop_drag=function(t,e){this.$helper.add(this.$player).add(this.$wrapper).removeClass("dragging");var i=this.options.widget_margins,n=this.$preview_holder.attr("data-col"),r=this.$preview_holder.attr("data-row");e.position.left=e.position.left+this.baseX-i[0]*n,e.position.top=e.position.top+this.baseY-i[1]*r,this.colliders_data=this.collision_api.get_closest_colliders(e.position),this.on_overlapped_column_change(this.on_start_overlapping_column,this.on_stop_overlapping_column),this.on_overlapped_row_change(this.on_start_overlapping_row,this.on_stop_overlapping_row),this.$changed=this.$changed.add(this.$player);var s=this.placeholder_grid_data.el.coords().grid;s.col===this.placeholder_grid_data.col&&s.row===this.placeholder_grid_data.row||(this.update_widget_position(s,!1),this.options.collision.wait_for_mouseup&&this.for_each_cell_occupied(this.placeholder_grid_data,function(t,e){if(this.is_widget(t,e)){var i=this.placeholder_grid_data.row+this.placeholder_grid_data.size_y-parseInt(this.gridmap[t][e][0].getAttribute("data-row"));!this.move_widget_down(this.is_widget(t,e),i)&&this.set_placeholder(this.placeholder_grid_data.el.coords().grid.col,this.placeholder_grid_data.el.coords().grid.row)}})),this.cells_occupied_by_player=this.get_cells_occupied(this.placeholder_grid_data);var o=this.placeholder_grid_data.col,a=this.placeholder_grid_data.row;this.set_cells_player_occupies(o,a),this.$player.coords().grid.row=a,this.$player.coords().grid.col=o,this.$player.addClass("player-revert").removeClass("player").attr({"data-col":o,"data-row":a}).css({left:"",top:""}),this.options.draggable.stop&&this.options.draggable.stop.call(this,t,e),this.$preview_holder.remove(),this.$player=null,this.$helper=null,this.placeholder_grid_data={},this.player_grid_data={},this.cells_occupied_by_placeholder={},this.cells_occupied_by_player={},this.w_queue={},this.set_dom_grid_height(),this.set_dom_grid_width(),this.options.max_cols===1/0&&this.drag_api.set_limits(this.cols*this.min_widget_width+(this.cols+1)*this.options.widget_margins[0])},o.on_start_resize=function(e,i){this.$resized_widget=i.$player.closest(".gs-w"),this.resize_coords=this.$resized_widget.coords(),this.resize_wgd=this.resize_coords.grid,this.resize_initial_width=this.resize_coords.coords.width,this.resize_initial_height=this.resize_coords.coords.height,this.resize_initial_sizex=this.resize_coords.grid.size_x,this.resize_initial_sizey=this.resize_coords.grid.size_y,this.resize_initial_col=this.resize_coords.grid.col,this.resize_last_sizex=this.resize_initial_sizex,this.resize_last_sizey=this.resize_initial_sizey,this.resize_max_size_x=Math.min(this.resize_wgd.max_size_x||this.options.resize.max_size[0],this.options.max_cols-this.resize_initial_col+1),this.resize_max_size_y=this.resize_wgd.max_size_y||this.options.resize.max_size[1],this.resize_min_size_x=this.resize_wgd.min_size_x||this.options.resize.min_size[0]||1,this.resize_min_size_y=this.resize_wgd.min_size_y||this.options.resize.min_size[1]||1,this.resize_initial_last_col=this.get_highest_occupied_cell().col,this.set_dom_grid_width(this.cols),this.resize_dir={right:i.$player.is("."+this.resize_handle_class+"-x"),bottom:i.$player.is("."+this.resize_handle_class+"-y")},this.is_responsive()||this.$resized_widget.css({"min-width":this.options.widget_base_dimensions[0],"min-height":this.options.widget_base_dimensions[1]});var n=this.$resized_widget.get(0).tagName;this.$resize_preview_holder=t("<"+n+" />",{"class":"preview-holder resize-preview-holder","data-row":this.$resized_widget.attr("data-row"),"data-col":this.$resized_widget.attr("data-col"),css:{width:this.resize_initial_width,height:this.resize_initial_height}}).appendTo(this.$el),this.$resized_widget.addClass("resizing"),this.options.resize.start&&this.options.resize.start.call(this,e,i,this.$resized_widget),this.$el.trigger("gridster:resizestart")},o.on_stop_resize=function(e,i){this.$resized_widget.removeClass("resizing").css({width:"",height:"","min-width":"","min-height":""}),delay(t.proxy(function(){this.$resize_preview_holder.remove().css({"min-width":"","min-height":""}),this.options.resize.stop&&this.options.resize.stop.call(this,e,i,this.$resized_widget),this.$el.trigger("gridster:resizestop")},this),300),this.set_dom_grid_width(),this.set_dom_grid_height(),this.options.max_cols===1/0&&this.drag_api.set_limits(this.cols*this.min_widget_width)},o.on_resize=function(t,e){var i,n=e.pointer.diff_left,r=e.pointer.diff_top,s=this.is_responsive()?this.get_responsive_col_width():this.options.widget_base_dimensions[0],o=this.options.widget_base_dimensions[1],a=this.options.widget_margins[0],l=this.options.widget_margins[1],d=this.resize_max_size_x,h=this.resize_min_size_x,c=this.resize_max_size_y,u=this.resize_min_size_y,p=this.options.max_cols===1/0,f=Math.ceil(n/(s+2*a)-.2),g=Math.ceil(r/(o+2*l)-.2),m=Math.max(1,this.resize_initial_sizex+f),_=Math.max(1,this.resize_initial_sizey+g),v=Math.floor(this.container_width/this.min_widget_width-this.resize_initial_col+1),y=v*this.min_widget_width+(v-1)*a;m=Math.max(Math.min(m,d),h),i=d*s+((m=Math.min(v,m))-1)*a;var w=Math.min(i,y),b=h*s+(m-1)*a,S=c*o+((_=Math.max(Math.min(_,c),u))-1)*l,C=u*o+(_-1)*l;if(this.resize_dir.right?_=this.resize_initial_sizey:this.resize_dir.bottom&&(m=this.resize_initial_sizex),p){var x=this.resize_initial_col+m-1;p&&this.resize_initial_last_col<=x&&(this.set_dom_grid_width(Math.max(x+1,this.cols)),this.cols<x&&this.add_faux_cols(x-this.cols))}var D={};!this.resize_dir.bottom&&(D.width=Math.max(Math.min(this.resize_initial_width+n,w),b)),!this.resize_dir.right&&(D.height=Math.max(Math.min(this.resize_initial_height+r,S),C)),this.$resized_widget.css(D),m===this.resize_last_sizex&&_===this.resize_last_sizey||(this.resize_widget(this.$resized_widget,m,_,!1),this.set_dom_grid_width(this.cols),this.$resize_preview_holder.css({width:"",height:""}).attr({"data-row":this.$resized_widget.attr("data-row"),"data-sizex":m,"data-sizey":_})),this.options.resize.resize&&this.options.resize.resize.call(this,t,e,this.$resized_widget),this.$el.trigger("gridster:resize"),this.resize_last_sizex=m,this.resize_last_sizey=_},o.on_overlapped_column_change=function(e,i){if(!this.colliders_data.length)return this;var n,r=this.get_targeted_columns(this.colliders_data[0].el.data.col),s=this.last_cols.length,o=r.length;for(n=0;n<o;n++)-1===t.inArray(r[n],this.last_cols)&&(e||t.noop).call(this,r[n]);for(n=0;n<s;n++)-1===t.inArray(this.last_cols[n],r)&&(i||t.noop).call(this,this.last_cols[n]);return this.last_cols=r,this},o.on_overlapped_row_change=function(e,i){if(!this.colliders_data.length)return this;var n,r=this.get_targeted_rows(this.colliders_data[0].el.data.row),s=this.last_rows.length,o=r.length;for(n=0;n<o;n++)-1===t.inArray(r[n],this.last_rows)&&(e||t.noop).call(this,r[n]);for(n=0;n<s;n++)-1===t.inArray(this.last_rows[n],r)&&(i||t.noop).call(this,this.last_rows[n]);this.last_rows=r},o.set_player=function(e,i,n){var r=!1,s=n?{col:e}:this.colliders_data[0].el.data,o=s.col,a=s.row||i;this.player_grid_data={col:o,row:a,size_y:this.player_grid_data.size_y,size_x:this.player_grid_data.size_x},this.cells_occupied_by_player=this.get_cells_occupied(this.player_grid_data),
this.cells_occupied_by_placeholder=this.get_cells_occupied(this.placeholder_grid_data);var l=this.get_widgets_overlapped(this.player_grid_data),d=this.player_grid_data.size_y,h=this.player_grid_data.size_x,c=this.cells_occupied_by_placeholder,u=this;if(l.each(t.proxy(function(e,i){var n=t(i),s=n.coords().grid,p=c.cols[0]+h-1,f=c.rows[0]+d-1;if(n.hasClass(u.options.static_class))return!0;if(u.options.collision.wait_for_mouseup&&u.drag_api.is_dragging)u.placeholder_grid_data.col=o,u.placeholder_grid_data.row=a,u.cells_occupied_by_placeholder=u.get_cells_occupied(u.placeholder_grid_data),u.$preview_holder.attr({"data-row":a,"data-col":o});else if(s.size_x<=h&&s.size_y<=d)if(u.is_swap_occupied(c.cols[0],s.row,s.size_x,s.size_y)||u.is_player_in(c.cols[0],s.row)||u.is_in_queue(c.cols[0],s.row,n))if(u.is_swap_occupied(p,s.row,s.size_x,s.size_y)||u.is_player_in(p,s.row)||u.is_in_queue(p,s.row,n))if(u.is_swap_occupied(s.col,c.rows[0],s.size_x,s.size_y)||u.is_player_in(s.col,c.rows[0])||u.is_in_queue(s.col,c.rows[0],n))if(u.is_swap_occupied(s.col,f,s.size_x,s.size_y)||u.is_player_in(s.col,f)||u.is_in_queue(s.col,f,n))if(u.is_swap_occupied(c.cols[0],c.rows[0],s.size_x,s.size_y)||u.is_player_in(c.cols[0],c.rows[0])||u.is_in_queue(c.cols[0],c.rows[0],n))for(var g=0;g<h;g++)for(var m=0;m<d;m++){var _=c.cols[0]+g,v=c.rows[0]+m;if(!u.is_swap_occupied(_,v,s.size_x,s.size_y)&&!u.is_player_in(_,v)&&!u.is_in_queue(_,v,n)){r=u.queue_widget(_,v,n),g=h;break}}else u.options.move_widgets_down_only?l.each(t.proxy(function(e,i){var n=t(i);u.can_go_down(n)&&n.coords().grid.row===u.player_grid_data.row&&!u.is_in_queue(p,s.row,n)&&(u.move_widget_down(n,u.player_grid_data.size_y),u.set_placeholder(o,a))})):r=u.queue_widget(c.cols[0],c.rows[0],n);else r=u.queue_widget(s.col,f,n);else r=u.queue_widget(s.col,c.rows[0],n);else r=u.queue_widget(p,s.row,n);else u.options.move_widgets_down_only?l.each(t.proxy(function(e,i){var n=t(i);u.can_go_down(n)&&n.coords().grid.row===u.player_grid_data.row&&!u.is_in_queue(n.coords().grid.col,s.row,n)&&(u.move_widget_down(n,u.player_grid_data.size_y),u.set_placeholder(o,a))})):r=u.queue_widget(c.cols[0],s.row,n);else u.options.shift_larger_widgets_down&&!r&&l.each(t.proxy(function(e,i){var n=t(i);u.can_go_down(n)&&n.coords().grid.row===u.player_grid_data.row&&(u.move_widget_down(n,u.player_grid_data.size_y),u.set_placeholder(o,a))}));u.clean_up_changed()})),r&&this.can_placeholder_be_set(o,a,h,d)){for(var p in this.w_queue){var f=parseInt(p.split("_")[0]),g=parseInt(p.split("_")[1]);"full"!==this.w_queue[p]&&this.new_move_widget_to(this.w_queue[p],f,g)}this.set_placeholder(o,a)}if(!l.length){if(this.options.shift_widgets_up){var m=this.can_go_player_up(this.player_grid_data);!1!==m&&(a=m)}this.can_placeholder_be_set(o,a,h,d)&&this.set_placeholder(o,a)}return this.w_queue={},{col:o,row:a}},o.is_swap_occupied=function(t,e,i,n){for(var r=!1,s=0;s<i;s++)for(var o=0;o<n;o++){var a=t+s,l=e+o,d=a+"_"+l;if(this.is_occupied(a,l))r=!0;else if(d in this.w_queue){if("full"===this.w_queue[d]){r=!0;continue}var h=this.w_queue[d].coords().grid;this.is_widget_under_player(h.col,h.row)||delete this.w_queue[d]}l>parseInt(this.options.max_rows)&&(r=!0),a>parseInt(this.options.max_cols)&&(r=!0),this.is_player_in(a,l)&&(r=!0)}return r},o.can_placeholder_be_set=function(t,e,i,n){for(var r=!0,s=0;s<i;s++)for(var o=0;o<n;o++){var a=t+s,l=e+o,d=this.is_widget(a,l);l>parseInt(this.options.max_rows)&&(r=!1),a>parseInt(this.options.max_cols)&&(r=!1),this.is_occupied(a,l)&&!this.is_widget_queued_and_can_move(d)&&(r=!1)}return r},o.queue_widget=function(t,e,i){var n=i,r=n.coords().grid,s=t+"_"+e;if(s in this.w_queue)return!1;this.w_queue[s]=n;for(var o=0;o<r.size_x;o++)for(var a=0;a<r.size_y;a++){var l=t+o+"_"+(e+a);l!==s&&(this.w_queue[l]="full")}return!0},o.is_widget_queued_and_can_move=function(t){var e=!1;if(!1===t)return!1;for(var i in this.w_queue)if("full"!==this.w_queue[i]&&this.w_queue[i].attr("data-col")===t.attr("data-col")&&this.w_queue[i].attr("data-row")===t.attr("data-row")){e=!0;for(var n=this.w_queue[i],r=parseInt(i.split("_")[0]),s=parseInt(i.split("_")[1]),o=n.coords().grid,a=0;a<o.size_x;a++)for(var l=0;l<o.size_y;l++){var d=r+a,h=s+l;this.is_player_in(d,h)&&(e=!1)}}return e},o.is_in_queue=function(t,e,i){var n=!1,r=t+"_"+e;if(r in this.w_queue)if("full"===this.w_queue[r])n=!0;else{var s=this.w_queue[r].coords().grid;this.is_widget_under_player(s.col,s.row)?this.w_queue[r].attr("data-col")===i.attr("data-col")&&this.w_queue[r].attr("data-row")===i.attr("data-row")?(delete this.w_queue[r],n=!1):n=!0:(delete this.w_queue[r],n=!1)}return n},o.widgets_constraints=function(e){var n=t([]),r=[],s=[];return e.each(t.proxy(function(e,i){var o=t(i),a=o.coords().grid;this.can_go_widget_up(a)?(n=n.add(o),r.push(a)):s.push(a)},this)),e.not(n),{can_go_up:i.sort_by_row_asc(r),can_not_go_up:i.sort_by_row_desc(s)}},o.manage_movements=function(e,i,n){return t.each(e,t.proxy(function(t,e){var r=e,s=r.el,o=this.can_go_widget_up(r);if(o)this.move_widget_to(s,o),this.set_placeholder(i,o+r.size_y);else if(!this.can_go_player_up(this.player_grid_data)){var a=n+this.player_grid_data.size_y-r.row;this.can_go_down(s)&&(console.log("In Move Down!"),this.move_widget_down(s,a),this.set_placeholder(i,n))}},this)),this},o.is_player=function(t,e){if(e&&!this.gridmap[t])return!1;var i=e?this.gridmap[t][e]:t;return i&&(i.is(this.$player)||i.is(this.$helper))},o.is_player_in=function(e,i){var n=this.cells_occupied_by_player||{};return t.inArray(e,n.cols)>=0&&t.inArray(i,n.rows)>=0},o.is_placeholder_in=function(e,i){var n=this.cells_occupied_by_placeholder||{};return this.is_placeholder_in_col(e)&&t.inArray(i,n.rows)>=0},o.is_placeholder_in_col=function(e){var i=this.cells_occupied_by_placeholder||[];return t.inArray(e,i.cols)>=0},o.is_empty=function(t,e){return void 0===this.gridmap[t]||void 0!==this.gridmap[t][e]&&!1===this.gridmap[t][e]},o.is_valid_col=function(t,e){return this.options.max_cols===1/0||this.cols>=this.calculate_highest_col(t,e)},o.is_valid_row=function(t,e){return this.rows>=this.calculate_highest_row(t,e)},o.calculate_highest_col=function(t,e){return t+(e||1)-1},o.calculate_highest_row=function(t,e){return t+(e||1)-1},o.is_occupied=function(e,i){return!(!this.gridmap[e]||this.is_player(e,i)||!this.gridmap[e][i]||this.options.ignore_self_occupied&&this.$player.data()===t(this.gridmap[e][i]).data())},o.is_widget=function(t,e){var i=this.gridmap[t];return!!i&&!!(i=i[e])&&i},o.is_static=function(t,e){var i=this.gridmap[t];return!!i&&!(!(i=i[e])||!i.hasClass(this.options.static_class))},o.is_widget_under_player=function(t,e){return!!this.is_widget(t,e)&&this.is_player_in(t,e)},o.get_widgets_under_player=function(e){e||(e=this.cells_occupied_by_player||{cols:[],rows:[]});var i=t([]);return t.each(e.cols,t.proxy(function(n,r){t.each(e.rows,t.proxy(function(t,e){this.is_widget(r,e)&&(i=i.add(this.gridmap[r][e]))},this))},this)),i},o.set_placeholder=function(e,i){var n=t.extend({},this.placeholder_grid_data),r=e+n.size_x-1;r>this.cols&&(e-=r-e);var s=this.placeholder_grid_data.row<i,o=this.placeholder_grid_data.col!==e;if(this.placeholder_grid_data.col=e,this.placeholder_grid_data.row=i,this.cells_occupied_by_placeholder=this.get_cells_occupied(this.placeholder_grid_data),this.$preview_holder.attr({"data-row":i,"data-col":e}),this.options.shift_player_up){(s||o)&&this.widgets_below({col:n.col,row:n.row,size_y:n.size_y,size_x:n.size_x}).each(t.proxy(function(e,i){var n=t(i),r=n.coords().grid,s=this.can_go_widget_up(r);s&&this.move_widget_to(n,s)},this));var a=this.get_widgets_under_player(this.cells_occupied_by_placeholder);a.length&&a.each(t.proxy(function(e,r){var s=t(r);this.move_widget_down(s,i+n.size_y-s.data("coords").grid.row)},this))}},o.can_go_player_up=function(t){var e=t.row+t.size_y-1,i=!0,n=[],r=1e4,s=this.get_widgets_under_player();return this.for_each_column_occupied(t,function(t){var o=this.gridmap[t],a=e+1;for(n[t]=[];--a>0&&(this.is_empty(t,a)||this.is_player(t,a)||this.is_widget(t,a)&&o[a].is(s));)n[t].push(a),r=a<r?a:r;if(0===n[t].length)return i=!1,!0;n[t].sort(function(t,e){return t-e})}),!!i&&this.get_valid_rows(t,n,r)},o.can_go_widget_up=function(t){var e=t.row+t.size_y-1,i=!0,n=[],r=1e4;return this.for_each_column_occupied(t,function(s){var o=this.gridmap[s];n[s]=[];for(var a=e+1;--a>0&&(!this.is_widget(s,a)||this.is_player_in(s,a)||o[a].is(t.el));)this.is_player(s,a)||this.is_placeholder_in(s,a)||this.is_player_in(s,a)||n[s].push(a),a<r&&(r=a);if(0===n[s].length)return i=!1,!0;n[s].sort(function(t,e){return t-e})}),!!i&&this.get_valid_rows(t,n,r)},o.get_valid_rows=function(e,i,n){for(var r=e.row,s=e.row+e.size_y-1,o=e.size_y,a=n-1,l=[];++a<=s;){var d=!0;if(t.each(i,function(e,i){t.isArray(i)&&-1===t.inArray(a,i)&&(d=!1)}),!0===d&&(l.push(a),l.length===o))break}var h=!1;return 1===o?l[0]!==r&&(h=l[0]||!1):l[0]!==r&&(h=this.get_consecutive_numbers_index(l,o)),h},o.get_consecutive_numbers_index=function(t,e){for(var i=t.length,n=[],r=!0,s=-1,o=0;o<i;o++){if(r||t[o]===s+1){if(n.push(o),n.length===e)break;r=!1}else n=[],r=!0;s=t[o]}return n.length>=e&&t[n[0]]},o.get_widgets_overlapped=function(){var e=t([]),i=[],n=this.cells_occupied_by_player.rows.slice(0);return n.reverse(),t.each(this.cells_occupied_by_player.cols,t.proxy(function(r,s){t.each(n,t.proxy(function(n,r){if(!this.gridmap[s])return!0;var o=this.gridmap[s][r];this.is_occupied(s,r)&&!this.is_player(o)&&-1===t.inArray(o,i)&&(e=e.add(o),i.push(o))},this))},this)),e},o.on_start_overlapping_column=function(t){this.set_player(t,void 0,!1)},o.on_start_overlapping_row=function(t){this.set_player(void 0,t,!1)},o.on_stop_overlapping_column=function(t){var e=this;this.options.shift_larger_widgets_down&&this.for_each_widget_below(t,this.cells_occupied_by_player.rows[0],function(){e.move_widget_up(this,e.player_grid_data.size_y)})},o.on_stop_overlapping_row=function(t){var e=this,i=this.cells_occupied_by_player.cols;if(this.options.shift_larger_widgets_down)for(var n=0,r=i.length;n<r;n++)this.for_each_widget_below(i[n],t,function(){e.move_widget_up(this,e.player_grid_data.size_y)})},o.new_move_widget_to=function(t,e,i){var n=t.coords().grid;return this.remove_from_gridmap(n),n.row=i,n.col=e,this.add_to_gridmap(n),t.attr("data-row",i),t.attr("data-col",e),this.update_widget_position(n,t),this.$changed=this.$changed.add(t),this},o.move_widget=function(t,e,i,n){var r=t.coords().grid,s={col:e,row:i,size_x:r.size_x,size_y:r.size_y};return this.mutate_widget_in_gridmap(t,r,s),this.set_dom_grid_height(),this.set_dom_grid_width(),n&&n.call(this,s.col,s.row),t},o.move_widget_to=function(e,i){var n=this,r=e.coords().grid,s=this.widgets_below(e);return!1!==this.can_move_to(r,r.col,i)&&(this.remove_from_gridmap(r),r.row=i,this.add_to_gridmap(r),e.attr("data-row",i),this.$changed=this.$changed.add(e),s.each(function(e,i){var r=t(i),s=r.coords().grid,o=n.can_go_widget_up(s);o&&o!==s.row&&n.move_widget_to(r,o)}),this)},o.move_widget_up=function(e,i){if(void 0===i)return!1;var n=e.coords().grid,r=n.row,s=[];if(i||(i=1),!this.can_go_up(e))return!1;this.for_each_column_occupied(n,function(n){if(-1===t.inArray(e,s)){var o=e.coords().grid,a=r-i;if(!(a=this.can_go_up_to_row(o,n,a)))return!0;this.remove_from_gridmap(o),o.row=a,this.add_to_gridmap(o),e.attr("data-row",o.row),this.$changed=this.$changed.add(e),s.push(e)}})},o.move_widget_down=function(e,i){var n,r,s;if(i<=0)return!1;if((n=e.coords().grid.row)+(e.coords().grid.size_y-1)+i>this.options.max_rows)return!1;if(r=[],s=i,!e)return!1;if(this.failed=!1,-1===t.inArray(e,r)){var o=e.coords().grid,a=n+i;if(this.widgets_below(e).each(t.proxy(function(e,i){if(!0!==this.failed){var n=t(i),r=n.coords().grid,a=this.displacement_diff(r,o,s);a>0&&(this.failed=!1===this.move_widget_down(n,a))}},this)),this.failed)return!1;this.remove_from_gridmap(o),o.row=a,this.update_widget_position(o,e),e.attr("data-row",o.row),this.$changed=this.$changed.add(e),r.push(e)}return!0},o.can_go_up_to_row=function(e,i,n){var r,s=!0,o=[],a=e.row;if(this.for_each_column_occupied(e,function(t){for(o[t]=[],r=a;r--&&this.is_empty(t,r)&&!this.is_placeholder_in(t,r);)o[t].push(r);if(!o[t].length)return s=!1,!0}),!s)return!1;for(r=n,r=1;r<a;r++){for(var l=!0,d=0,h=o.length;d<h;d++)o[d]&&-1===t.inArray(r,o[d])&&(l=!1);if(!0===l){s=r;break}}return s},o.displacement_diff=function(t,e,i){var n=t.row,r=[],s=e.row+e.size_y;return this.for_each_column_occupied(t,function(t){for(var e=0,i=s;i<n;i++)this.is_empty(t,i)&&(e+=1);r.push(e)}),(i-=Math.max.apply(Math,r))>0?i:0},o.widgets_below=function(e){var n=t([]),r=t.isPlainObject(e)?e:e.coords().grid;if(void 0===r)return n;var s=this,o=r.row+r.size_y-1;return this.for_each_column_occupied(r,function(e){s.for_each_widget_below(e,o,function(){if(!s.is_player(this)&&-1===t.inArray(this,n))return n=n.add(this),!0})}),i.sort_by_row_asc(n)},o.set_cells_player_occupies=function(t,e){return this.remove_from_gridmap(this.placeholder_grid_data),this.placeholder_grid_data.col=t,this.placeholder_grid_data.row=e,this.add_to_gridmap(this.placeholder_grid_data,this.$player),this},o.empty_cells_player_occupies=function(){return this.remove_from_gridmap(this.placeholder_grid_data),this},o.can_go_down=function(e){var i=!0,n=this;return e.hasClass(this.options.static_class)&&(i=!1),this.widgets_below(e).each(function(){t(this).hasClass(n.options.static_class)&&(i=!1)}),i},o.can_go_up=function(t){var e=t.coords().grid,i=e.row,n=i-1,r=!0;return 1!==i&&(this.for_each_column_occupied(e,function(t){if(this.is_occupied(t,n)||this.is_player(t,n)||this.is_placeholder_in(t,n)||this.is_player_in(t,n))return r=!1,!0}),r)},o.can_move_to=function(t,e,i){var n=t.el,r={size_y:t.size_y,size_x:t.size_x,col:e,row:i},s=!0;return!(this.options.max_cols!==1/0&&e+t.size_x-1>this.cols)&&(!(this.options.max_rows<i+t.size_y-1)&&(this.for_each_cell_occupied(r,function(e,i){var r=this.is_widget(e,i);!r||t.el&&!r.is(n)||(s=!1)}),s))},o.get_targeted_columns=function(t){for(var e=(t||this.player_grid_data.col)+(this.player_grid_data.size_x-1),i=[],n=t;n<=e;n++)i.push(n);return i},o.get_targeted_rows=function(t){for(var e=(t||this.player_grid_data.row)+(this.player_grid_data.size_y-1),i=[],n=t;n<=e;n++)i.push(n);return i},o.get_cells_occupied=function(e){var i,n={cols:[],rows:[]};for(arguments[1]instanceof t&&(e=arguments[1].coords().grid),i=0;i<e.size_x;i++){var r=e.col+i;n.cols.push(r)}for(i=0;i<e.size_y;i++){var s=e.row+i;n.rows.push(s)}return n},o.for_each_cell_occupied=function(t,e){return this.for_each_column_occupied(t,function(i){this.for_each_row_occupied(t,function(t){e.call(this,i,t)})}),this},o.for_each_column_occupied=function(t,e){for(var i=0;i<t.size_x;i++){var n=t.col+i;e.call(this,n,t)}},o.for_each_row_occupied=function(t,e){for(var i=0;i<t.size_y;i++){var n=t.row+i;e.call(this,n,t)}},o.clean_up_changed=function(){var e=this;e.$changed.each(function(){e.options.shift_larger_widgets_down&&e.move_widget_up(t(this))})},o._traversing_widgets=function(e,i,n,r,s){var o=this.gridmap;if(o[n]){var a,l,d=e+"/"+i;if(arguments[2]instanceof t){var h=arguments[2].coords().grid;n=h.col,r=h.row,s=arguments[3]}var c=[],u=r,p={"for_each/above":function(){for(;u--&&!(u>0&&this.is_widget(n,u)&&-1===t.inArray(o[n][u],c)&&(a=s.call(o[n][u],n,u),c.push(o[n][u]),a)););},"for_each/below":function(){for(u=r+1,l=o[n].length;u<l;u++)this.is_widget(n,u)&&-1===t.inArray(o[n][u],c)&&(a=s.call(o[n][u],n,u),c.push(o[n][u]))}};p[d]&&p[d].call(this)}},o.for_each_widget_above=function(t,e,i){return this._traversing_widgets("for_each","above",t,e,i),this},o.for_each_widget_below=function(t,e,i){return this._traversing_widgets("for_each","below",t,e,i),this},o.get_highest_occupied_cell=function(){for(var t,e=this.gridmap,i=e[1].length,n=[],r=[],s=e.length-1;s>=1;s--)for(t=i-1;t>=1;t--)if(this.is_widget(s,t)){n.push(t),r.push(s);break}return{col:Math.max.apply(Math,r),row:Math.max.apply(Math,n)}},o.get_widgets_in_range=function(e,i,n,r){var s,o,a,l,d=t([]);for(s=n;s>=e;s--)for(o=r;o>=i;o--)!1!==(a=this.is_widget(s,o))&&((l=a.data("coords").grid).col>=e&&l.col<=n&&l.row>=i&&l.row<=r&&(d=d.add(a)));return d},o.get_widgets_at_cell=function(t,e){return this.get_widgets_in_range(t,e,t,e)},o.get_widgets_from=function(e,i){var n=t();return e&&(n=n.add(this.$widgets.filter(function(){var i=parseInt(t(this).attr("data-col"));return i===e||i>e}))),i&&(n=n.add(this.$widgets.filter(function(){var e=parseInt(t(this).attr("data-row"));return e===i||e>i}))),n},o.set_dom_grid_height=function(t){if(void 0===t){var e=this.get_highest_occupied_cell().row;t=(e+1)*this.options.widget_margins[1]+e*this.min_widget_height}return this.container_height=t,this.$el.css("height",this.container_height),this},o.set_dom_grid_width=function(t){void 0===t&&(t=this.get_highest_occupied_cell().col);var e=this.options.max_cols===1/0?this.options.max_cols:this.cols;return t=Math.min(e,Math.max(t,this.options.min_cols)),this.container_width=(t+1)*this.options.widget_margins[0]+t*this.min_widget_width,this.is_responsive()?(this.$el.css({"min-width":"100%","max-width":"100%"}),this):(this.$el.css("width",this.container_width),this)},o.is_responsive=function(){return this.options.autogenerate_stylesheet&&"auto"===this.options.widget_base_dimensions[0]&&this.options.max_cols!==1/0},o.get_responsive_col_width=function(){var t=this.cols||this.options.max_cols;return(this.$el[0].clientWidth-3-(t+1)*this.options.widget_margins[0])/t},o.resize_responsive_layout=function(){return this.min_widget_width=this.get_responsive_col_width(),this.generate_stylesheet(),this.update_widgets_dimensions(),this.drag_api.set_limits(this.cols*this.min_widget_width+(this.cols+1)*this.options.widget_margins[0]),this},o.toggle_collapsed_grid=function(t,e){return t?(this.$widgets.css({"margin-top":e.widget_margins[0],"margin-bottom":e.widget_margins[0],"min-height":e.widget_base_dimensions[1]}),this.$el.addClass("collapsed"),this.resize_api&&this.disable_resize(),this.drag_api&&this.disable()):(this.$widgets.css({"margin-top":"auto","margin-bottom":"auto","min-height":"auto"}),this.$el.removeClass("collapsed"),this.resize_api&&this.enable_resize(),this.drag_api&&this.enable()),this},o.generate_stylesheet=function(e){var n,r="",s=this.is_responsive()&&this.options.responsive_breakpoint&&t(window).width()<this.options.responsive_breakpoint;e||(e={}),e.cols||(e.cols=this.cols),e.rows||(e.rows=this.rows),e.namespace||(e.namespace=this.options.namespace),e.widget_base_dimensions||(e.widget_base_dimensions=this.options.widget_base_dimensions),e.widget_margins||(e.widget_margins=this.options.widget_margins),this.is_responsive()&&(e.widget_base_dimensions=[this.get_responsive_col_width(),e.widget_base_dimensions[1]],this.toggle_collapsed_grid(s,e));var o=t.param(e);if(t.inArray(o,i.generated_stylesheets)>=0)return!1;for(this.generated_stylesheets.push(o),i.generated_stylesheets.push(o),n=1;n<=e.cols+1;n++)r+=e.namespace+' [data-col="'+n+'"] { left:'+(s?this.options.widget_margins[0]:n*e.widget_margins[0]+(n-1)*e.widget_base_dimensions[0])+"px; }\n";for(n=1;n<=e.rows+1;n++)r+=e.namespace+' [data-row="'+n+'"] { top:'+(n*e.widget_margins[1]+(n-1)*e.widget_base_dimensions[1])+"px; }\n";for(var a=1;a<=e.rows;a++)r+=e.namespace+' [data-sizey="'+a+'"] { height:'+(s?"auto":a*e.widget_base_dimensions[1]+(a-1)*e.widget_margins[1])+(s?"":"px")+"; }\n";for(var l=1;l<=e.cols;l++){var d=l*e.widget_base_dimensions[0]+(l-1)*e.widget_margins[0];r+=e.namespace+' [data-sizex="'+l+'"] { width:'+(s?this.$wrapper.width()-2*this.options.widget_margins[0]:d>this.$wrapper.width()?this.$wrapper.width():d)+"px; }\n"}return this.remove_style_tags(),this.add_style_tag(r)},o.add_style_tag=function(t){var e=document,i="gridster-stylesheet";if(""!==this.options.namespace&&(i=i+"-"+this.options.namespace),!document.getElementById(i)){var n=e.createElement("style");n.id=i,e.getElementsByTagName("head")[0].appendChild(n),n.setAttribute("type","text/css"),n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t)),this.remove_style_tags(),this.$style_tags=this.$style_tags.add(n)}return this},o.remove_style_tags=function(){var e=i.generated_stylesheets,n=this.generated_stylesheets;this.$style_tags.remove(),i.generated_stylesheets=t.map(e,function(e){if(-1===t.inArray(e,n))return e})},o.generate_faux_grid=function(t,e){var i,n;for(this.faux_grid=[],this.gridmap=[],i=e;i>0;i--)for(this.gridmap[i]=[],n=t;n>0;n--)this.add_faux_cell(n,i);return this},o.add_faux_cell=function(e,i){var n=t({left:this.baseX+(i-1)*this.min_widget_width,top:this.baseY+(e-1)*this.min_widget_height,width:this.min_widget_width,height:this.min_widget_height,col:i,row:e,original_col:i,original_row:e}).coords();return t.isArray(this.gridmap[i])||(this.gridmap[i]=[]),void 0===this.gridmap[i][e]&&(this.gridmap[i][e]=!1),this.faux_grid.push(n),this},o.add_faux_rows=function(t){t=window.parseInt(t,10);for(var e=this.rows,i=e+parseInt(t||1),n=i;n>e;n--)for(var r=this.cols;r>=1;r--)this.add_faux_cell(n,r);return this.rows=i,this.options.autogenerate_stylesheet&&this.generate_stylesheet(),this},o.add_faux_cols=function(t){t=window.parseInt(t,10);var e=this.cols,i=e+parseInt(t||1);i=Math.min(i,this.options.max_cols);for(var n=e+1;n<=i;n++)for(var r=this.rows;r>=1;r--)this.add_faux_cell(r,n);return this.cols=i,this.options.autogenerate_stylesheet&&this.generate_stylesheet(),this},o.recalculate_faux_grid=function(){var e=this.$wrapper.width();return this.baseX=(r.width()-e)/2,this.baseY=this.$wrapper.offset().top,"relative"===this.$wrapper.css("position")&&(this.baseX=this.baseY=0),t.each(this.faux_grid,t.proxy(function(t,e){this.faux_grid[t]=e.update({left:this.baseX+(e.data.col-1)*this.min_widget_width,top:this.baseY+(e.data.row-1)*this.min_widget_height})},this)),this.is_responsive()&&this.resize_responsive_layout(),this.options.center_widgets&&this.center_widgets(),this},o.resize_widget_dimensions=function(e){return e.widget_margins&&(this.options.widget_margins=e.widget_margins),e.widget_base_dimensions&&(this.options.widget_base_dimensions=e.widget_base_dimensions),this.min_widget_width=2*this.options.widget_margins[0]+this.options.widget_base_dimensions[0],this.min_widget_height=2*this.options.widget_margins[1]+this.options.widget_base_dimensions[1],this.$widgets.each(t.proxy(function(e,i){var n=t(i);this.resize_widget(n)},this)),this.generate_grid_and_stylesheet(),this.get_widgets_from_DOM(),this.set_dom_grid_height(),this.set_dom_grid_width(),this},o.get_widgets_from_DOM=function(){var e=this.$widgets.map(t.proxy(function(e,i){var n=t(i);return this.dom_to_coords(n)},this));return e=i.sort_by_row_and_col_asc(e),t(e).map(t.proxy(function(t,e){return this.register_widget(e)||null},this)).length&&this.$el.trigger("gridster:positionschanged"),this},o.get_num_widgets=function(){return this.$widgets.size()},o.set_num_columns=function(e){var i=this.options.max_cols,n=Math.floor(e/(this.min_widget_width+this.options.widget_margins[0]))+this.options.extra_cols,r=this.$widgets.map(function(){return t(this).attr("data-col")}).get();r.length||(r=[0]);var s=Math.max.apply(Math,r);this.cols=Math.max(s,n,this.options.min_cols),i!==1/0&&i>=s&&i<this.cols&&(this.cols=i),this.drag_api&&this.drag_api.set_limits(this.cols*this.min_widget_width+(this.cols+1)*this.options.widget_margins[0])},o.set_new_num_rows=function(e){var i=this.options.max_rows,n=this.$widgets.map(function(){return t(this).attr("data-row")}).get();n.length||(n=[0]);var r=Math.max.apply(Math,n);this.rows=Math.max(r,e,this.options.min_rows),i!==1/0&&(i<r||i<this.rows)&&(i=this.rows),this.min_rows=r,this.max_rows=i,this.options.max_rows=i;var s=this.rows*this.min_widget_height+(this.rows+1)*this.options.widget_margins[1];this.drag_api&&(this.drag_api.options.container_height=s),this.container_height=s,this.generate_faux_grid(this.rows,this.cols)},o.generate_grid_and_stylesheet=function(){var e=this.$wrapper.width();this.set_num_columns(e);this.options.extra_rows;return this.$widgets.each(function(e,i){+t(i).attr("data-sizey")}),this.rows=this.options.max_rows,this.baseX=(r.width()-e)/2,this.baseY=this.$wrapper.offset().top,this.options.autogenerate_stylesheet&&this.generate_stylesheet(),this.generate_faux_grid(this.rows,this.cols)},o.destroy=function(e){return this.$el.removeData("gridster"),t.each(this.$widgets,function(){t(this).removeData("coords")}),r.unbind(".gridster"),this.drag_api&&this.drag_api.destroy(),this.resize_api&&this.resize_api.destroy(),this.$widgets.each(function(e,i){t(i).coords().destroy()}),this.resize_api&&this.resize_api.destroy(),this.remove_style_tags(),e&&this.$el.remove(),this},t.fn.gridster=function(e){return this.each(function(){var n=t(this);n.data("gridster")||n.data("gridster",new i(this,e))})},i}),Gws_Category_Navi.prototype.setBaseUrl=function(t){this.baseUrl=t},Gws_Category_Navi.prototype.render=function(t){if(0!=t.length){var e=this,i=[],n=i[0],r=-1,s=location.href.replace(/https?:\/\/.*?\//,"/"),o=null;$.each(t,function(t,a){var l=(a.name.match(/\//g)||[]).length,d=e.baseUrl.replace("ID",a._id);0!=l&&l==r||(i.push({depth:l,items:[]}),n=i[i.length-1]),s.startsWith(d)&&(o=a._id),n.items.push('<a class="link-item" href="'+d+'">'+a.trailing_name+"</a>"),r=l});var a=[];$.each(i,function(t,e){a.push('<div class="depth depth-'+e.depth+'">'),a.push(e.items.join('<span class="separator"></span>')),a.push("</div>")}),this.el.find(".dropdown-menu").append(a.join(""));var l=this.el.find(".dropdown-toggle");if(o){var d='<i class="material-icons md-18 md-dark">&#xE14C;</i>';l.after('<a class="ml-1" href="'+l.attr("href")+'">'+d+"</a>")}l.click(function(){return!1})}else this.el.hide()},Gws_Tab.renderTabs=function(t){var e=location.pathname+"/";$(t).find("a").each(function(){var t=$(this);e.match(new RegExp("^"+t.attr("href")+"(/|$)"))&&t.addClass("current")})},this.Gws_Popup=function(){function t(){}return t.init=null,t.render=function(t,e){var i;return this.init||(this.init=!0,$(window).resize(function(){return $(".gws-popup").remove()}),$(document).click(function(t){if(!$(t.target).closest(".gws-popup, .gws-popup-event").length)return $(".gws-popup").remove()})),$(".gws-popup").remove(),i=$("<div class='gws-popup'></div>").html($(e)),$("body").append(i),t.addClass("gws-popup-event"),this.renderPopup(t)},t.renderPopup=function(t){var e,i,n;return e=$(".gws-popup"),$(window).width()<1.5*e.outerWidth()&&e.css("max-width",$(window).width()/2),i=t.offset().left+t.outerWidth()/2-e.outerWidth()/2,n=t.offset().top-e.outerHeight()-20,i<0?(i=t.offset().left+t.outerWidth()/2-20,e.addClass("left")):e.removeClass("left"),i+e.outerWidth()>$(window).width()?(i=t.offset().left-e.outerWidth()+t.outerWidth()/2+20,e.addClass("right")):e.removeClass("right"),n<0?(n=t.offset().top+t.outerHeight(),e.addClass("top")):e.removeClass("top"),e.css({left:i,top:n}).animate({top:"+=10",opacity:1},50)},t}(),this.Gws_Member=function(){function t(){}return t.groups=null,t.users=null,t.render=function(){return $(".js-copy-groups").length<2&&($(".js-copy-groups").remove(),$(".js-paste-groups").remove()),$(".js-copy-groups").click(function(){return t.copyGroups($(this))}),$(".js-paste-groups").click(function(){return t.pasteGroups($(this))}),$(".js-copy-users").length<2&&($(".js-copy-users").remove(),$(".js-paste-users").remove()),$(".js-copy-users").click(function(){return t.copyUsers($(this))}),$(".js-paste-users").click(function(){return t.pasteUsers($(this))})},t.confirmReadableSetting=function(){return $(".save").on("click",function(){if(0===$(".gws-addon-readable-setting tbody tr").length)return confirm("\u95b2\u89a7\u8005\u304c\u5165\u529b\u3055\u308c\u3066\u3044\u307e\u305b\u3093\u3002\n\u5168\u54e1\u306b\u8868\u793a\u3055\u308c\u307e\u3059\u304c\u3088\u308d\u3057\u3044\u3067\u3059\u304b\uff1f")})},t.copyGroups=function(t){return this.groups=t.closest("dl").find("tbody tr").clone(!0),this.showLog(t,this.groups.length+"\u4ef6\u306e\u30b0\u30eb\u30fc\u30d7\u3092\u30b3\u30d4\u30fc\u3057\u307e\u3057\u305f\u3002"),!1},t.pasteGroups=function(t){var e;return e=this.pasteItems(t,this.groups),this.showLog(t,e+"\u4ef6\u306e\u30b0\u30eb\u30fc\u30d7\u3092\u8ffd\u52a0\u3057\u307e\u3057\u305f\u3002"),!1},t.copyUsers=function(t){return this.users=t.closest("dl").find("tbody tr").clone(!0),this.showLog(t,this.users.length+"\u4ef6\u306e\u30e6\u30fc\u30b6\u30fc\u3092\u30b3\u30d4\u30fc\u3057\u307e\u3057\u305f\u3002"),!1},t.pasteUsers=function(t){var e;return e=this.pasteItems(t,this.users),this.showLog(t,e+"\u4ef6\u306e\u30e6\u30fc\u30b6\u30fc\u3092\u8ffd\u52a0\u3057\u307e\u3057\u305f\u3002"),!1},t.pasteItems=function(t,e){var i,n,r,s;return e&&0!==e.length?((i=t.closest("dl")).find("table").show(),s=i.find("tbody"),n=i.find(".hidden-ids").attr("name"),r=0,e.each(function(){var t;if(0===s.find('tr[data-id="'+$(this).data("id")+'"]').length)return(t=$(this).clone(!0)).find("input").attr("name",n),s.append(t),r+=1}),r):0},t.showLog=function(t,e){return $(".gws-member-log").remove(),$("<span class='gws-member-log'>"+e+"</span>").appendTo(t.parent()).hide().fadeIn(200)},t}(),this.Gws_Reminder=function(){function t(){}return t.renderList=function(t){var e;return null==t&&(t={}),(e=$(t.el||document)).find(".list-item").each(function(){return $(this).find(".links").prepend('<a class="restore" href="#" style="display: none;">\u5143\u306b\u623b\u3059</a>')}),e.find(".list-item.deleted").each(function(){return $(this).find(".check, .meta, .delete, .updated, .more-btn").hide(),$(this).find(".dropdown-menu").removeClass("active"),$(this).find(".restore").show(),$(this).find(".notification").hide()}),e.find(".list-item .delete").click(function(){var e;return e=$(this).closest(".list-item"),$.ajax({url:t.url,method:"post",data:{_method:"delete",id:e.data("id"),item_id:e.data("item_id"),item_model:e.data("model"),item_name:e.data("name"),date:e.data("date")},success:function(){return e.toggleClass("gws-list-item--deleted").find(".check, .meta, .delete, .updated, .more-btn").hide(),e.find(".dropdown-menu").removeClass("active"),e.find(".restore").show(),e.find(".notification").hide(),!1},error:function(){return alert("Error")}}),!1}),e.find(".list-item .restore").click(function(){var e;return e=$(this).closest(".list-item"),$.ajax({url:t.restore_url,method:"post",data:{id:e.data("id"),item_id:e.data("item_id"),item_model:e.data("model"),item_name:e.data("name"),date:e.data("date")},success:function(){return e.toggleClass("gws-list-item--deleted").find(".check, .meta, .delete, .more-btn").show(),e.find(".restore").hide(),e.find(".notification")[0]&&(e.find(".notification")[0].selectedIndex=0),e.find(".notification").show(),!1},error:function(){return alert("Error")}}),!1})},t}(),Gws_Bookmark.prototype.render=function(t){null===t&&(t={});var e,i=this;this.bookmarkId=t.id,this.defaultName=t.default_name,this.url=t.url,this.model=t.model,e=this.bookmarkId?this.bookmarkIcon:this.unbookmarkIcon;var n=t.name||this.defaultName,r=$('<span class="bookmark-icon"></span>').append($('<i class="material-icons"></i>').html(e)),s=$('<ul class="dropdown-menu"></ul>'),o=$("<li></li>");o.append($('<input name="bookmark[name]" id="bookmark_name" class="bookmark-name" type="text">').val(n)),o.append($('<input name="button" type="button" class="btn update" />').val(t.save)),o.append($('<input name="button" type="button" class="btn delete" />').val(t["delete"])),s.append($('<li><div class="bookmark-notice"></div></li>')).append(o),this.el.html(r).append(s),this.el.click(function(t){if(i.loading)return!1;$(t.target).hasClass("update")?i.update():$(t.target).hasClass("delete")?i["delete"]():i.bookmarkId?(i.el.addClass("active"),i.el.find(".dropdown-menu").addClass("active")):i.create()})},Gws_Bookmark.prototype.create=function(){this.loading=!0;var t=this,e=this.el.find(".dropdown-menu").html();this.el.find(".dropdown-menu").html(SS.loading),$.ajax({url:this.url,method:"POST",data:{item:{name:this.defaultName,url:location.pathname+location.search,model:this.model}},success:function(i){t.el.find(".dropdown-menu").html(e),t.el.addClass("active"),t.el.find(".dropdown-menu").addClass("active"),t.el.find(".material-icons").html(t.bookmarkIcon),t.el.find(".bookmark-notice").text(i.notice),t.el.find(".bookmark-name").val(t.defaultName),t.bookmarkId=i.bookmark_id,t.loading=!1},error:function(){alert("Error")}})},Gws_Bookmark.prototype.update=function(){this.loading=!0;var t=this,e=this.el.find(".bookmark-name").val()||this.defaultName,i=this.url+"/"+this.bookmarkId,n=this.el.find(".dropdown-menu").html();this.el.find(".dropdown-menu").html(SS.loading),this.el.addClass("active"),this.el.find(".dropdown-menu").addClass("active"),$.ajax({url:i,method:"POST",data:{_method:"patch",item:{name:e,url:location.pathname+location.search,model:this.model}},success:function(i){
t.el.find(".dropdown-menu").html(n),t.el.removeClass("active"),t.el.find(".dropdown-menu").removeClass("active"),t.el.find(".material-icons").html(t.bookmarkIcon),t.el.find(".bookmark-notice").text(i.notice),t.el.find(".bookmark-name").val(e),t.bookmarkId=i.bookmark_id,t.loading=!1},error:function(){alert("Error")}})},Gws_Bookmark.prototype["delete"]=function(){var t=this;if(!this.bookmarkId)return!1;this.loading=!0;var e=this.url+"/"+this.bookmarkId,i=this.el.find(".dropdown-menu").html();this.el.find(".dropdown-menu").html(SS.loading),this.el.addClass("active"),this.el.find(".dropdown-menu").addClass("active"),$.ajax({url:e,method:"POST",data:{_method:"delete",item:{url:location.pathname+location.search}},success:function(){t.el.find(".dropdown-menu").html(i),t.el.removeClass("active"),t.el.find(".dropdown-menu").removeClass("active"),t.el.find(".material-icons").html(t.unbookmarkIcon),t.bookmarkId=null,t.loading=!1},error:function(){alert("Error")}})},this.Gws_EditLock=function(){function t(t,i,n){this.releaseLockOnCancel=e(this.releaseLockOnCancel,this),this.releaseLock=e(this.releaseLock,this),this.refreshLock=e(this.refreshLock,this),this.selector=t,this.lock_url=i,this.unlock_url=n,this.unloading=!1,this.interval=12e4,$.support.opacity?$(window).bind("beforeunload",this.releaseLock):($('button[type="reset"]').bind("click",this.releaseLockOnCancel),$("a.back-to-index").bind("click",this.releaseLockOnCancel),$("a.back-to-show").bind("click",this.releaseLockOnCancel)),this.refreshLock()}var e=function(t,e){return function(){return t.apply(e,arguments)}};return t.prototype.updateView=function(t){if($(this.selector+" .lock_until").text(""),t)return $(this.selector+" .lock_until").text(t)},t.prototype.refreshLock=function(){var t;if(!this.unloading)return $.ajax({type:"GET",url:this.lock_url,dataType:"json",cache:!1,statusCode:{200:(t=this,function(e){return e.lock_until_pretty?t.updateView(e.lock_until_pretty):t.updateView(null)})}}),setTimeout(this.refreshLock,this.interval)},t.prototype.releaseLock=function(){this.unloading=!0,$.ajax({type:"POST",url:this.unlock_url,dataType:"json",data:{_method:"delete"},timeout:5e3})},t.prototype.releaseLockOnCancel=function(){return this.releaseLock(),!0},t}(),Gws_ReadableSetting.prototype.render=function(){var t=this;this.el.find(".buttons input").change(function(){"select"==$(this).val()?t.showSelectForm():t.hideSelectForm()}),"select"==this.el.find(".buttons input:checked").val()?this.el.find(".gws-addon-readable-setting-select").show():this.el.find(".gws-addon-readable-setting-select").hide()},Gws_ReadableSetting.prototype.showSelectForm=function(){this.el.find(".gws-addon-readable-setting-select").slideDown("fast")},Gws_ReadableSetting.prototype.hideSelectForm=function(){this.el.find(".gws-addon-readable-setting-select").slideUp("fast")},Gws_Contrast.getContrastId=function(t){return Cookies.get("gws-contrast-"+t)},Gws_Contrast.setContrastId=function(t,e){Cookies.set("gws-contrast-"+t,e,{expires:7,path:"/"})},Gws_Contrast.removeContrastId=function(t){Cookies.remove("gws-contrast-"+t)},Gws_Contrast.prototype.render=function(){var t=this;this.$el.data("load",function(){t.loadContrasts()}),this.$el.on("click",".gws-contrast-item",function(e){var i=$(this),n=i.data("id");"default"===n?(t.removeContrast(i.data("text-color"),i.data("color")),Gws_Contrast.removeContrastId(t.opts.siteId)):(t.changeContrast(i.data("text-color"),i.data("color")),Gws_Contrast.setContrastId(t.opts.siteId,n)),SS.notice(t.opts.notice.replace(":name",i.text())),e.stopPropagation()})},Gws_Contrast.prototype.loadContrasts=function(){if(this.$el.data("loadedAt"))this.checkActiveContrast();else{var t=this;$.ajax({url:this.opts.url,type:"GET",dataType:"json",success:function(e){t.renderContrasts(e)},error:function(){t.showMessage(this.opts.loadError)},complete:function(e){t.completeLoading(e)}})}},Gws_Contrast.prototype.completeLoading=function(){this.$el.data("loadedAt",Date.now()),this.$el.find(".gws-contrast-loading").closest("li").hide()},Gws_Contrast.prototype.showMessage=function(t){this.$el.append($("<li/>").html('<div class="gws-contrast-error">'+t+"</div>"))},Gws_Contrast.prototype.renderContrasts=function(t){if(0!==t.length){this.renderContrast("default",this.opts.defaultContrast);var e=this;$.each(t,function(){e.renderContrast(this._id.$oid,this.name,this.color,this.text_color)}),this.checkActiveContrast()}else this.showMessage(this.opts.noContrasts)},Gws_Contrast.prototype.renderContrast=function(t,e,i,n){var r={id:t};i&&(r.color=i),n&&(r.textColor=n);var s=$("<input/>",{type:"radio",name:"gws-contrast-item",value:t}),o=$("<label/>",{"class":"gws-contrast-item",data:r});o.append(s),o.append('<span class="gws-contrast-name">'+e+"</span>"),this.$el.append($("<li/>").append(o))},Gws_Contrast.prototype.checkActiveContrast=function(){var t=Gws_Contrast.getContrastId(this.opts.siteId);t?$('input[name="gws-contrast-item"]').val([t]):$('input[name="gws-contrast-item"]').val(["default"])},Gws_Contrast.prototype.changeContrast=function(t,e){this.$style||(this.$style=$("<style/>",{type:"text/css"}),$("head").append(this.$style)),this.$style.html(this.template.replace(/:color/g,t).replace(/:background/g,e))},Gws_Contrast.prototype.removeContrast=function(){this.$style&&this.$style.html("")},this.Gws_Schedule_View=function(){function t(){}return t.getCalendar=function(){var t;return 0===(t=$("#calendar-controller")).length&&(t=$("#calendar")),t.fullCalendar("getView").calendar?t:null},t.getCalendarDate=function(){var e;return(e=t.getCalendar())?e.fullCalendar("getDate").format("YYYY-MM-DD"):null},t.renderTabs=function(e){return $(e).find("a").click(function(){var e,i;return!(e=t.getCalendarDate())||(i=(i=$(this).attr("href")).replace(/(\?.*)?$/,"?calendar[date]="+e),$(this).attr("href",i),!0)})},t.renderSideCalendars=function(e){return $(e).find(".fc-toolbar h2").click(function(){var e,i;return i="gws-schedule-tool-calendars",e=t.getCalendarDate(),e=$.fullCalendar.moment(e),$("."+i).is(":hidden")&&$("."+i).remove(),0===$("."+i).length&&t.crenderSideCalendars(i,e),$("."+i).animate({width:"toggle"},"fast")})},t.crenderSideCalendars=function(t,e){var i,n,r;for(i="<div class='"+t+"'><div class='xdsoft_datetimepicker controller'><button type='button' class='xdsoft_prev' /><button type='button' class='xdsoft_next' /></div></div>",$("#menu").before(i),n=r=0;r<=3;n=++r)n>0&&e.add(1,"months"),$("."+t).append("<div class='"+t+"-cal"+n+"'></div>"),$("."+t+"-cal"+n).datetimepicker({timepicker:!1,format:"Y/m/d",closeOnDateSelect:!0,scrollInput:!1,scrollMonth:!1,inline:!0,defaultDate:e.format("YYYY-MM-DD"),defaultSelect:!1,todayButton:!1,onGenerate:function(){return $(this).find(".xdsoft_today").removeClass("xdsoft_today"),$(this).find(".xdsoft_current").removeClass("xdsoft_current")},onSelectDate:function(t){return e=sprintf("%d-%02d-%02d",t.getFullYear(),t.getMonth()+1,t.getDate()),$(".calendar").fullCalendar("gotoDate",e)}});return $("."+t).find(".xdsoft_month, .xdsoft_year").unbind("mousedown").find("i").remove(),$("."+t+" .xdsoft_datetimepicker").not(".controller.controller").find(".xdsoft_prev, .xdsoft_next").hide(),$("."+t+" .controller .xdsoft_prev").mousedown(function(){var e,i;for(i=[],n=e=1;e<=4;n=++e)i.push($("."+t+" .xdsoft_prev").not(this).mousedown().mouseup());return i}),$("."+t+" .controller .xdsoft_next").mousedown(function(){var e,i;for(i=[],n=e=1;e<=4;n=++e)i.push($("."+t+" .xdsoft_next").not(this).mousedown().mouseup());return i})},t}(),this.Gws_Schedule_Calendar=function(){function t(){}return t.messages={noPlan:"\u4e88\u5b9a\u306f\u3042\u308a\u307e\u305b\u3093"},t.render=function(t,e,i){var n;return null==e&&(e={}),null==i&&(i={}),n=this.defaultParams(t,e),e.restUrl&&$.extend(!0,n,this.editableParams(e)),e.restUrl&&$.extend(!0,n,this.tapMenuParams(e)),$.extend(!0,n,e),$(t).fullCalendar(n),this.renderInitialize(t,i),this.overrideAddLink(t)},t.renderInitialize=function(t,e){return null==e&&(e={}),e.viewTodo||(e.viewTodo="active"),e.view&&$(t).fullCalendar("changeView",e.view),e.date&&$(t).fullCalendar("gotoDate",e.date),"list"===e.viewFormat&&($.fullCalendar.toggleListFormat(t),$(t).find(".fc-withListView-button").addClass("fc-state-active")),"active"===e.viewTodo&&$(t).find(".fc-withTodo-button").addClass("fc-state-active"),"active"===e.viewAttendance&&$(t).find(".fc-withAbsence-button").addClass("fc-state-active"),Gws_Schedule_View.renderSideCalendars(t),$(t+"-header .calendar-text").each(function(){var t,e;return e=$(this),t=$(this).find(".calendar-text-popup").prop("outerHTML"),e.find(".calendar-text-link").click(function(){return Gws_Popup.render($(this),$(t).show()),!1})})},t.defaultParams=function(e){return{buttonText:{listMonth:"\u30ea\u30b9\u30c8"},columnFormat:{month:"ddd",week:"M/D [(]ddd[)]",day:"M/D [(]ddd[)]"},customButtons:{withTodo:{text:"ToDo\u8868\u793a",click:function(){return $(".fc-event-todo").toggle(!$(this).hasClass("fc-state-active")),$(this).toggleClass("fc-state-active"),t.updateNoPlanVisibility($(this).closest(".fc"))}},withAbsence:{text:"\u6b20\u5e2d\u8868\u793a",click:function(){return $(".fc-event-user-attendance-absence").toggle(!$(this).hasClass("fc-state-active")),$(this).toggleClass("fc-state-active"),t.updateNoPlanVisibility($(this).closest(".fc"))}},withListView:{text:"\u30ea\u30b9\u30c8",click:function(){return $.fullCalendar.toggleListFormat(e),$(e).fullCalendar("refetchEvents"),$(window).trigger("resize"),$(this).toggleClass("fc-state-active")}}},contentHeight:"auto",displayEventEnd:{basicWeek:!0},endParam:"s[end]",fixedWeekCount:!1,slotEventOverlap:!1,header:{left:"today prev next title",right:"withAbsence withTodo month,basicWeek,agendaDay withListView"},lang:"ja",nextDayThreshold:"00:00:00",schedulerLicenseKey:"CC-Attribution-NonCommercial-NoDerivatives",slotLabelFormat:"HH:mm",startParam:"s[start]",timeFormat:"HH:mm",titleFormat:{month:"YYYY\u5e74 M\u6708",week:"(YYYY\u5e74 M\u6708 D\u65e5\uff08ddd\uff09)",day:"YYYY\u5e74 M\u6708 D\u65e5\uff08ddd\uff09"},loading:function(t){return t?$(e).hasClass("fc-list-format")?$(this).find(".fc-view").prepend('<span class="fc-loading">\u8aad\u307f\u8fbc\u307f\u4e2d</span>'):$(this).find(".fc-widget-content").eq(0).prepend('<span class="fc-loading">\u8aad\u307f\u8fbc\u307f\u4e2d</span>'):$(this).find(".fc-loading").remove()},eventAfterAllRender:function(e){var i,n;return(n=$(".fc .fc-withTodo-button")).length&&(n.hasClass("fc-state-active")?$(".fc .fc-event-todo").show():$(".fc .fc-event-todo").hide()),(i=$(".fc .fc-withAbsence-button")).length&&(i.hasClass("fc-state-active")?$(".fc .fc-event-user-attendance-absence").show():$(".fc .fc-event-user-attendance-absence").hide()),t.updateNoPlanVisibility(e.el.closest(".fc")),t.changePrintPreviewPortrait(e)}}},t.viewStateQuery=function(t){var e,i,n;return i=t.el.closest(".fc").hasClass("fc-list-format")?"list":"default",n=$(".fc .fc-withTodo-button").hasClass("fc-state-active")?"active":"inactive",e=$(".fc .fc-withAbsence-button").hasClass("fc-state-active")?"active":"inactive","calendar[path]="+location.pathname+"&calendar[view]="+t.name+"&calendar[viewFormat]="+i+"&calendar[viewTodo]="+n+"&calendar[viewAttendance]="+e},t.tapMenuParams=function(e){var i;return i=e.restUrl,{dayClick:function(n,r,s){var o,a,l,d;if(o="",e.tapMenu&&(a=new Date,l=n.format()+"T"+a.getHours()+":00:00",d="calendar[date]="+n.format()+"&"+t.viewStateQuery(s),o="<a href='"+i+"/new?start="+l+"&"+d+"' class='add-plan'>\u4e88\u5b9a\u3092\u4f5c\u6210</a>",o+="<a href='"+i.replace(/schedule\/.*/,"schedule/todo/readables")+"/new?start="+l+"&"+d+"' class='add-plan'>ToDo\u3092\u4f5c\u6210</a>"),0===$("#calendar-controller").length&&("month"!==s.name&&(o+='<a href="" data-view="month">\u6708\u8868\u793a</a>'),"basicWeek"!==s.name&&(o+='<a href="" data-view="basicWeek">\u9031\u8868\u793a</a>'),"agendaDay"!==s.name&&(o+='<a href="" data-view="agendaDay">\u65e5\u8868\u793a</a>')),o)return $("body").append('<div class="tap-menu">'+o+"</div>"),r.pageX+$(".tap-menu").width()>$(window).width()?$(".tap-menu").css("top",r.pageY-5).css("right",5).show():$(".tap-menu").css("top",r.pageY-5).css("left",r.pageX-5).show(),$(".tap-menu a").click(function(){var t;if($(this).data("view"))return(t=s.calendar.getCalendar()).changeView($(this).data("view")),t.gotoDate(n),$(".tap-menu").remove(),!1}),$(".tap-menu").mouseleave(function(){return $(".tap-menu").remove()})}}},t.editableParams=function(e){var i;return i=e.restUrl,{editable:!0,eventClick:function(e,n,r){var s,o,a;if(!e.noPopup)return a=$(this),Gws_Popup.render(a,"<div class='fc-popup'><span class='fc-loading'>\u8aad\u307f\u8fbc\u307f\u4e2d</span></div>"),s=e.restUrl?e.restUrl:i,o="calendar[date]="+e.start.format("YYYY-MM-DD")+"&"+t.viewStateQuery(r),$.ajax({url:s+"/"+e.id+"/popup",success:function(t){return $(".fc-popup").html(t),$(".fc-popup").find("a").each(function(){return $(this).attr("href",$(this).attr("href")+"?"+o)}),Gws_Popup.renderPopup(a)}})},eventDrop:function(t,e,n,r,s,o){var a,l;return l=null,t.end&&(l=t.end.format()),a=t.restUrl?t.restUrl:i,$.ajax({type:"PUT",url:a+"/"+t.id+".json",data:{item:{api:"drop",api_start:t.start.format(),api_end:l}},success:function(){var t;return t=o.el.closest(".calendar").attr("id"),$(".calendar.multiple").not("#"+t).fullCalendar("refetchEvents")},error:function(t){return alert(t.responseJSON.join("\n")),n()}})},eventResize:function(t,e,n){return $.ajax({type:"PUT",url:i+"/"+t.id+".json",data:{item:{api:"resize",api_start:t.start.format(),api_end:t.end.format()}},success:function(){var t;return t=view.el.closest(".calendar").attr("id"),$(".calendar.multiple").not("#"+t).fullCalendar("refetchEvents")},error:function(t){return alert(t.responseJSON.join("\n")),n()}})}}},t.changePrintPreviewPortrait=function(t){if($("body").hasClass("print-preview"))return"agendaDay"===t.type||"listMonth"===t.type||t.el.closest(".fc").hasClass("fc-list-format")?($("body").removeClass("horizontal"),$("body").addClass("vertical")):($("body").removeClass("vertical"),$("body").addClass("horizontal"))},t.overrideAddLink=function(e){return $(".add-plan").click(function(){var i,n,r,s;return r=new Date,i=$(e).fullCalendar("getDate"),s=$(e).fullCalendar("getView"),n=$(this).attr("href").replace(/\?.*/,""),s.start.isBefore(r)&&s.end.isAfter(r)||(n=n+"?start="+(i.format("YYYY-MM-DD")+"T"+r.getHours()+":00:00")+"&"+("calendar[date]="+i.format()+"&"+t.viewStateQuery(s))),$(this).attr("href",n)})},t.updateNoPlanVisibility=function(t){var e;if(0!==(e=$(t).find(".fc-listMonth-view-container .no-plan")).length)return 0===$(".fc-event:visible").length?e.show():e.hide()},t}();var FC=$.fullCalendar,View=FC.View;BasicHourView=FC.views.basicHour=FC.BasicView.extend({renderEvents:function(t){for(i in this.dayGrid.renderEvents(t),head='<tr><td class="fc-head-container fc-widget-header">',head+='<div class="fc-row fc-widget-header">',head+="<table><thead><tr>",[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23])head+='<th class="fc-day-header fc-widget-header fc-hour-'+i+'">'+i+"</th>";head+="</tr></thead></table>",head+="</div>",head+="</td></tr>",this.el.find(".fc-head").html(head)}}),BasicHourView.eventRender=function(t,e,i){var n=BasicHourView.eventLeftPosition(t,i),r=BasicHourView.eventRightPosition(t,i)-n;r<1&&(r=1),e.find(".fc-time").remove(),e.css({position:"absolute",top:"2px",width:r.toString()+"%","margin-left":n+"%"})},BasicHourView.eventLeftPosition=function(t,e){if(nums=BasicHourView.datesToNum(t.start,e.start),nums[0]<nums[1])return 0;var i=new Date(t.start._i);return.0694*(60*i.getHours()+i.getMinutes())},BasicHourView.eventRightPosition=function(t,e){if(!t.end)return 1;if(nums=BasicHourView.datesToNum(t.end,e.end),nums[0]==nums[1])return 99.5;var i=new Date(t.end._i);return.0694*(60*i.getHours()+i.getMinutes())},BasicHourView.datesToNum=function(t,e){return num1=1e4*t.year()+100*(t.month()+1)+t.date(),num2=1e4*e.year()+100*(e.month()+1)+e.date(),[num1,num2]},function(){var t=$.fullCalendar,e=(t.View,!1),i=function(){var t=$(".fc-listMonth-view .fc-listMonth-view-container")[0];return t?$(t):t=$('<div class="fc-listMonth-view-container"></div>').appendTo(".fc-listMonth-view")},n=function(t){return t.html(""),t},r=function(){var t=$(".fc-listMonth-view .no-plan");0==$(".fc-event:visible").length?t.show():t.hide()},s=t.ListMonthView=t.BasicView.extend({renderEvents:function(t){var s=this.calendar,o=n(i()),a=$('<div class="fc-listMonth-view-table"></div>'),l=$('<div class="td no-plan" style="display: none;">'+Gws_Schedule_Calendar.messages.noPlan+"</div>");for(var d in $('<div class="tr"></div>').appendTo(a).append(l),t){var h=t[d];if(-1===h.className.indexOf("fc-holiday")){var c=$('<span class="fc-content"></span>').text(h.title),u=$('<a class="fc-event fc-event-point"></a>').append(c);u.addClass(h.className.join(" ")),u.css({color:h.textColor,"background-color":h.backgroundColor}),u.bind("click",function(e){var i=$(this).data("eventNo");return s.view.trigger("eventClick",$(this),t[i],e)}).data("eventNo",d);var p=$('<div class="td info"></div>').append(u);h.sanitizedHtml&&p.append('<p class="summary">'+h.sanitizedHtml+"</p>");var f=$('<div class="td date"></div>').text(h.startDateLabel),g=$('<div class="td time"></div>').text(h.startTimeLabel);h.allDay&&g.text(h.allDayLabel),0;var m=$('<div class="tr"></div>').appendTo(a).append(f).append(g).append(p);-1!==h.className.indexOf("fc-event-todo")&&m.addClass("fc-event-todo"),-1!==h.className.indexOf("fc-event-user-attendance-absence")&&(m.addClass("fc-event-user-attendance-absence"),m.css("display","none"))}}a.appendTo(o),r(),e||(e=!0,$(".fc-withTodo-button").on("click",function(){var t=$("#calendar").fullCalendar("getView").name;t||(t=$("#calendar-controller").fullCalendar("getView").name),"listMonth"===t&&setTimeout(r,0)}))}});t.views.listMonth={"class":s,duration:{months:1},defaults:{fixedWeekCount:!1}}}(),function(){var t=$.fullCalendar,e=function(e){if(!e.title)return"";var i='<div class="fc-title">'+t.htmlEscape("["+e.title+"]");return e.sanitizedHtml?i+" "+t.htmlEscape(e.sanitizedHtml)+"</div>":i+"</div>"},i=t.TimeGrid.extend({fgSegHtml:function(i,n){var r,s,o,a=this.view,l=i.event,d=a.isEventDraggable(l),h=!n&&i.isStart&&a.isEventResizableFromStart(l),c=!n&&i.isEnd&&a.isEventResizableFromEnd(l),u=this.getSegClasses(i,d,h||c),p=t.cssToStr(this.getSegSkinCss(i));return u.unshift("fc-time-grid-event","fc-v-event"),a.isMultiDayEvent(l)?(i.isStart||i.isEnd)&&(r=this.getEventTimeText(i),s=this.getEventTimeText(i,"LT"),o=this.getEventTimeText(i,null,!1)):(r=this.getEventTimeText(l),s=this.getEventTimeText(l,"LT"),o=this.getEventTimeText(l,null,!1)),'<a class="'+u.join(" ")+'"'+(l.url?' href="'+t.htmlEscape(l.url)+'"':"")+(p?' style="'+p+'"':"")+'><div class="fc-content">'+(r?'<div class="fc-time" data-start="'+t.htmlEscape(o)+'" data-full="'+t.htmlEscape(s)+'"><span>'+t.htmlEscape(r)+"</span></div>":"")+e(l)+'</div><div class="fc-bg"/>'+(c?'<div class="fc-resizer fc-end-resizer" />':"")+"</a>"}});t.AgendaView.extend({timeGridClass:i})}();var fullCalendar_renderListEvents=function(t){var e=function(){var t=$(".fc-view .fc-listMonth-view-container")[0];return t?$(t):t=$('<div class="fc-listMonth-view-container"></div>').appendTo(".fc-view")},i=function(t){return t.html(""),t},n=function(){var t=$(".fc-listMonth-view-container .no-plan");0==$(".fc-event:visible").length?t.show():t.hide()},r=this.calendar,s=i(e()),o=$('<div class="fc-listMonth-view-table"></div>'),a=$('<div class="td no-plan" style="display: none;">'+Gws_Schedule_Calendar.messages.noPlan+"</div>");$('<div class="tr"></div>').appendTo(o).append(a);for(var l=0;l<t.length;l++){var d=t[l].event;if(-1===d.className.indexOf("fc-holiday")){var h=$('<span class="fc-content"></span>').text(d.title),c=$('<a class="fc-event fc-event-point"></a>').append(h);c.addClass(d.className.join(" ")),c.css({color:d.textColor,"background-color":d.backgroundColor}),c.bind("click",function(e){var i=$(this).data("eventNo");return r.view.trigger("eventClick",$(this),t[i].event,e)}).data("eventNo",l);var u=$('<div class="td info"></div>').append(c);if(d.sanitizedHtml&&u.append('<p class="summary">'+d.sanitizedHtml+"</p>"),d.allDay)var p=d.startDateLabel+" "+d.allDayLabel,f=d.endDateLabel+" "+d.allDayLabel;else p=d.startDateLabel+" "+d.startTimeLabel,f=d.endDateLabel+" "+d.endTimeLabel;var g=$('<div class="td startAt"></div>').text(p),m=$('<div class="td delimiter"></div>').text("-"),_=$('<div class="td endAt"></div>').text(f),v=$('<div class="tr"></div>').appendTo(o).append(g).append(m).append(_).append(u);0,-1!==d.className.indexOf("fc-event-todo")&&v.addClass("fc-event-todo"),-1!==d.className.indexOf("fc-event-user-attendance-absence")&&(v.addClass("fc-event-user-attendance-absence"),v.css("display","none"))}}o.appendTo(s),n()};$.fullCalendar.toggleListFormat=function(t){$(t).hasClass("fc-list-format")?($(t).find(".fc-view").children().show(),$(t).find(".fc-listMonth-view-container").hide(),$(t).removeClass("fc-list-format")):($(t).find(".fc-view").children().hide(),$(t).find(".fc-listMonth-view-container").show(),$(t).addClass("fc-list-format"))},$.fullCalendar.BasicView.prototype.renderListEvents=fullCalendar_renderListEvents,$.fullCalendar.BasicView.prototype.renderEvents_=$.fullCalendar.BasicView.prototype.renderEvents,$.fullCalendar.BasicView.prototype.renderEvents=function(t){this.renderEvents_(t),this.el.closest(".fc").hasClass("fc-list-format")&&(segs=this.dayGrid.segs,this.renderListEvents(segs))},$.fullCalendar.BasicView.prototype.renderSkeletonHtml_=$.fullCalendar.BasicView.prototype.renderSkeletonHtml,$.fullCalendar.BasicView.prototype.renderSkeletonHtml=function(){var t=this.renderSkeletonHtml_();return this.el.closest(".fc").hasClass("fc-list-format")&&(t=$(t).hide()[0]),t},$.fullCalendar.AgendaView.prototype.renderListEvents=fullCalendar_renderListEvents,$.fullCalendar.AgendaView.prototype.renderEvents_=$.fullCalendar.AgendaView.prototype.renderEvents,$.fullCalendar.AgendaView.prototype.renderEvents=function(t){this.renderEvents_(t),this.el.closest(".fc").hasClass("fc-list-format")&&(segs=this.timeGrid.segs.concat(this.dayGrid.segs),this.renderListEvents(segs))},$.fullCalendar.AgendaView.prototype.renderSkeletonHtml_=$.fullCalendar.AgendaView.prototype.renderSkeletonHtml,$.fullCalendar.AgendaView.prototype.renderSkeletonHtml=function(){var t=this.renderSkeletonHtml_();return this.el.closest(".fc").hasClass("fc-list-format")&&(t=$(t).hide()[0]),t},Gws_Schedule_CalendarTransition.prototype.renderLinks=function(t){var e=this;$(t).each(function(){if(!$(this).hasClass("no-calendar-state")){var t=$(this).attr("href");t.indexOf("?")>=0?t+="&"+e.state:t+="?"+e.state,$(this).attr("href",t)}})},this.Gws_Schedule_Multiple_Calendar=function(){function t(){}return t.render=function(t,e,i){var n;return null==e&&(e={}),null==i&&(i={}),n=Gws_Schedule_Calendar.defaultParams(e),e.restUrl&&$.extend(!0,n,Gws_Schedule_Calendar.editableParams(e)),e.restUrl&&$.extend(!0,n,Gws_Schedule_Calendar.tapMenuParams(e)),$.extend(!0,n,this.defaultParams(e)),$.extend(!0,n,this.contentParams(e)),$.extend(!0,n,e),$(t).fullCalendar(n),Gws_Schedule_Calendar.renderInitialize(t,i),$(document).click(function(t){return $(".fc-event").not($(t.target).closest(".fc-event")).find(".fc-popup").remove()})},t.defaultParams=function(){return{defaultView:"basicWeek",header:{left:"today prev next title",right:"withAbsence withTodo basicWeek,timelineDay"},slotDuration:"01:00",slotLabelFormat:"H",views:{basicHour:{type:"day",buttonText:"\u65e5",contentHeight:25},timelineDay:{contentHeight:25,minTime:"08:00",maxTime:"22:00"}}}},t.controllerParams=function(){return{header:{left:"today prev next title",right:"withAbsence withTodo basicWeek,timelineDay"},eventSources:[],eventAfterAllRender:function(t){if("basicWeek"===t.name)return t.el.find(".fc-body").hide()}}},t.contentParams=function(){return{eventRender:function(t,e,i){if("basicHour"===i.name)return BasicHourView.eventRender(t,e,i)},eventAfterAllRender:function(){}}},t.renderController=function(t,e,i){var n,r;return null==e&&(e={}),null==i&&(i={}),r=Gws_Schedule_Calendar.defaultParams(e),$.extend(!0,r,this.defaultParams(e)),$.extend(!0,r,this.controllerParams(e)),$.extend(!0,r,e),$(t).fullCalendar(r),Gws_Schedule_Calendar.renderInitialize(t,i),Gws_Schedule_Calendar.overrideAddLink(t),(n=$(t)).find(".fc-today-button").click(function(){return $(".calendar.multiple .fc-today-button").click()}),n.find(".fc-prev-button").click(function(){return $(".calendar.multiple .fc-prev-button").click()}),n.find(".fc-next-button").click(function(){return $(".calendar.multiple .fc-next-button").click()}),n.find(".fc-basicWeek-button").click(function(){return $(".calendar.multiple .fc-basicWeek-button").click()}),n.find(".fc-timelineDay-button").click(function(){return $(".calendar.multiple .fc-timelineDay-button").click()}),n.find(".fc-basicHour-button").click(function(){return $(".calendar.multiple .fc-basicHour-button").click()})},t}(),this.Gws_Schedule_Plan=function(){function t(){}return t.diffOn=36e5,t.renderForm=function(t){return null==t&&(t={}),$("input.date").datetimepicker({lang:"ja",timepicker:!1,format:"Y/m/d",closeOnDateSelect:!0,scrollInput:!1,maxDate:t.maxDate}),$("input.datetime").datetimepicker({lang:"ja",roundTime:"ceil",step:30,maxDate:t.maxDate}),this.relateDateForm(),this.relateDateTimeForm()},t.renderAlldayForm=function(){return this.changeDateForm(),$("#item_allday").change(function(){return t.changeDateValue(),t.changeDateForm()})},t.changeDateValue=function(){var t,e;return $("#item_allday").prop("checked")?($("#item_start_on").val($("#item_start_at").val().replace(/ .*/,"")),$("#item_end_on").val($("#item_end_at").val().replace(/ .*/,""))):(e=$("#item_start_at").val().replace(/.* /,""),t=$("#item_end_at").val().replace(/.* /,""),""===e&&""!==$("#item_start_on").val()&&(e="00:00"),""===t&&""!==$("#item_end_on").val()&&(t="00:00"),$("#item_start_at").val($("#item_start_on").val()+" "+e),$("#item_end_at").val($("#item_end_on").val()+" "+t))},t.changeDateForm=function(){return $("#item_allday").prop("checked")?($(".dates-field").show(),$(".datetimes-field").hide()):($(".dates-field").hide(),$(".datetimes-field").show())},t.relateDateForm=function(e,i){if(null==e&&(e=".date.start"),null==i&&(i=".date.end"),$(e+", "+i).click(function(){return t.diffOn=t.diffDates($(e).val(),$(i).val())}),$(e).change(function(){var n,r,s;if((s=$(e).val())&&(s=new Date(s).getTime(),!isNaN(s)))return(n=new Date).setTime(s+t.diffOn),r="%d/%02d/%02d",$(e).hasClass("datetime")&&(r="%d/%02d/%02d %02d:%02d"),$(i).val(sprintf(r,n.getFullYear(),n.getMonth()+1,n.getDate(),n.getHours(),n.getMinutes()))}),""===$(i).val())return $(e).change()},t.relateDateTimeForm=function(){return this.relateDateForm(".datetime.start",".datetime.end")},t.diffDates=function(t,e){var i;return t&&e?(i=new Date(e).getTime()-new Date(t).getTime())<0?0:i:36e5},t.transferEnd2Start=function(){return $("#item_allday").prop("checked")?$("#item_start_on").val($("#item_end_on").val()):$("#item_start_at").val($("#item_end_at").val())},t}(),this.Gws_Schedule_Repeat_Plan=function(){function t(){}return t.renderForm=function(){return this.changeRepeatForm(),this.relateDateForm(),$("#item_repeat_type").change(function(){return t.changeRepeatForm()})},t.changeRepeatForm=function(){var t;return""===(t=$("#item_repeat_type").val())?$(".gws-schedule-repeat").hide():($(".gws-schedule-repeat").show(),$(".repeat-daily, .repeat-weekly, .repeat-monthly").hide(),$(".repeat-"+t).show())},t.relateDateForm=function(){return Gws_Schedule_Plan.relateDateForm(".date.repeat_start",".date.repeat_end")},t.renderSubmitButtons=function(){var t,e,i,n,r,s;return r=$("#main form"),s='<span class="gws-schedule-btn-space"></span>',t=$('<input type="button" class="btn" value="\u4eca\u56de\u306e\u307f" />'),e=$('<input type="button" class="btn" value="\u4ee5\u964d\u3059\u3079\u3066" />'),i=$('<input type="button" class="btn" value="\u4e00\u9023\u306e\u30b9\u30b1\u30b8\u30e5\u30fc\u30eb\u3059\u3079\u3066" />'),t.bind("click",function(){return r.append('<input type="hidden" name="item[edit_range]" value="one" />').submit()}),e.bind("click",function(){return r.append('<input type="hidden" name="item[edit_range]" value="later" />').submit()}),i.bind("click",function(){return r.append('<input type="hidden" name="item[edit_range]" value="all" />').submit()}),(n=$('<div class="gws-schedule-repeat-submit"></div>')).append(t).append(s).append(e).append(s).append(i),$(".send .save, .send .delete").click(function(){if(""!==$("#item_repeat_type").val())return $.colorbox({inline:!0,href:n}),!1})},t}(),this.Gws_Memo_Message=function(){function t(){}return t.render=function(){$(".list-head .search").on("click",function(){$(".gws-memo-search").animate({height:"toggle"},"fast")}),$(".gws-memo-search .reset").on("click",function(){$(".gws-memo-search input[type=text]").val(""),$(".gws-memo-search .search").click()}),$(".cc-bcc-label").click(function(){return $(".gws-addon-memo-member .cc-bcc").animate({height:"toggle"},"fast"),!1}),$(".add-template").change(function(){""!==$(this).val()&&("html"===$("#item_format").val()?CKEDITOR.instances.item_html.insertText($(this).val()):Webmail_Mail_Form.insertText($("#item_text"),$(this).val()),$(this).val(""))}),$(".send-mdn,.ignore-mdn").on("click",function(){if($(this).hasClass("disabled"))return!1;$.ajax({url:$(this).attr("href"),method:"POST",dataType:"json",data:{_method:"put",authenticity_token:$('meta[name="csrf-token"]').attr("content")},beforeSend:function(){return $(".send-mdn,.ignore-mdn").addClass("disabled")},success:function(t){return SS.notice(t.notice),$(".request-mdn-notice").remove()}})})},t.buildForm=function(t,e){var i=$(".list-item input:checkbox:checked").map(function(){return $(this).val()});if(0===i.length)return!1;var n,r,s=$('meta[name="csrf-token"]').attr("content"),o=$("<form/>",{action:t,method:"post",data:{confirm:e}});for(o.append($("<input/>",{name:"authenticity_token",value:s,type:"hidden"})),n=0,r=i.length;n<r;n++){var a=i[n];o.append($("<input/>",{name:"ids[]",value:a,type:"hidden"}))}return o},t}(),Gws_Memo_Folder.render=function(){return $("#addon-gws-agents-addons-group_permission").hide()},Gws_Memo_Filter.render=function(){return $("#addon-gws-agents-addons-group_permission").hide()},this.Gws_Monitor_Topic=function(){function t(){}return t.render=function(){return $(".public").on("click",function(){var t,e,i,n,r;return r=$('meta[name="csrf-token"]').attr("content"),e=(t=$(this)).data("ss-action"),i=t.data("ss-confirm"),(n=$("<form/>",{action:e,method:"post",data:{confirm:i}})).append($("<input/>",{name:"authenticity_token",value:r,type:"hidden"})),n.appendTo(document.body).submit()}),$(".preparation").on("click",function(){var t,e,i,n,r;return r=$('meta[name="csrf-token"]').attr("content"),e=(t=$(this)).data("ss-action"),i=t.data("ss-confirm"),(n=$("<form/>",{action:e,method:"post",data:{confirm:i}})).append($("<input/>",{name:"authenticity_token",value:r,type:"hidden"})),n.appendTo(document.body).submit()}),$(".question_not_applicable").on("click",function(){var t,e,i;return i=$('meta[name="csrf-token"]').attr("content"),e=$("#item_id").val(),(t=$("<form/>",{action:e+"/question_not_applicable",method:"post",data:{confirm:"\u8a72\u5f53\u306a\u3057\u306b\u3057\u307e\u3059\u304b\uff1f"}})).append($("<input/>",{name:"authenticity_token",value:i,type:"hidden"})),t.appendTo(document.body).submit()}),$(".answered").on("click",function(){var t,e,i;return i=$('meta[name="csrf-token"]').attr("content"),e=$("#item_id").val(),(t=$("<form/>",{action:e+"/answered",method:"post",data:{confirm:"\u56de\u7b54\u6e08\u307f\u306b\u3057\u307e\u3059\u304b\uff1f"}})).append($("<input/>",{name:"authenticity_token",value:i,type:"hidden"})),t.appendTo(document.body).submit()})},t.buildForm=function(t,e){var i,n,r,s,o,a;if(0===(i=$(".list-item input:checkbox:checked").map(function(){return $(this).val()})).length)return!1;for(a=$('meta[name="csrf-token"]').attr("content"),(n=$("<form/>",{action:t,method:"post",data:{confirm:e}})).append($("<input/>",{name:"authenticity_token",value:a,type:"hidden"})),r=0,o=i.length;r<o;r++)s=i[r],n.append($("<input/>",{name:"ids[]",value:s,type:"hidden"}));return n},t.renderForm=function(t){return null==t&&(t={}),$("input.date").datetimepicker({lang:"ja",timepicker:!1,format:"Y/m/d",closeOnDateSelect:!0,scrollInput:!1,maxDate:t.maxDate}),$("input.datetime").datetimepicker({lang:"ja",roundTime:"ceil",step:30,maxDate:t.maxDate})},t}(),Gws_Portal.prototype.addItems=function(t){var e=this;$.each(t,function(t,i){e.addItem(i)})},Gws_Portal.prototype.addItem=function(t){var e=t._id.$oid
;li=this.gs.add_widget('<li class="portlet-item" data-id="'+e+'"></li>',t.grid_data.size_x,t.grid_data.size_y,t.grid_data.col,t.grid_data.row),li.data("id",e);var i=this.el.find(".portlet-html[data-id='"+e+"']");if(i.length){i.height();i.prependTo(li)}},Gws_Portal.prototype.autoResizeItem=function(t,e){var i=this.gs.options.widget_base_dimensions[1],n=e%i>i/2?1:0,r=t.data("sizex"),s=Math.floor(e/i)+n;t.data("sizey")<s&&this.gs.resize_widget(t,r,s)},Gws_Portal.prototype.setSerializeEvent=function(t){var e=this;e.updateUrl=$(t).data("href"),$(t).click(function(){e.serialize()})},Gws_Portal.prototype.setResetEvent=function(t){var e=this;$(t).click(function(){var t=[];e.el.find(".portlet-item").each(function(){t.push($(this).clone())}),e.gs.remove_all_widgets(),$.each(t,function(t,i){e.gs.add_widget(i,i.data("sizex"),i.data("sizey"))})})},Gws_Portal.prototype.serialize=function(){var t=this,e={};t.el.find("li.portlet-item").each(function(){var i=$(this),n=i.data("id");e[n]=t.gs.serialize(i)[0]}),$.ajax({url:t.updateUrl,method:"POST",dataType:"json",data:{_method:"put",authenticity_token:$('meta[name="csrf-token"]').attr("content"),json:JSON.stringify(e)},success:function(t){SS.notice(t.message)}})},Gws_Elasticsearch_Highlighter=function(){},Gws_Elasticsearch_Highlighter.prototype={render:function(){location.hash&&$(location.hash).css("border","1px solid red")}},this.Gws_Discussion_Thread=function(){function t(){}return t.render=function(t){var e=function(e,i,n){var r=$("<span></span>"),s=$('<img src="/assets/img/gws/ic-file.png" alt="" />'),o=$('<a target="_blank"></a>'),a=$('<input type="hidden" name="item[file_ids][]" class="file-id" />'),l=$('<i class="material-icons md-18 md-inactive deselect">close</i>');r.attr("data-file-id",i),r.attr("id","file-"+i),o.text(n),o.attr("href","/.u"+t+"/apis/temp_files/"+i+"/view"),a.attr("value",i),l.on("click",function(){return $(this).parent("span").remove(),$(e).find("[data-file-id]").length<=0&&$(e).hide(),!1}),r.append(s),r.append(o),r.append(l),r.append(a),$(e).show(),$(e).append(r)};$("a.ajax-box").data("on-select",function(t){var i,n,r;return r=$.colorbox.element().closest(".comment-files").find(".selected-files"),i=t.data("id"),n=t.data("humanized-name"),e(r,i,n),$.colorbox.close()});var i={select:function(t,i){return $(t).each(function(t,n){var r,s,o;return o=$(i).closest(".comment-files").find(".selected-files"),r=n._id,s=n.name,e(o,r,s)}),!1}};new SS_Addon_TempFile($(".comment-files .upload-drop-area"),t,i),$(".open-reply").on("click",function(){return $(this).closest(".addon-body").next(".reply").show(),$(this).remove(),!1}),$(".reply[data-topic]").each(function(){var t=$(this).attr("data-topic"),e=function(){return $(".discussion-contributor"+t+" input#item_contributor_model").val($(this).data("model")),$(".discussion-contributor"+t+" input#item_contributor_id").val($(this).data("id")),$(".discussion-contributor"+t+" input#item_contributor_name").val($(this).data("name"))};return $(this).find(".discussion-contributor"+t+' input[name="tmp[contributor]"]').on("change",e),$(this).find(".discussion-contributor"+t+' input[name="tmp[contributor]"]:checked').each(e)})},t}(),this.Gws_Discussion_Unseen=function(){function t(){}return t.url=null,t.intervalID=null,t.intervalTime=null,t.timestamp=null,t.renderUnseen=function(t,e,i){if(this.url=t,this.intervalTime=e,this.timestamp=i,this.url&&this.intervalTime&&this.timestamp)return this.intervalID=setInterval(this.checkMessage,this.intervalTime)},t.checkMessage=function(){return $.ajax({url:t.url,success:function(e){if(parseInt(e)>t.timestamp)return $(".gws-discussion-unseen").show(),clearInterval(t.intervalID)}})},t}(),Gws_Attendance=function(t,e){this.el=t,this.$el=$(t),this.$toolbar=this.$el.find(".cell-toolbar"),this.options=e,this.now=new Date(e.now),this.render()},Gws_Attendance.prototype.render=function(){var t=this;this.$el.find("button[name=punch]").on("click",function(e){e.preventDefault(),e.stopPropagation();var i=$(this).data("action"),n=$(this).data("confirm");t.onPunchClicked(i,n)}),this.$el.find("button[name=edit]").on("click",function(e){e.preventDefault(),e.stopPropagation();var i=$(this).data("action"),n=$(this).data("confirm");t.onEditClicked(i,n)}),this.$el.find(".reason-tooltip").on("click",function(e){e.preventDefault(),e.stopPropagation(),t.hideToolbar(),t.hideTooltip(),$(this).find(".reason").show()}),this.$el.find("select[name=year_month]").on("change",function(){var e=$(this).val();e&&(location.href=t.options.indexUrl.replace(":year_month",e))}),$(document).on("click",this.el+" .time-card .time",function(e){e.preventDefault(),e.stopPropagation(),t.onClickTime($(this))}),$(document).on("click",this.el+" .time-card .memo",function(e){e.preventDefault(),e.stopPropagation(),t.onClickMemo($(this))}),$(document).on("click",function(){t.hideToolbar(),t.hideTooltip()})},Gws_Attendance.prototype.onPunchClicked=function(t,e){if(t&&(!e||confirm(e))){var i=$('meta[name="csrf-token"]').attr("content");$form=$("<form/>",{action:t,method:"post"}),$form.append($("<input/>",{name:"authenticity_token",value:i,type:"hidden"})),$("body").append($form),$form.submit()}},Gws_Attendance.prototype.onEditClicked=function(t,e){t&&(e&&!confirm(e)||($a=$("<a />",{href:t}),$a.colorbox({open:!0,width:"90%"})))},Gws_Attendance.prototype.hideToolbar=function(){this.$toolbar.hide()},Gws_Attendance.prototype.hideTooltip=function(){this.$el.find(".reason-tooltip .reason").hide()},Gws_Attendance.prototype.onClickTime=function(t){this.onClickCell(t,this.options.timeUrl)},Gws_Attendance.prototype.onClickMemo=function(t){this.onClickCell(t,this.options.memoUrl)},Gws_Attendance.prototype.setFocus=function(t){this.$el.find(".time-card .time").removeClass("focus"),this.$el.find(".time-card .memo").removeClass("focus"),t.addClass("focus")},Gws_Attendance.prototype.isCellToday=function(t){return t.closest("tr").hasClass("current")},Gws_Attendance.prototype.onClickCell=function(t,e){if(this.hideTooltip(),t.data("day"))if(this.setFocus(t),this.options.editable||this.isCellToday(t)){var i=e;i=(i=i.replace(":day",t.data("day"))).replace(":type",t.data("type")),this.$toolbar.find(".edit").attr("href",i),this.options.editable||this.isCellToday(t)?this.$toolbar.find(".edit").show():this.$toolbar.find(".edit").hide();var n=t.offset();t.hasClass("top")?n.top-=this.$toolbar.outerHeight():n.top+=t.outerHeight(),this.$toolbar.show(),this.$toolbar.offset(n)}else this.$toolbar.hide()},Gws_Attendance_Portlet=function(t,e){this.$el=$(t),this.options=e,this.render()},Gws_Attendance_Portlet.prototype.render=function(){var t=this;this.$el.find("button[name=punch]").on("click",function(){t.punch($(this),$(this).closest("tr").data("field-name"))}),this.$el.find("button[name=edit]").on("click",function(){t.edit($(this),$(this).closest("tr").data("field-name"))})},Gws_Attendance_Portlet.prototype.punch=function(t,e){if(t.attr("disabled","disabled"),confirm(this.options.confirmMessage)){var i=this.options.punchUrl.replace(":TYPE",e),n=this;$.ajax({url:i,method:"POST",data:{ref:this.options.ref},dataType:"json",success:function(){alert(n.options.successMessage),location.reload()},error:function(t){alert(t.responseJSON.join("\n"))},complete:function(){t.removeAttr("disabled")}})}else t.removeAttr("disabled")},Gws_Attendance_Portlet.prototype.edit=function(t,e){t.attr("disabled","disabled");var i=this.options.editUrl.replace(":TYPE",e);$a=$("<a/>",{href:i}),$a.colorbox({open:!0})},this.Gws_Presence_User=function(){function t(){}return t.render=function(){$(document).on("click",function(){return $(".presence-state-selector").hide(),!0}),$(".presence-state-selector").on("click",function(){return!1}),$(".presence-state-selector [data-value]").on("click",function(){var e=$(this).closest(".presence-state-selector").attr("data-id"),i=$(this).closest(".presence-state-selector").attr("data-url"),n=$(this).attr("data-value");return $.ajax({url:i,type:"POST",data:{_method:"put",authenticity_token:$('meta[name="csrf-token"]').attr("content"),presence_state:n},success:function(i){t.changedState(e,i),$(".presence-state-selector").hide()},error:function(t){alert(t.responseJSON.join("\n"))}}),!1}),$(".editable .select-presence-state,.editable .presence-state").on("click",function(){return $(".presence-state-selector").closest("li.portlet-item").css("z-index",0),$(".presence-state-selector").hide(),$(this).closest("li.portlet-item").css("z-index",1e3),$(this).closest("td").find(".presence-state-selector").show(),!1}),$(".ajax-text-field").on("click",function(){return t.toggleForm(this),!1}),$(".ajax-text-field").next(".editicon").on("click",function(){return $(this).prev(".ajax-text-field").trigger("click"),!1})},t.changedState=function(t,e){var i=e.presence_state||"none",n=e.presence_state_label,r=$("tr[data-id="+t+"] .presence-state"),s=$("tr[data-id="+t+"] .presence-state-selector");r.removeClass(),r.addClass("presence-state"),r.addClass(i),r.text(n),s.find("[data-value="+i+"] .selected-icon").css("visibility","visible"),s.find("[data-value!="+i+"] .selected-icon").css("visibility","hidden")},t.toggleForm=function(e){var i=$(e).attr("data-tag-state"),n=$(e).attr("data-original-tag"),r=$(e).attr("data-form-tag"),s=$(e).text()||$(e).val(),o=$(r).attr("name"),a=($(r).attr("data-id"),$(r).attr("data-url")),l=!1;if("original"==i){(r=$(r)).attr("data-original-tag",$(e).attr("data-original-tag")),r.attr("data-form-tag",$(e).attr("data-form-tag")),r.val(s),r.focusout(function(){if(l)return!0;var e={_method:"put",authenticity_token:$('meta[name="csrf-token"]').attr("content")};return e[o]=$(r).val(),$.ajax({url:a,type:"POST",data:e,success:function(e){$(r).val(e[o]),t.toggleForm(r)},error:function(t){alert(t.responseJSON.join("\n")),l=!0}}),!1}),r.keypress(function(e){if(13==e.which){var i={_method:"put",authenticity_token:$('meta[name="csrf-token"]').attr("content")};return i[o]=$(r).val(),$.ajax({url:a,type:"POST",data:i,success:function(e){$(r).val(e[o]),t.toggleForm(r)},error:function(t){alert(t.responseJSON.join("\n")),l=!0}}),!1}});var d=r.uniqueId();$(e).replaceWith(r),$(d).focus()}else(n=$(n).text(s)).attr("data-original-tag",$(e).attr("data-original-tag")),n.attr("data-form-tag",$(e).attr("data-form-tag")),n.on("click",function(){return t.toggleForm(this),!1}),n.uniqueId(),$(e).replaceWith(n),$(".ajax-text-field[data-id='"+n.attr("data-id")+"'][data-name='"+n.attr("data-name")+"']").text(s)},t}(),this.Gws_Presence_User_Reload=function(){function t(){}return t.render=function(t={}){var e=t.url,i=t.paginate_params,n=t.page;$(".group-users .reload").on("click",function(){param=$.param({s:{keyword:$(".group-users [name='s[keyword]']").val()},paginate_params:i,page:n}),$.ajax({url:e+"?"+param,beforeSend:function(){$(".group-users .data-table-wrap").html(SS.loading)},success:function(t){$(".group-users .data-table-wrap").html(t);var e=$(".group-users .data-table-wrap").find("time");$(".group-users .list-head time").replaceWith(e).show(),e.show()}})}),$(".group-users .list-head .search").on("submit",function(){return param=$.param({s:{keyword:$(".group-users [name='s[keyword]']").val()},paginate_params:i}),$.ajax({url:e+"?"+param,beforeSend:function(){$(".group-users .data-table-wrap").html(SS.loading)},success:function(t){$(".group-users .data-table-wrap").html(t);var e=$(".group-users .data-table-wrap").find("time");$(".group-users .list-head time").replaceWith(e),e.show()},error:function(){$(".group-users .data-table-wrap").html("")}}),!1})},t}(),$(function(){$("a[href^=http]").not('[href*="'+location.hostname+'"]').attr({target:"_blank"});var t=location.pathname+"/";$(".gws-schedule-tabs a").each(function(){var e=$(this);t.match(new RegExp("^"+e.attr("href")+"(/|$)"))&&e.addClass("current")}),Gws_Member.render()});