//= require bxslider
//= require_self

class @KeyVisual_Image
  @slide: (selector) ->
    slider = $("#{selector} .images").bxSlider
      auto: true
      autoControls: true
      startText: "<%= I18n.t 'key_visual.controls.start' %>"
      stopText: "<%= I18n.t 'key_visual.controls.stop' %>"
      controls: false
      pagerCustom: "#{selector} .bx-thumbs"
      onSliderLoad: (currentIndex) ->
        $("#{selector} .images liXXX").not("li.bx-clone").each (i) ->
          image = $(this).find("img")
          thumb = "<img src='#{image.data('thumb')}' alt='#{image.attr('alt')}' />";
          $($("#{selector} .bx-pager-item a")[i]).html(thumb)

  # randomize banners
  @randomize: (selector) ->
    wrap = $(selector)
    list = wrap.find("li")
    list = list.sort ->
      return Math.random() - .5
    list.each ->
      wrap.append $(this)
