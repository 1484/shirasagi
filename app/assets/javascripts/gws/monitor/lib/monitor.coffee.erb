class @Gws_Monitor_Topic
  @render: ->
    $(".public").on "click", ->
      token = $('meta[name="csrf-token"]').attr('content')
      id = $("#item_id").val()
      form = $("<form/>", action: "#{id}/public", method: "post")
      form.append($("<input/>", name: "authenticity_token", value: token, type: "hidden"))
      form.appendTo(document.body).submit()

    $(".preparation").on "click", ->
      token = $('meta[name="csrf-token"]').attr('content')
      id = $("#item_id").val()
      form = $("<form/>", action: "#{id}/preparation", method: "post")
      form.append($("<input/>", name: "authenticity_token", value: token, type: "hidden"))
      form.appendTo(document.body).submit()

    $(".qNA").on "click", ->
      token = $('meta[name="csrf-token"]').attr('content')
      id = $("#item_id").val()
      form = $("<form/>", action: "#{id}/question_not_applicable", method: "post")
      form.append($("<input/>", name: "authenticity_token", value: token, type: "hidden"))
      form.appendTo(document.body).submit()

    $(".answered").on "click", ->
      token = $('meta[name="csrf-token"]').attr('content')
      id = $("#item_id").val()
      form = $("<form/>", action: "#{id}/answered", method: "post")
      form.append($("<input/>", name: "authenticity_token", value: token, type: "hidden"))
      form.appendTo(document.body).submit()

    $(".public-all").on "click", ->
      checked = $(".list-item input:checkbox:checked").map ->
        $(this).val()
      return false if checked.length == 0
      token = $('meta[name="csrf-token"]').attr('content')
      form = $("<form/>", action: "topics/public_all", method: "post")
      form.append($("<input/>", name: "authenticity_token", value: token, type: "hidden"))
      for id in checked
        form.append($("<input/>", name: "ids[]", value: id, type: "hidden"))
      form.appendTo(document.body).submit()

    $(".preparation-all").on "click", ->
      checked = $(".list-item input:checkbox:checked").map ->
        $(this).val()
      return false if checked.length == 0
      token = $('meta[name="csrf-token"]').attr('content')
      form = $("<form/>", action: "topics/preparation_all", method: "post")
      form.append($("<input/>", name: "authenticity_token", value: token, type: "hidden"))
      for id in checked
        form.append($("<input/>", name: "ids[]", value: id, type: "hidden"))
      form.appendTo(document.body).submit()

    $(".qNA-all").on "click", ->
      checked = $(".list-item input:checkbox:checked").map ->
        $(this).val()
      return false if checked.length == 0
      token = $('meta[name="csrf-token"]').attr('content')
      form = $("<form/>", action: "topics/qNA_all", method: "post")
      form.append($("<input/>", name: "authenticity_token", value: token, type: "hidden"))
      for id in checked
        form.append($("<input/>", name: "ids[]", value: id, type: "hidden"))
      form.appendTo(document.body).submit()

