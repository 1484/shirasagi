<ul class="<%= css_class %> depth<%= depth %>">
  <% categories.each do |category| %>
    <li>
      <% if category.real? %>
        <%= label_tag("item_category_ids_#{category.id}") do %>
          <%= f.check_box("category_ids[]", { }, category.id) %>
          <% if category.color? %>
            <span class="name" style="background-color: <%= category.color %>; color: <%= category.text_color %>"><%= category.name %></span>
          <% else %>
            <span class="name"><%= category.name %></span>
          <% end %>
        <% end %>
      <% else %>
        <span class="name"><%= category.name %></span>
      <% end %>

      <% if category.children? %>
        <%
           if category.grandchild?
             css_class = 'child'
           else
             css_class = 'grandchild'
           end
        %>
        <%= render partial: 'gws/agents/addons/board/category/cate_form', locals: { f: f, categories: category.children, css_class: css_class, depth: depth + 1 } %>
      <% end %>
    </li>
  <% end %>
</ul>
