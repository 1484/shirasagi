<%= javascript_include_tag "/assets/js/fullcalendar/ja.js" %>
<%= jquery do %>
Gws_Schedule_Calendar.renderController('#calendar-controller');
Gws_Schedule_Calendar.render('#calendar', {
  defaultView: 'basicWeek',
  restUrl: '<%= gws_schedule_plans_path %>',
  eventSources: [{ url: '<%= gws_schedule_plans_path(format: :json) %>' }]
});
<% end %>

<section class="main-box">
  <header><h2><%= t('modules.gws_schedule') %></h2></header>
  <div class="calendar" id="calendar-controller"></div>
  <div class="calendar multiple" id="calendar"></div>
</section>

<section class="main-box">
  <header><h2><%= t('modules.gws_board') %></h2></header>

  <table class="index">
    <thead>
      <tr>
        <th>スレッドタイトル</th>
        <th>コメント数</th>
        <th>最終更新日時</th>
      </tr>
    </thead>

    <tbody>
      <% @boards.each do |item| %>
      <tr>
        <td class="title"><%= link_to item.name, gws_board_topic_path(id: item) %></td>
        <td class="comment"><%= item.descendants.size %></td>
        <td class="datetime"><%= item.descendants_updated.strftime("%Y-%m-%d %H:%M") %></td>
      </tr>
      <% end %>
    </tbody>
  </table>
</section>
